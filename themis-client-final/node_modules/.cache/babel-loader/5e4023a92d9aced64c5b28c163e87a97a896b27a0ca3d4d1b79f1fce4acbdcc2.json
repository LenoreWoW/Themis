{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Typography,Paper,Button,Dialog,DialogTitle,DialogContent,DialogActions,TextField,MenuItem,IconButton,Box,Chip,LinearProgress,Slider,Tabs,Tab,FormControlLabel,Switch,Select,FormControl,InputLabel,ListItemText,Checkbox,OutlinedInput}from'@mui/material';import{Add as AddIcon,Edit as EditIcon,Delete as DeleteIcon,Link as LinkIcon}from'@mui/icons-material';import{GridContainer,GridItem}from'../components/common/MuiGridWrapper';import{useTranslation}from'react-i18next';import api from'../services/api';// Enums used in this component\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";var GoalType=/*#__PURE__*/function(GoalType){GoalType[\"STRATEGIC\"]=\"STRATEGIC\";GoalType[\"ANNUAL\"]=\"ANNUAL\";GoalType[\"QUARTERLY\"]=\"QUARTERLY\";GoalType[\"MONTHLY\"]=\"MONTHLY\";return GoalType;}(GoalType||{});var GoalCategory=/*#__PURE__*/function(GoalCategory){GoalCategory[\"PERFORMANCE\"]=\"PERFORMANCE\";GoalCategory[\"FINANCIAL\"]=\"FINANCIAL\";GoalCategory[\"CUSTOMER\"]=\"CUSTOMER\";GoalCategory[\"LEARNING\"]=\"LEARNING\";GoalCategory[\"PROCESS\"]=\"PROCESS\";return GoalCategory;}(GoalCategory||{});var GoalStatus=/*#__PURE__*/function(GoalStatus){GoalStatus[\"NOT_STARTED\"]=\"NOT_STARTED\";GoalStatus[\"IN_PROGRESS\"]=\"IN_PROGRESS\";GoalStatus[\"COMPLETED\"]=\"COMPLETED\";GoalStatus[\"ON_HOLD\"]=\"ON_HOLD\";return GoalStatus;}(GoalStatus||{});// Local interfaces\n// Export the initial goals for use in other components\nexport const initialStrategicGoals=[{id:'1',title:'Improve Project Completion Rate',description:'Increase on-time project completion rate by 15%',type:GoalType.STRATEGIC,category:GoalCategory.PERFORMANCE,status:GoalStatus.IN_PROGRESS,progress:65,startDate:'2023-01-01',endDate:'2025-12-31',assignedTo:'Department A',linkedProjects:[{projectId:'p1',weight:60},{projectId:'p4',weight:40}],isProgressAutoCalculated:true,createdAt:'2023-01-01',updatedAt:'2023-01-01'},{id:'2',title:'Reduce Project Costs',description:'Reduce average project costs by 10%',type:GoalType.STRATEGIC,category:GoalCategory.FINANCIAL,status:GoalStatus.NOT_STARTED,progress:0,startDate:'2023-02-15',endDate:'2025-11-30',assignedTo:'Department B',linkedProjects:[],isProgressAutoCalculated:false,createdAt:'2023-02-15',updatedAt:'2023-02-15'}];// Export the initial annual goals\nexport const initialAnnualGoals=[{id:'3',title:'Client Satisfaction',description:'Achieve 90% positive client feedback',type:GoalType.ANNUAL,category:GoalCategory.CUSTOMER,status:GoalStatus.COMPLETED,progress:100,startDate:'2023-01-15',endDate:'2023-12-31',assignedTo:'All Departments',linkedProjects:[{projectId:'p2',weight:50},{projectId:'p3',weight:50}],isProgressAutoCalculated:true,createdAt:'2023-01-15',updatedAt:'2023-12-15'},{id:'4',title:'Staff Training',description:'Complete required training for all staff members',type:GoalType.ANNUAL,category:GoalCategory.LEARNING,status:GoalStatus.IN_PROGRESS,progress:75,startDate:'2023-01-01',endDate:'2023-12-31',assignedTo:'HR Department',linkedProjects:[],isProgressAutoCalculated:false,createdAt:'2023-01-01',updatedAt:'2023-10-01'}];// Tab panel component\nfunction TabPanel(props){const{children,value,index,...other}=props;return/*#__PURE__*/_jsx(\"div\",{role:\"tabpanel\",hidden:value!==index,id:`goals-tabpanel-${index}`,\"aria-labelledby\":`goals-tab-${index}`,...other,children:value===index&&/*#__PURE__*/_jsx(Box,{sx:{pt:3},children:children})});}function a11yProps(index){return{id:`goals-tab-${index}`,'aria-controls':`goals-tabpanel-${index}`};}const GoalsPage=()=>{var _currentGoal$linkedPr,_currentGoal$linkedPr2;const{t}=useTranslation();const[tabValue,setTabValue]=useState(0);const[strategicGoals,setStrategicGoals]=useState(initialStrategicGoals);const[annualGoals,setAnnualGoals]=useState(initialAnnualGoals);const[openDialog,setOpenDialog]=useState(false);const[currentGoal,setCurrentGoal]=useState(null);const[isEditing,setIsEditing]=useState(false);const[projects,setProjects]=useState([]);const[loading,setLoading]=useState(false);const[projectWeights,setProjectWeights]=useState({});// Fetch projects when component mounts\nuseEffect(()=>{const fetchProjects=async()=>{setLoading(true);try{const response=await api.projects.getAllProjects('');if(response.success){setProjects(response.data);}}catch(error){console.error('Error fetching projects:',error);}finally{setLoading(false);}};fetchProjects();},[]);// Calculate a goal's progress based on the progress of its linked projects\nconst calculateGoalProgressFromProjects=linkedProjectWeights=>{if(linkedProjectWeights.length===0)return 0;let weightedProgress=0;let totalWeight=0;linkedProjectWeights.forEach(projectWeight=>{const project=projects.find(p=>p.id===projectWeight.projectId);if(project){weightedProgress+=project.progress*projectWeight.weight;totalWeight+=projectWeight.weight;}});// Return weighted average, or 0 if no valid projects were found\nreturn totalWeight>0?Math.round(weightedProgress/totalWeight):0;};const handleTabChange=(_event,newValue)=>{setTabValue(newValue);};const handleOpenDialog=function(){let goal=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;let editing=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;setIsEditing(editing);if(goal){setCurrentGoal(goal);// Initialize project weights from existing linked projects\nconst weights={};goal.linkedProjects.forEach(link=>{weights[link.projectId]=link.weight;});setProjectWeights(weights);}else{// Create a new goal with default values\nsetCurrentGoal({id:Date.now().toString(),title:'',description:'',type:tabValue===0?GoalType.STRATEGIC:GoalType.ANNUAL,category:GoalCategory.PERFORMANCE,status:GoalStatus.NOT_STARTED,progress:0,startDate:new Date().toISOString().split('T')[0],endDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString().split('T')[0],assignedTo:'',linkedProjects:[],isProgressAutoCalculated:false,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});setProjectWeights({});}setOpenDialog(true);};const handleCloseDialog=()=>{setOpenDialog(false);setCurrentGoal(null);setIsEditing(false);setProjectWeights({});};const handleChange=e=>{const{name,value}=e.target;setCurrentGoal(prevGoal=>prevGoal?{...prevGoal,[name]:value}:null);};const handleSelectChange=event=>{const{name,value}=event.target;setCurrentGoal(prevGoal=>{if(!prevGoal)return prevGoal;return{...prevGoal,[name]:value};});};const handleProgressChange=(event,newValue)=>{setCurrentGoal(prevGoal=>{if(!prevGoal)return prevGoal;return{...prevGoal,progress:newValue};});};const handleLinkedProjectsChange=event=>{if(!currentGoal)return;const selectedProjectIds=event.target.value;// Initialize weights for newly selected projects\nconst updatedWeights={...projectWeights};selectedProjectIds.forEach(projectId=>{// If this is a newly selected project, initialize its weight to a default value\nif(!updatedWeights[projectId]){updatedWeights[projectId]=100/selectedProjectIds.length;// Default to equal weights\n}});// Remove weights for projects that are no longer selected\nObject.keys(updatedWeights).forEach(projectId=>{if(!selectedProjectIds.includes(projectId)){delete updatedWeights[projectId];}});// Normalize weights to ensure they sum to 100%\nnormalizeWeights(updatedWeights);setProjectWeights(updatedWeights);// Update the linked projects with new weights\nconst updatedLinkedProjects=selectedProjectIds.map(projectId=>({projectId,weight:updatedWeights[projectId]}));setCurrentGoal({...currentGoal,linkedProjects:updatedLinkedProjects});};const handleAutoCalculateChange=event=>{const isAutoCalculated=event.target.checked;setCurrentGoal(prevGoal=>{if(!prevGoal)return null;const updatedGoal={...prevGoal,isProgressAutoCalculated:isAutoCalculated};// If enabling auto-calculation, update the progress based on linked projects\nif(isAutoCalculated){updatedGoal.progress=calculateGoalProgressFromProjects(prevGoal.linkedProjects.map(p=>p));}return updatedGoal;});};const handleWeightChange=(projectId,newWeight)=>{if(!currentGoal)return;const updatedWeights={...projectWeights};updatedWeights[projectId]=newWeight;// Ensure weights sum to 100%\nnormalizeWeights(updatedWeights);setProjectWeights(updatedWeights);// Update linked projects with new weights\nconst updatedLinkedProjects=currentGoal.linkedProjects.map(project=>project.projectId===projectId?{...project,weight:newWeight}:{...project,weight:updatedWeights[project.projectId]});setCurrentGoal({...currentGoal,linkedProjects:updatedLinkedProjects});};const handleSubmit=event=>{event.preventDefault();if(!currentGoal)return;// Ensure project weights are properly set before saving\nconst finalLinkedProjects=currentGoal.linkedProjects.map(project=>({projectId:project.projectId,weight:projectWeights[project.projectId]||0}));const finalGoal={...currentGoal,linkedProjects:finalLinkedProjects,updatedAt:new Date().toISOString()};// Save the goal\nif(isEditing){// Update existing goal\nif(currentGoal.type===GoalType.STRATEGIC){setStrategicGoals(prevGoals=>prevGoals.map(goal=>goal.id===currentGoal.id?finalGoal:goal));}else{setAnnualGoals(prevGoals=>prevGoals.map(goal=>goal.id===currentGoal.id?finalGoal:goal));}}else{// Add new goal\nif(finalGoal.type===GoalType.STRATEGIC){setStrategicGoals(prevGoals=>[...prevGoals,finalGoal]);}else{setAnnualGoals(prevGoals=>[...prevGoals,finalGoal]);}}setOpenDialog(false);setCurrentGoal(null);setProjectWeights({});};const handleDeleteGoal=id=>{if(tabValue===0){setStrategicGoals(strategicGoals.filter(goal=>goal.id!==id));}else{setAnnualGoals(annualGoals.filter(goal=>goal.id!==id));}};const getStatusColor=status=>{switch(status){case GoalStatus.NOT_STARTED:return'default';case GoalStatus.IN_PROGRESS:return'primary';case GoalStatus.COMPLETED:return'success';case GoalStatus.ON_HOLD:return'warning';default:return'default';}};const getTranslatedStatus=status=>{switch(status){case GoalStatus.NOT_STARTED:return t('goals.notStarted');case GoalStatus.IN_PROGRESS:return t('status.inProgress');case GoalStatus.COMPLETED:return t('status.completed');case GoalStatus.ON_HOLD:return t('status.onHold');default:return status;}};const getTranslatedCategory=category=>{switch(category){case GoalCategory.PERFORMANCE:return t('goals.performance');case GoalCategory.FINANCIAL:return t('goals.financial');case GoalCategory.CUSTOMER:return t('goals.customer');case GoalCategory.LEARNING:return t('goals.learning');case GoalCategory.PROCESS:return t('goals.process');default:return category;}};const renderGoalCards=goals=>/*#__PURE__*/_jsx(GridContainer,{spacing:3,children:goals.map(goal=>/*#__PURE__*/_jsx(GridItem,{xs:12,md:6,lg:4,children:/*#__PURE__*/_jsxs(Paper,{elevation:2,sx:{p:2,height:'100%',display:'flex',flexDirection:'column',position:'relative'},children:[/*#__PURE__*/_jsxs(Box,{sx:{position:'absolute',top:10,right:10,display:'flex'},children:[/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>handleOpenDialog(goal,true),sx:{mr:1},children:/*#__PURE__*/_jsx(EditIcon,{fontSize:\"small\"})}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>handleDeleteGoal(goal.id),children:/*#__PURE__*/_jsx(DeleteIcon,{fontSize:\"small\"})})]}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:goal.title}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mb:2,minHeight:'40px'},children:goal.description}),/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsx(Chip,{label:getTranslatedStatus(goal.status),size:\"small\",sx:{mr:1,mb:1},color:getStatusColor(goal.status)}),/*#__PURE__*/_jsx(Chip,{label:getTranslatedCategory(goal.category),size:\"small\",sx:{mb:1},variant:\"outlined\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{mb:1},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",display:\"flex\",alignItems:\"center\",children:[/*#__PURE__*/_jsxs(Box,{component:\"span\",sx:{width:'50%',fontWeight:'bold',mr:1},children:[t('goals.progress'),\":\"]}),/*#__PURE__*/_jsxs(Box,{component:\"span\",sx:{width:'50%'},children:[goal.progress,\"%\"]})]}),/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:goal.progress,sx:{mt:1,mb:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{checked:goal.isProgressAutoCalculated,size:\"small\",disabled:true}),label:t('goals.autoCalculated'),sx:{'& .MuiFormControlLabel-label':{fontSize:'0.75rem'}}})})]}),/*#__PURE__*/_jsxs(Box,{sx:{mb:1},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",sx:{fontWeight:'bold'},children:[t('timeline'),\":\"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[new Date(goal.startDate).toLocaleDateString(),\" - \",new Date(goal.endDate).toLocaleDateString()]})]}),/*#__PURE__*/_jsx(Box,{sx:{mt:'auto',pt:1},children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[t('goals.assignedTo'),\": \",goal.assignedTo]})}),goal.linkedProjects.length>0&&/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",sx:{fontWeight:'bold',mb:1},children:[t('goals.linkedProjects'),\":\"]}),goal.linkedProjects.map(projectWeight=>{const project=projects.find(p=>p.id===projectWeight.projectId);return/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',justifyContent:'space-between',mb:0.5},children:[/*#__PURE__*/_jsx(Chip,{icon:/*#__PURE__*/_jsx(LinkIcon,{fontSize:\"small\"}),label:project?project.name:projectWeight.projectId,size:\"small\",variant:\"outlined\",sx:{mr:1}}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",sx:{fontWeight:'medium'},children:[projectWeight.weight,\"%\"]})]},projectWeight.projectId);})]})]})},goal.id))});// Function to normalize weights to sum to 100%\nconst normalizeWeights=weights=>{const projectIds=Object.keys(weights);if(projectIds.length===0)return;// Calculate the total of all weights\nconst total=projectIds.reduce((sum,id)=>sum+weights[id],0);// If the total is not 100, normalize\nif(total!==100&&total!==0){projectIds.forEach(id=>{weights[id]=Math.round(weights[id]/total*100);});// Handle any rounding errors to ensure the sum is exactly 100\nconst newTotal=projectIds.reduce((sum,id)=>sum+weights[id],0);if(newTotal!==100){weights[projectIds[0]]+=100-newTotal;}}};return/*#__PURE__*/_jsxs(Box,{sx:{p:3},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',mb:3,alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:t('navigation.goals')}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:()=>handleOpenDialog(),children:t('goals.add')})]}),/*#__PURE__*/_jsx(Box,{sx:{borderBottom:1,borderColor:'divider'},children:/*#__PURE__*/_jsxs(Tabs,{value:tabValue,onChange:handleTabChange,\"aria-label\":\"goal types\",children:[/*#__PURE__*/_jsx(Tab,{label:t('goals.strategic'),...a11yProps(0)}),/*#__PURE__*/_jsx(Tab,{label:t('goals.annual'),...a11yProps(1)})]})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:0,children:renderGoalCards(strategicGoals)}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:1,children:renderGoalCards(annualGoals)}),/*#__PURE__*/_jsxs(Dialog,{open:openDialog,onClose:handleCloseDialog,maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:isEditing?t('goals.edit'):`${t('goals.addNew')} ${tabValue===0?t('goals.strategic'):t('goals.annual')} ${t('goals.goal')}`}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(GridContainer,{spacing:2,sx:{mt:1},children:[/*#__PURE__*/_jsx(GridItem,{xs:12,children:/*#__PURE__*/_jsx(TextField,{label:t('goals.title'),name:\"title\",value:(currentGoal===null||currentGoal===void 0?void 0:currentGoal.title)||'',onChange:handleChange,fullWidth:true,required:true})}),/*#__PURE__*/_jsx(GridItem,{xs:12,children:/*#__PURE__*/_jsx(TextField,{label:t('common.description'),name:\"description\",value:(currentGoal===null||currentGoal===void 0?void 0:currentGoal.description)||'',onChange:handleChange,fullWidth:true,multiline:true,rows:3})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{select:true,label:t('goals.category'),name:\"category\",value:(currentGoal===null||currentGoal===void 0?void 0:currentGoal.category)||GoalCategory.PERFORMANCE,onChange:handleSelectChange,fullWidth:true,children:Object.values(GoalCategory).map(category=>/*#__PURE__*/_jsx(MenuItem,{value:category,children:getTranslatedCategory(category)},category))})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{select:true,label:t('status.status'),name:\"status\",value:(currentGoal===null||currentGoal===void 0?void 0:currentGoal.status)||GoalStatus.NOT_STARTED,onChange:handleSelectChange,fullWidth:true,children:Object.values(GoalStatus).map(status=>/*#__PURE__*/_jsx(MenuItem,{value:status,children:getTranslatedStatus(status)},status))})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{label:t('common.startDate'),name:\"startDate\",type:\"date\",value:(currentGoal===null||currentGoal===void 0?void 0:currentGoal.startDate)||'',onChange:handleChange,fullWidth:true,InputLabelProps:{shrink:true}})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{label:t('common.endDate'),name:\"endDate\",type:\"date\",value:(currentGoal===null||currentGoal===void 0?void 0:currentGoal.endDate)||'',onChange:handleChange,fullWidth:true,InputLabelProps:{shrink:true}})}),/*#__PURE__*/_jsx(GridItem,{xs:12,children:/*#__PURE__*/_jsx(TextField,{label:t('goals.assignedTo'),name:\"assignedTo\",value:(currentGoal===null||currentGoal===void 0?void 0:currentGoal.assignedTo)||'',onChange:handleChange,fullWidth:true})}),/*#__PURE__*/_jsx(GridItem,{xs:12,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{id:\"linked-projects-label\",children:t('goals.linkedProjects')}),/*#__PURE__*/_jsx(Select,{labelId:\"linked-projects-label\",multiple:true,value:(currentGoal===null||currentGoal===void 0?void 0:currentGoal.linkedProjects.map(p=>p.projectId))||[],onChange:handleLinkedProjectsChange,input:/*#__PURE__*/_jsx(OutlinedInput,{label:t('goals.linkedProjects')}),renderValue:selected=>/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',gap:0.5},children:selected.map(value=>{const project=projects.find(p=>p.id===value);return/*#__PURE__*/_jsx(Chip,{label:project?project.name:value,size:\"small\"},value);})}),MenuProps:{PaperProps:{style:{maxHeight:224,width:250}}},children:projects.map(project=>/*#__PURE__*/_jsxs(MenuItem,{value:project.id,children:[/*#__PURE__*/_jsx(Checkbox,{checked:(currentGoal===null||currentGoal===void 0?void 0:currentGoal.linkedProjects.some(p=>p.projectId===project.id))||false}),/*#__PURE__*/_jsx(ListItemText,{primary:project.name})]},project.id))})]})}),/*#__PURE__*/_jsxs(GridItem,{xs:12,children:[/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:(currentGoal===null||currentGoal===void 0?void 0:currentGoal.isProgressAutoCalculated)||false,onChange:handleAutoCalculateChange,name:\"isProgressAutoCalculated\"}),label:t('goals.autoCalculateProgress')}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",display:\"block\",children:t('goals.autoCalculateDescription')})]}),!(currentGoal!==null&&currentGoal!==void 0&&currentGoal.isProgressAutoCalculated)&&/*#__PURE__*/_jsxs(GridItem,{xs:12,children:[/*#__PURE__*/_jsxs(Typography,{id:\"progress-slider\",gutterBottom:true,children:[t('project.progress'),\": \",(currentGoal===null||currentGoal===void 0?void 0:currentGoal.progress)||0,\"%\"]}),/*#__PURE__*/_jsx(Slider,{value:(currentGoal===null||currentGoal===void 0?void 0:currentGoal.progress)||0,onChange:handleProgressChange,\"aria-labelledby\":\"progress-slider\",valueLabelDisplay:\"auto\",step:5,marks:true,min:0,max:100})]}),(currentGoal===null||currentGoal===void 0?void 0:(_currentGoal$linkedPr=currentGoal.linkedProjects)===null||_currentGoal$linkedPr===void 0?void 0:_currentGoal$linkedPr.length)>0&&/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",gutterBottom:true,children:t('Project Weights')}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",paragraph:true,children:t('Adjust the weight of each project\\'s contribution to this goal. Weights will automatically balance to 100%.')}),currentGoal===null||currentGoal===void 0?void 0:(_currentGoal$linkedPr2=currentGoal.linkedProjects)===null||_currentGoal$linkedPr2===void 0?void 0:_currentGoal$linkedPr2.map(projectLink=>{const project=projects.find(p=>p.id===projectLink.projectId);return/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:project?project.name:projectLink.projectId}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",fontWeight:\"medium\",children:[projectWeights[projectLink.projectId]||projectLink.weight,\"%\"]})]}),/*#__PURE__*/_jsx(Slider,{value:projectWeights[projectLink.projectId]||projectLink.weight,onChange:(_,newValue)=>handleWeightChange(projectLink.projectId,newValue),\"aria-labelledby\":\"project-weight-slider\",valueLabelDisplay:\"auto\",step:5,marks:true,min:5,max:100})]},projectLink.projectId);})]})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleCloseDialog,children:t('common.cancel')}),/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,variant:\"contained\",color:\"primary\",children:isEditing?t('common.update'):t('common.create')})]})]})]});};export default GoalsPage;","map":{"version":3,"names":["React","useState","useEffect","Typography","Paper","Button","Dialog","DialogTitle","DialogContent","DialogActions","TextField","MenuItem","IconButton","Box","Chip","LinearProgress","Slider","Tabs","Tab","FormControlLabel","Switch","Select","FormControl","InputLabel","ListItemText","Checkbox","OutlinedInput","Add","AddIcon","Edit","EditIcon","Delete","DeleteIcon","Link","LinkIcon","GridContainer","GridItem","useTranslation","api","jsx","_jsx","jsxs","_jsxs","GoalType","GoalCategory","GoalStatus","initialStrategicGoals","id","title","description","type","STRATEGIC","category","PERFORMANCE","status","IN_PROGRESS","progress","startDate","endDate","assignedTo","linkedProjects","projectId","weight","isProgressAutoCalculated","createdAt","updatedAt","FINANCIAL","NOT_STARTED","initialAnnualGoals","ANNUAL","CUSTOMER","COMPLETED","LEARNING","TabPanel","props","children","value","index","other","role","hidden","sx","pt","a11yProps","GoalsPage","_currentGoal$linkedPr","_currentGoal$linkedPr2","t","tabValue","setTabValue","strategicGoals","setStrategicGoals","annualGoals","setAnnualGoals","openDialog","setOpenDialog","currentGoal","setCurrentGoal","isEditing","setIsEditing","projects","setProjects","loading","setLoading","projectWeights","setProjectWeights","fetchProjects","response","getAllProjects","success","data","error","console","calculateGoalProgressFromProjects","linkedProjectWeights","length","weightedProgress","totalWeight","forEach","projectWeight","project","find","p","Math","round","handleTabChange","_event","newValue","handleOpenDialog","goal","arguments","undefined","editing","weights","link","Date","now","toString","toISOString","split","setFullYear","getFullYear","handleCloseDialog","handleChange","e","name","target","prevGoal","handleSelectChange","event","handleProgressChange","handleLinkedProjectsChange","selectedProjectIds","updatedWeights","Object","keys","includes","normalizeWeights","updatedLinkedProjects","map","handleAutoCalculateChange","isAutoCalculated","checked","updatedGoal","handleWeightChange","newWeight","handleSubmit","preventDefault","finalLinkedProjects","finalGoal","prevGoals","handleDeleteGoal","filter","getStatusColor","ON_HOLD","getTranslatedStatus","getTranslatedCategory","PROCESS","renderGoalCards","goals","spacing","xs","md","lg","elevation","height","display","flexDirection","position","top","right","size","onClick","mr","fontSize","variant","gutterBottom","color","mb","minHeight","label","alignItems","component","width","fontWeight","mt","control","disabled","toLocaleDateString","justifyContent","icon","projectIds","total","reduce","sum","newTotal","startIcon","borderBottom","borderColor","onChange","open","onClose","maxWidth","fullWidth","required","multiline","rows","sm","select","values","InputLabelProps","shrink","margin","labelId","multiple","input","renderValue","selected","flexWrap","gap","MenuProps","PaperProps","style","maxHeight","some","primary","valueLabelDisplay","step","marks","min","max","paragraph","projectLink","_"],"sources":["/Users/hassanalsahli/Desktop/Themis/themis-client-final/src/pages/GoalsPage.tsx"],"sourcesContent":["import React, { useState, useEffect, ReactNode, ChangeEvent, MouseEvent } from 'react';\nimport {\n  Typography,\n  Paper,\n  Button,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  MenuItem,\n  IconButton,\n  Box,\n  Chip,\n  LinearProgress,\n  Slider,\n  Tabs,\n  Tab,\n  FormControlLabel,\n  Switch,\n  Select,\n  FormControl,\n  InputLabel,\n  ListItemText,\n  Checkbox,\n  OutlinedInput,\n  SelectChangeEvent\n} from '@mui/material';\nimport { Add as AddIcon, Edit as EditIcon, Delete as DeleteIcon, Link as LinkIcon } from '@mui/icons-material';\nimport { GridContainer, GridItem } from '../components/common/MuiGridWrapper';\nimport { useTranslation } from 'react-i18next';\nimport api from '../services/api';\n\n// Enums used in this component\nenum GoalType {\n  STRATEGIC = 'STRATEGIC',\n  ANNUAL = 'ANNUAL',\n  QUARTERLY = 'QUARTERLY',\n  MONTHLY = 'MONTHLY'\n}\n\nenum GoalCategory {\n  PERFORMANCE = 'PERFORMANCE',\n  FINANCIAL = 'FINANCIAL',\n  CUSTOMER = 'CUSTOMER',\n  LEARNING = 'LEARNING',\n  PROCESS = 'PROCESS'\n}\n\nenum GoalStatus {\n  NOT_STARTED = 'NOT_STARTED',\n  IN_PROGRESS = 'IN_PROGRESS',\n  COMPLETED = 'COMPLETED',\n  ON_HOLD = 'ON_HOLD'\n}\n\n// Local interfaces\ninterface GoalInterface {\n  id: string;\n  title: string;\n  description: string;\n  type: GoalType;\n  category: GoalCategory;\n  status: GoalStatus;\n  progress: number;\n  startDate: string;\n  endDate: string;\n  assignedTo: string;\n  linkedProjects: ProjectWeight[];\n  isProgressAutoCalculated: boolean;\n  createdAt: string;\n  updatedAt: string;\n}\n\ninterface ProjectWeight {\n  projectId: string;\n  weight: number; // Weight as a percentage (0-100)\n}\n\ninterface Project {\n  id: string;\n  name: string;\n  status: string;\n  progress: number;\n}\n\n// Export the initial goals for use in other components\nexport const initialStrategicGoals = [\n  {\n    id: '1',\n    title: 'Improve Project Completion Rate',\n    description: 'Increase on-time project completion rate by 15%',\n    type: GoalType.STRATEGIC,\n    category: GoalCategory.PERFORMANCE,\n    status: GoalStatus.IN_PROGRESS,\n    progress: 65,\n    startDate: '2023-01-01',\n    endDate: '2025-12-31',\n    assignedTo: 'Department A',\n    linkedProjects: [\n      { projectId: 'p1', weight: 60 },\n      { projectId: 'p4', weight: 40 }\n    ],\n    isProgressAutoCalculated: true,\n    createdAt: '2023-01-01',\n    updatedAt: '2023-01-01'\n  },\n  {\n    id: '2',\n    title: 'Reduce Project Costs',\n    description: 'Reduce average project costs by 10%',\n    type: GoalType.STRATEGIC,\n    category: GoalCategory.FINANCIAL,\n    status: GoalStatus.NOT_STARTED,\n    progress: 0,\n    startDate: '2023-02-15',\n    endDate: '2025-11-30',\n    assignedTo: 'Department B',\n    linkedProjects: [],\n    isProgressAutoCalculated: false,\n    createdAt: '2023-02-15',\n    updatedAt: '2023-02-15'\n  },\n];\n\n// Export the initial annual goals\nexport const initialAnnualGoals = [\n  {\n    id: '3',\n    title: 'Client Satisfaction',\n    description: 'Achieve 90% positive client feedback',\n    type: GoalType.ANNUAL,\n    category: GoalCategory.CUSTOMER,\n    status: GoalStatus.COMPLETED,\n    progress: 100,\n    startDate: '2023-01-15',\n    endDate: '2023-12-31',\n    assignedTo: 'All Departments',\n    linkedProjects: [\n      { projectId: 'p2', weight: 50 },\n      { projectId: 'p3', weight: 50 }\n    ],\n    isProgressAutoCalculated: true,\n    createdAt: '2023-01-15',\n    updatedAt: '2023-12-15'\n  },\n  {\n    id: '4',\n    title: 'Staff Training',\n    description: 'Complete required training for all staff members',\n    type: GoalType.ANNUAL,\n    category: GoalCategory.LEARNING,\n    status: GoalStatus.IN_PROGRESS,\n    progress: 75,\n    startDate: '2023-01-01',\n    endDate: '2023-12-31',\n    assignedTo: 'HR Department',\n    linkedProjects: [],\n    isProgressAutoCalculated: false,\n    createdAt: '2023-01-01',\n    updatedAt: '2023-10-01'\n  },\n];\n\n// Tab panel component\ninterface TabPanelProps {\n  children?: ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`goals-tabpanel-${index}`}\n      aria-labelledby={`goals-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box sx={{ pt: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\nfunction a11yProps(index: number) {\n  return {\n    id: `goals-tab-${index}`,\n    'aria-controls': `goals-tabpanel-${index}`,\n  };\n}\n\nconst GoalsPage: React.FC = () => {\n  const { t } = useTranslation();\n  const [tabValue, setTabValue] = useState(0);\n  const [strategicGoals, setStrategicGoals] = useState<GoalInterface[]>(initialStrategicGoals);\n  const [annualGoals, setAnnualGoals] = useState<GoalInterface[]>(initialAnnualGoals);\n  const [openDialog, setOpenDialog] = useState(false);\n  const [currentGoal, setCurrentGoal] = useState<GoalInterface | null>(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const [projects, setProjects] = useState<Project[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [projectWeights, setProjectWeights] = useState<{ [key: string]: number }>({});\n\n  // Fetch projects when component mounts\n  useEffect(() => {\n    const fetchProjects = async () => {\n      setLoading(true);\n      try {\n        const response = await api.projects.getAllProjects('');\n        if (response.success) {\n          setProjects(response.data);\n        }\n      } catch (error) {\n        console.error('Error fetching projects:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchProjects();\n  }, []);\n\n  // Calculate a goal's progress based on the progress of its linked projects\n  const calculateGoalProgressFromProjects = (linkedProjectWeights: ProjectWeight[]): number => {\n    if (linkedProjectWeights.length === 0) return 0;\n    \n    let weightedProgress = 0;\n    let totalWeight = 0;\n    \n    linkedProjectWeights.forEach(projectWeight => {\n      const project = projects.find(p => p.id === projectWeight.projectId);\n      if (project) {\n        weightedProgress += (project.progress * projectWeight.weight);\n        totalWeight += projectWeight.weight;\n      }\n    });\n    \n    // Return weighted average, or 0 if no valid projects were found\n    return totalWeight > 0 ? Math.round(weightedProgress / totalWeight) : 0;\n  };\n\n  const handleTabChange = (_event: React.SyntheticEvent, newValue: number) => {\n    setTabValue(newValue);\n  };\n\n  const handleOpenDialog = (goal: GoalInterface | null = null, editing = false) => {\n    setIsEditing(editing);\n    \n    if (goal) {\n      setCurrentGoal(goal);\n      \n      // Initialize project weights from existing linked projects\n      const weights: { [key: string]: number } = {};\n      goal.linkedProjects.forEach(link => {\n        weights[link.projectId] = link.weight;\n      });\n      setProjectWeights(weights);\n    } else {\n      // Create a new goal with default values\n      setCurrentGoal({\n        id: Date.now().toString(),\n        title: '',\n        description: '',\n        type: tabValue === 0 ? GoalType.STRATEGIC : GoalType.ANNUAL,\n        category: GoalCategory.PERFORMANCE,\n        status: GoalStatus.NOT_STARTED,\n        progress: 0,\n        startDate: new Date().toISOString().split('T')[0],\n        endDate: new Date(new Date().setFullYear(new Date().getFullYear() + 1)).toISOString().split('T')[0],\n        assignedTo: '',\n        linkedProjects: [],\n        isProgressAutoCalculated: false,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString()\n      });\n      setProjectWeights({});\n    }\n    \n    setOpenDialog(true);\n  };\n\n  const handleCloseDialog = () => {\n    setOpenDialog(false);\n    setCurrentGoal(null);\n    setIsEditing(false);\n    setProjectWeights({});\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    setCurrentGoal(prevGoal => prevGoal ? { ...prevGoal, [name]: value } : null);\n  };\n\n  const handleSelectChange = (event: SelectChangeEvent<string>) => {\n    const { name, value } = event.target;\n    setCurrentGoal(prevGoal => {\n      if (!prevGoal) return prevGoal;\n      return { ...prevGoal, [name]: value };\n    });\n  };\n\n  const handleProgressChange = (event: Event, newValue: number | number[]) => {\n    setCurrentGoal(prevGoal => {\n      if (!prevGoal) return prevGoal;\n      return { ...prevGoal, progress: newValue as number };\n    });\n  };\n\n  const handleLinkedProjectsChange = (event: SelectChangeEvent<string[]>) => {\n    if (!currentGoal) return;\n    \n    const selectedProjectIds = event.target.value as string[];\n    \n    // Initialize weights for newly selected projects\n    const updatedWeights = { ...projectWeights };\n    \n    selectedProjectIds.forEach(projectId => {\n      // If this is a newly selected project, initialize its weight to a default value\n      if (!updatedWeights[projectId]) {\n        updatedWeights[projectId] = 100 / selectedProjectIds.length; // Default to equal weights\n      }\n    });\n    \n    // Remove weights for projects that are no longer selected\n    Object.keys(updatedWeights).forEach(projectId => {\n      if (!selectedProjectIds.includes(projectId)) {\n        delete updatedWeights[projectId];\n      }\n    });\n    \n    // Normalize weights to ensure they sum to 100%\n    normalizeWeights(updatedWeights);\n    setProjectWeights(updatedWeights);\n    \n    // Update the linked projects with new weights\n    const updatedLinkedProjects = selectedProjectIds.map(projectId => ({\n      projectId,\n      weight: updatedWeights[projectId]\n    }));\n    \n    setCurrentGoal({\n      ...currentGoal,\n      linkedProjects: updatedLinkedProjects\n    });\n  };\n\n  const handleAutoCalculateChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const isAutoCalculated = event.target.checked;\n    \n    setCurrentGoal(prevGoal => {\n      if (!prevGoal) return null;\n      \n      const updatedGoal = { ...prevGoal, isProgressAutoCalculated: isAutoCalculated };\n      \n      // If enabling auto-calculation, update the progress based on linked projects\n      if (isAutoCalculated) {\n        updatedGoal.progress = calculateGoalProgressFromProjects(prevGoal.linkedProjects.map(p => p));\n      }\n      \n      return updatedGoal;\n    });\n  };\n\n  const handleWeightChange = (projectId: string, newWeight: number) => {\n    if (!currentGoal) return;\n    \n    const updatedWeights = { ...projectWeights };\n    updatedWeights[projectId] = newWeight;\n    \n    // Ensure weights sum to 100%\n    normalizeWeights(updatedWeights);\n    setProjectWeights(updatedWeights);\n    \n    // Update linked projects with new weights\n    const updatedLinkedProjects = currentGoal.linkedProjects.map(project => \n      project.projectId === projectId \n        ? { ...project, weight: newWeight }\n        : { ...project, weight: updatedWeights[project.projectId] }\n    );\n    \n    setCurrentGoal({\n      ...currentGoal,\n      linkedProjects: updatedLinkedProjects\n    });\n  };\n\n  const handleSubmit = (event: React.FormEvent) => {\n    event.preventDefault();\n    if (!currentGoal) return;\n    \n    // Ensure project weights are properly set before saving\n    const finalLinkedProjects = currentGoal.linkedProjects.map(project => ({\n      projectId: project.projectId,\n      weight: projectWeights[project.projectId] || 0\n    }));\n    \n    const finalGoal = {\n      ...currentGoal,\n      linkedProjects: finalLinkedProjects,\n      updatedAt: new Date().toISOString()\n    };\n    \n    // Save the goal\n    if (isEditing) {\n      // Update existing goal\n      if (currentGoal.type === GoalType.STRATEGIC) {\n        setStrategicGoals(prevGoals =>\n          prevGoals.map(goal => goal.id === currentGoal.id ? finalGoal : goal)\n        );\n      } else {\n        setAnnualGoals(prevGoals =>\n          prevGoals.map(goal => goal.id === currentGoal.id ? finalGoal : goal)\n        );\n      }\n    } else {\n      // Add new goal\n      if (finalGoal.type === GoalType.STRATEGIC) {\n        setStrategicGoals(prevGoals => [...prevGoals, finalGoal]);\n      } else {\n        setAnnualGoals(prevGoals => [...prevGoals, finalGoal]);\n      }\n    }\n    \n    setOpenDialog(false);\n    setCurrentGoal(null);\n    setProjectWeights({});\n  };\n\n  const handleDeleteGoal = (id: string) => {\n    if (tabValue === 0) {\n      setStrategicGoals(strategicGoals.filter(goal => goal.id !== id));\n    } else {\n      setAnnualGoals(annualGoals.filter(goal => goal.id !== id));\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case GoalStatus.NOT_STARTED:\n        return 'default';\n      case GoalStatus.IN_PROGRESS:\n        return 'primary';\n      case GoalStatus.COMPLETED:\n        return 'success';\n      case GoalStatus.ON_HOLD:\n        return 'warning';\n      default:\n        return 'default';\n    }\n  };\n\n  const getTranslatedStatus = (status: string): string => {\n    switch (status) {\n      case GoalStatus.NOT_STARTED: return t('goals.notStarted');\n      case GoalStatus.IN_PROGRESS: return t('status.inProgress');\n      case GoalStatus.COMPLETED: return t('status.completed');\n      case GoalStatus.ON_HOLD: return t('status.onHold');\n      default: return status;\n    }\n  };\n\n  const getTranslatedCategory = (category: string): string => {\n    switch (category) {\n      case GoalCategory.PERFORMANCE: return t('goals.performance');\n      case GoalCategory.FINANCIAL: return t('goals.financial');\n      case GoalCategory.CUSTOMER: return t('goals.customer');\n      case GoalCategory.LEARNING: return t('goals.learning');\n      case GoalCategory.PROCESS: return t('goals.process');\n      default: return category;\n    }\n  };\n\n  const renderGoalCards = (goals: GoalInterface[]) => (\n    <GridContainer spacing={3}>\n      {goals.map(goal => (\n        <GridItem key={goal.id} xs={12} md={6} lg={4}>\n          <Paper \n            elevation={2} \n            sx={{ \n              p: 2, \n              height: '100%', \n              display: 'flex', \n              flexDirection: 'column',\n              position: 'relative'\n            }}\n          >\n            <Box sx={{ \n              position: 'absolute', \n              top: 10, \n              right: 10,\n              display: 'flex'\n            }}>\n              <IconButton \n                size=\"small\" \n                onClick={() => handleOpenDialog(goal, true)}\n                sx={{ mr: 1 }}\n              >\n                <EditIcon fontSize=\"small\" />\n              </IconButton>\n              <IconButton \n                size=\"small\" \n                onClick={() => handleDeleteGoal(goal.id)}\n              >\n                <DeleteIcon fontSize=\"small\" />\n              </IconButton>\n            </Box>\n            \n            <Typography variant=\"h6\" gutterBottom>\n              {goal.title}\n            </Typography>\n\n            <Typography \n              variant=\"body2\" \n              color=\"text.secondary\" \n              sx={{ mb: 2, minHeight: '40px' }}\n            >\n              {goal.description}\n            </Typography>\n            \n            <Box sx={{ mb: 2 }}>\n              <Chip \n                label={getTranslatedStatus(goal.status)} \n                size=\"small\" \n                sx={{ mr: 1, mb: 1 }}\n                color={getStatusColor(goal.status)}\n              />\n              <Chip \n                label={getTranslatedCategory(goal.category)} \n                size=\"small\"\n                sx={{ mb: 1 }}\n                variant=\"outlined\"\n              />\n            </Box>\n            \n            <Box sx={{ mb: 1 }}>\n              <Typography variant=\"body2\" display=\"flex\" alignItems=\"center\">\n                <Box component=\"span\" sx={{ width: '50%', fontWeight: 'bold', mr: 1 }}>\n                  {t('goals.progress')}:\n                </Box>\n                <Box component=\"span\" sx={{ width: '50%' }}>\n                  {goal.progress}%\n                </Box>\n              </Typography>\n              <LinearProgress \n                variant=\"determinate\" \n                value={goal.progress} \n                sx={{ mt: 1, mb: 1 }}\n              />\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                <FormControlLabel\n                  control={<Checkbox checked={goal.isProgressAutoCalculated} size=\"small\" disabled />}\n                  label={t('goals.autoCalculated')}\n                  sx={{ '& .MuiFormControlLabel-label': { fontSize: '0.75rem' } }}\n                />\n              </Typography>\n            </Box>\n            \n            <Box sx={{ mb: 1 }}>\n              <Typography variant=\"body2\" sx={{ fontWeight: 'bold' }}>\n                {t('timeline')}:\n              </Typography>\n              <Typography variant=\"body2\">\n                {new Date(goal.startDate).toLocaleDateString()} - {new Date(goal.endDate).toLocaleDateString()}\n              </Typography>\n            </Box>\n            \n            <Box sx={{ mt: 'auto', pt: 1 }}>\n              <Typography variant=\"body2\">\n                {t('goals.assignedTo')}: {goal.assignedTo}\n              </Typography>\n            </Box>\n            \n            {goal.linkedProjects.length > 0 && (\n              <Box sx={{ mt: 2 }}>\n                <Typography variant=\"body2\" sx={{ fontWeight: 'bold', mb: 1 }}>\n                  {t('goals.linkedProjects')}:\n                </Typography>\n                {goal.linkedProjects.map((projectWeight) => {\n                  const project = projects.find(p => p.id === projectWeight.projectId);\n                  return (\n                    <Box key={projectWeight.projectId} sx={{ \n                      display: 'flex', \n                      alignItems: 'center',\n                      justifyContent: 'space-between',\n                      mb: 0.5 \n                    }}>\n                      <Chip\n                        icon={<LinkIcon fontSize=\"small\" />}\n                        label={project ? project.name : projectWeight.projectId}\n                        size=\"small\"\n                        variant=\"outlined\"\n                        sx={{ mr: 1 }}\n                      />\n                      <Typography variant=\"caption\" sx={{ fontWeight: 'medium' }}>\n                        {projectWeight.weight}%\n                      </Typography>\n                    </Box>\n                  );\n                })}\n              </Box>\n            )}\n          </Paper>\n        </GridItem>\n      ))}\n    </GridContainer>\n  );\n\n  // Function to normalize weights to sum to 100%\n  const normalizeWeights = (weights: { [key: string]: number }) => {\n    const projectIds = Object.keys(weights);\n    if (projectIds.length === 0) return;\n    \n    // Calculate the total of all weights\n    const total = projectIds.reduce((sum, id) => sum + weights[id], 0);\n    \n    // If the total is not 100, normalize\n    if (total !== 100 && total !== 0) {\n      projectIds.forEach(id => {\n        weights[id] = Math.round((weights[id] / total) * 100);\n      });\n      \n      // Handle any rounding errors to ensure the sum is exactly 100\n      const newTotal = projectIds.reduce((sum, id) => sum + weights[id], 0);\n      if (newTotal !== 100) {\n        weights[projectIds[0]] += (100 - newTotal);\n      }\n    }\n  };\n\n  return (\n    <Box sx={{ p: 3 }}>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 3, alignItems: 'center' }}>\n        <Typography variant=\"h4\">{t('navigation.goals')}</Typography>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          startIcon={<AddIcon />}\n          onClick={() => handleOpenDialog()}\n        >\n          {t('goals.add')}\n        </Button>\n      </Box>\n\n      <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n        <Tabs value={tabValue} onChange={handleTabChange} aria-label=\"goal types\">\n          <Tab label={t('goals.strategic')} {...a11yProps(0)} />\n          <Tab label={t('goals.annual')} {...a11yProps(1)} />\n        </Tabs>\n      </Box>\n      \n      <TabPanel value={tabValue} index={0}>\n        {renderGoalCards(strategicGoals)}\n      </TabPanel>\n      \n      <TabPanel value={tabValue} index={1}>\n        {renderGoalCards(annualGoals)}\n      </TabPanel>\n\n      {/* Goal Edit/Create Dialog */}\n      <Dialog open={openDialog} onClose={handleCloseDialog} maxWidth=\"md\" fullWidth>\n        <DialogTitle>\n          {isEditing \n            ? t('goals.edit')\n            : `${t('goals.addNew')} ${tabValue === 0 ? t('goals.strategic') : t('goals.annual')} ${t('goals.goal')}`}\n        </DialogTitle>\n        <DialogContent>\n          <GridContainer spacing={2} sx={{ mt: 1 }}>\n            <GridItem xs={12}>\n              <TextField\n                label={t('goals.title')}\n                name=\"title\"\n                value={currentGoal?.title || ''}\n                onChange={handleChange}\n                fullWidth\n                required\n              />\n            </GridItem>\n            \n            <GridItem xs={12}>\n              <TextField\n                label={t('common.description')}\n                name=\"description\"\n                value={currentGoal?.description || ''}\n                onChange={handleChange}\n                fullWidth\n                multiline\n                rows={3}\n              />\n            </GridItem>\n            \n            <GridItem xs={12} sm={6}>\n              <TextField\n                select\n                label={t('goals.category')}\n                name=\"category\"\n                value={currentGoal?.category || GoalCategory.PERFORMANCE}\n                onChange={handleSelectChange as any}\n                fullWidth\n              >\n                {Object.values(GoalCategory).map((category) => (\n                  <MenuItem key={category} value={category}>\n                    {getTranslatedCategory(category as string)}\n                  </MenuItem>\n                ))}\n              </TextField>\n            </GridItem>\n            \n            <GridItem xs={12} sm={6}>\n              <TextField\n                select\n                label={t('status.status')}\n                name=\"status\"\n                value={currentGoal?.status || GoalStatus.NOT_STARTED}\n                onChange={handleSelectChange as any}\n                fullWidth\n              >\n                {Object.values(GoalStatus).map((status) => (\n                  <MenuItem key={status} value={status}>\n                    {getTranslatedStatus(status as string)}\n                  </MenuItem>\n                ))}\n              </TextField>\n            </GridItem>\n            \n            <GridItem xs={12} sm={6}>\n              <TextField\n                label={t('common.startDate')}\n                name=\"startDate\"\n                type=\"date\"\n                value={currentGoal?.startDate || ''}\n                onChange={handleChange}\n                fullWidth\n                InputLabelProps={{ shrink: true }}\n              />\n            </GridItem>\n            \n            <GridItem xs={12} sm={6}>\n              <TextField\n                label={t('common.endDate')}\n                name=\"endDate\"\n                type=\"date\"\n                value={currentGoal?.endDate || ''}\n                onChange={handleChange}\n                fullWidth\n                InputLabelProps={{ shrink: true }}\n              />\n            </GridItem>\n            \n            <GridItem xs={12}>\n              <TextField\n                label={t('goals.assignedTo')}\n                name=\"assignedTo\"\n                value={currentGoal?.assignedTo || ''}\n                onChange={handleChange}\n                fullWidth\n              />\n            </GridItem>\n            \n            <GridItem xs={12}>\n              <FormControl fullWidth margin=\"normal\">\n                <InputLabel id=\"linked-projects-label\">{t('goals.linkedProjects')}</InputLabel>\n                <Select\n                  labelId=\"linked-projects-label\"\n                  multiple\n                  value={currentGoal?.linkedProjects.map(p => p.projectId) || []}\n                  onChange={handleLinkedProjectsChange}\n                  input={<OutlinedInput label={t('goals.linkedProjects')} />}\n                  renderValue={(selected) => (\n                    <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\n                      {selected.map((value) => {\n                        const project = projects.find(p => p.id === value);\n                        return (\n                          <Chip \n                            key={value} \n                            label={project ? project.name : value} \n                            size=\"small\" \n                          />\n                        );\n                      })}\n                    </Box>\n                  )}\n                  MenuProps={{\n                    PaperProps: {\n                      style: {\n                        maxHeight: 224,\n                        width: 250,\n                      },\n                    },\n                  }}\n                >\n                  {projects.map((project) => (\n                    <MenuItem key={project.id} value={project.id}>\n                      <Checkbox checked={currentGoal?.linkedProjects.some(p => p.projectId === project.id) || false} />\n                      <ListItemText primary={project.name} />\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n            </GridItem>\n            \n            <GridItem xs={12}>\n              <FormControlLabel\n                control={\n                  <Switch\n                    checked={currentGoal?.isProgressAutoCalculated || false}\n                    onChange={handleAutoCalculateChange}\n                    name=\"isProgressAutoCalculated\"\n                  />\n                }\n                label={t('goals.autoCalculateProgress')}\n              />\n              <Typography variant=\"caption\" color=\"text.secondary\" display=\"block\">\n                {t('goals.autoCalculateDescription')}\n              </Typography>\n            </GridItem>\n            \n            {!currentGoal?.isProgressAutoCalculated && (\n              <GridItem xs={12}>\n                <Typography id=\"progress-slider\" gutterBottom>\n                  {t('project.progress')}: {currentGoal?.progress || 0}%\n                </Typography>\n                <Slider\n                  value={currentGoal?.progress || 0}\n                  onChange={handleProgressChange}\n                  aria-labelledby=\"progress-slider\"\n                  valueLabelDisplay=\"auto\"\n                  step={5}\n                  marks\n                  min={0}\n                  max={100}\n                />\n              </GridItem>\n            )}\n            \n            {/* Project Weights Section */}\n            {currentGoal?.linkedProjects?.length > 0 && (\n              <Box sx={{ mt: 2 }}>\n                <Typography variant=\"subtitle2\" gutterBottom>\n                  {t('Project Weights')}\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\" paragraph>\n                  {t('Adjust the weight of each project\\'s contribution to this goal. Weights will automatically balance to 100%.')}\n                </Typography>\n                \n                {currentGoal?.linkedProjects?.map((projectLink) => {\n                  const project = projects.find(p => p.id === projectLink.projectId);\n                  return (\n                    <Box key={projectLink.projectId} sx={{ mb: 2 }}>\n                      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                        <Typography variant=\"body2\">\n                          {project ? project.name : projectLink.projectId}\n                        </Typography>\n                        <Typography variant=\"body2\" fontWeight=\"medium\">\n                          {projectWeights[projectLink.projectId] || projectLink.weight}%\n                        </Typography>\n                      </Box>\n                      <Slider\n                        value={projectWeights[projectLink.projectId] || projectLink.weight}\n                        onChange={(_, newValue) => handleWeightChange(projectLink.projectId, newValue as number)}\n                        aria-labelledby=\"project-weight-slider\"\n                        valueLabelDisplay=\"auto\"\n                        step={5}\n                        marks\n                        min={5}\n                        max={100}\n                      />\n                    </Box>\n                  );\n                })}\n              </Box>\n            )}\n          </GridContainer>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseDialog}>{t('common.cancel')}</Button>\n          <Button onClick={handleSubmit} variant=\"contained\" color=\"primary\">\n            {isEditing ? t('common.update') : t('common.create')}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n\nexport default GoalsPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}