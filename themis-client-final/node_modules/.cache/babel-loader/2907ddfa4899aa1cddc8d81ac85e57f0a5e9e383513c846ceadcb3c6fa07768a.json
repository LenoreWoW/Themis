{"ast":null,"code":"import React,{useState,useEffect,useMemo}from'react';import{Box,Paper,Typography,FormControl,InputLabel,Select,MenuItem,Button,Stack,Alert}from'@mui/material';import{BarChart,Bar,PieChart,Pie,LineChart,Line,AreaChart,Area,ScatterChart,Scatter,RadarChart,PolarGrid,PolarAngleAxis,PolarRadiusAxis,Radar,ComposedChart,XAxis,YAxis,CartesianGrid,Tooltip,Legend,Cell,ResponsiveContainer}from'recharts';import{useProjects}from'../../context/ProjectContext';import{ProjectStatus,UserRole,AssignmentStatus,RiskImpact,IssueStatus}from'../../types';import{useAuth}from'../../hooks/useAuth';import api from'../../services/api';import{useTranslation}from'react-i18next';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const COLORS=['#0088FE','#00C49F','#FFBB28','#FF8042','#8884D8','#82CA9D'];const AnalyticsDashboard=()=>{var _metrics$find3;const{projects}=useProjects();const{user,canViewAllProjects}=useAuth();const{t}=useTranslation();const[currentProject,setCurrentProject]=useState(null);const[risks,setRisks]=useState([]);const[issues,setIssues]=useState([]);const[assignments,setAssignments]=useState([]);const[loading,setLoading]=useState(false);const[selectedMetric,setSelectedMetric]=useState('');const[selectedChartType,setSelectedChartType]=useState('bar');const[charts,setCharts]=useState([]);const metrics=[{value:'client',label:t('analytics.projectsByClient','Number of Projects by Client'),allowedRoles:[UserRole.ADMIN,UserRole.EXECUTIVE,UserRole.MAIN_PMO]},{value:'projectManager',label:t('analytics.projectsByManager','Number of Projects by Project Manager'),allowedRoles:[UserRole.ADMIN,UserRole.EXECUTIVE,UserRole.MAIN_PMO,UserRole.DEPARTMENT_DIRECTOR]},{value:'priority',label:t('analytics.projectsByPriority','Number of Projects by Priority'),allowedRoles:Object.values(UserRole)},{value:'status',label:t('analytics.projectsByStatus','Number of Projects by Status'),allowedRoles:Object.values(UserRole)},{value:'department',label:t('analytics.projectsByDepartment','Number of Projects by Department'),allowedRoles:[UserRole.ADMIN,UserRole.EXECUTIVE,UserRole.MAIN_PMO]},{value:'delayed',label:t('analytics.delayedProjects','Number of Delayed Projects'),allowedRoles:[UserRole.ADMIN,UserRole.EXECUTIVE,UserRole.MAIN_PMO,UserRole.DEPARTMENT_DIRECTOR,UserRole.PROJECT_MANAGER]},{value:'stalled',label:t('analytics.stalledProjects','Number of Stalled Projects'),allowedRoles:[UserRole.ADMIN,UserRole.EXECUTIVE,UserRole.MAIN_PMO,UserRole.DEPARTMENT_DIRECTOR,UserRole.PROJECT_MANAGER]},{value:'inProgress',label:t('analytics.inProgressProjects','Number of Projects In Progress'),allowedRoles:[UserRole.ADMIN,UserRole.EXECUTIVE,UserRole.MAIN_PMO,UserRole.SUB_PMO,UserRole.DEPARTMENT_DIRECTOR,UserRole.PROJECT_MANAGER,UserRole.DEVELOPER]},// Budget metrics\n{value:'budgetByDepartment',label:t('analytics.budgetByDepartment','Budget Allocation by Department'),allowedRoles:[UserRole.ADMIN,UserRole.EXECUTIVE,UserRole.MAIN_PMO],description:t('analytics.budgetByDepartmentDesc','Shows how budget is distributed across departments')},{value:'budgetVsActual',label:t('analytics.budgetVsActual','Budget vs Actual Cost'),allowedRoles:[UserRole.ADMIN,UserRole.EXECUTIVE,UserRole.MAIN_PMO,UserRole.DEPARTMENT_DIRECTOR,UserRole.PROJECT_MANAGER],description:t('analytics.budgetVsActualDesc','Compares planned budget with actual expenditure')},{value:'topBudgetProjects',label:t('analytics.topBudgetProjects','Top Projects by Budget'),allowedRoles:[UserRole.ADMIN,UserRole.EXECUTIVE,UserRole.MAIN_PMO,UserRole.DEPARTMENT_DIRECTOR],description:t('analytics.topBudgetProjectsDesc','Shows projects with the highest budget allocation')},{value:'budgetUtilization',label:t('analytics.budgetUtilization','Budget Utilization Rate'),allowedRoles:[UserRole.ADMIN,UserRole.EXECUTIVE,UserRole.MAIN_PMO,UserRole.DEPARTMENT_DIRECTOR,UserRole.PROJECT_MANAGER],description:t('analytics.budgetUtilizationDesc','Shows percentage of budget utilized by projects')},// Risk metrics\n{value:'riskStatus',label:t('analytics.risksByStatus','Risks by Status'),allowedRoles:Object.values(UserRole),description:t('analytics.risksByStatusDesc','Shows the distribution of risks by their status')},{value:'riskImpact',label:t('analytics.risksByImpact','Risks by Impact Level'),allowedRoles:Object.values(UserRole),description:t('analytics.risksByImpactDesc','Shows the distribution of risks by their impact level')},{value:'highProbabilityRisks',label:t('analytics.highProbRisks','High Probability Risks'),allowedRoles:Object.values(UserRole),description:t('analytics.highProbRisksDesc','Shows risks with probability greater than 70%')},// Issue metrics\n{value:'issueStatus',label:t('analytics.issuesByStatus','Issues by Status'),allowedRoles:Object.values(UserRole),description:t('analytics.issuesByStatusDesc','Shows the distribution of issues by their status')},{value:'issuePriority',label:t('analytics.issuesByPriority','Issues by Priority'),allowedRoles:Object.values(UserRole),description:t('analytics.issuesByPriorityDesc','Shows the distribution of issues by their priority')},{value:'openIssues',label:t('analytics.openIssuesByProject','Open Issues by Project'),allowedRoles:Object.values(UserRole),description:t('analytics.openIssuesByProjectDesc','Shows the number of open issues for each project')}];// Filter projects based on user role and permissions\nconst filteredProjects=useMemo(()=>{if(canViewAllProjects||!(user!==null&&user!==void 0&&user.role))return projects;if(user.role===UserRole.DEPARTMENT_DIRECTOR&&user.department){return projects.filter(project=>project.department.id===user.department.id);}else if(user.role===UserRole.PROJECT_MANAGER){return projects.filter(project=>project.projectManager.id===user.id);}return projects;},[projects,user,canViewAllProjects]);// Fetch risks and issues data for all visible projects\nconst fetchRisksAndIssues=async()=>{try{const allRisks=[];const allIssues=[];for(const project of filteredProjects){// Fetch risks\nconst risksResponse=await api.risks.getAllRisks(project.id,'');if(risksResponse.success&&risksResponse.data){risksResponse.data.forEach(risk=>allRisks.push({...risk,projectId:project.id}));}// Fetch issues\nconst issuesResponse=await api.issues.getAllIssues(project.id,'');if(issuesResponse.success&&issuesResponse.data){issuesResponse.data.forEach(issue=>allIssues.push({...issue,projectId:project.id}));}}setRisks(allRisks);setIssues(allIssues);}catch(error){console.error('Error fetching risks and issues:',error);}};const processData=metric=>{if(!metric)return[];switch(metric){case'client':return processClientData();case'projectManager':return processProjectManagerData();case'priority':return processPriorityData();case'status':return processStatusData();case'delayed':return processDelayedData();case'department':return processDepartmentData();case'stalled':return processStalledData();case'inProgress':return processInProgressData();// Budget metrics\ncase'budgetByDepartment':return processBudgetByDepartmentData();case'budgetVsActual':return processBudgetVsActualData();case'topBudgetProjects':return processTopBudgetProjectsData();case'budgetUtilization':return processBudgetUtilizationData();// Risk metrics\ncase'riskStatus':return processRiskStatusData();case'riskImpact':return processRiskImpactData();case'highProbabilityRisks':return processHighProbabilityRisksData();// Issue metrics\ncase'issueStatus':return processIssueStatusData();case'issuePriority':return processIssuePriorityData();case'openIssues':return processOpenIssuesData();default:return[];}};const processClientData=()=>{const clientCounts=filteredProjects.reduce((acc,project)=>{const client=project.client||'Unknown';acc[client]=(acc[client]||0)+1;return acc;},{});return Object.entries(clientCounts).map(_ref=>{let[name,value]=_ref;return{name,value};});};const processProjectManagerData=()=>{const pmCounts=filteredProjects.reduce((acc,project)=>{var _project$projectManag,_project$projectManag2;const pm=((_project$projectManag=project.projectManager)===null||_project$projectManag===void 0?void 0:_project$projectManag.firstName)+' '+((_project$projectManag2=project.projectManager)===null||_project$projectManag2===void 0?void 0:_project$projectManag2.lastName)||'Unknown';acc[pm]=(acc[pm]||0)+1;return acc;},{});return Object.entries(pmCounts).map(_ref2=>{let[name,value]=_ref2;return{name,value};});};const processPriorityData=()=>{const priorityCounts=filteredProjects.reduce((acc,project)=>{const priority=project.priority||'Unknown';acc[priority]=(acc[priority]||0)+1;return acc;},{});return Object.entries(priorityCounts).map(_ref3=>{let[name,value]=_ref3;return{name,value};});};const processStatusData=()=>{const statusCounts=filteredProjects.reduce((acc,project)=>{const status=project.status||'Unknown';acc[status]=(acc[status]||0)+1;return acc;},{});return Object.entries(statusCounts).map(_ref4=>{let[name,value]=_ref4;return{name,value};});};const processDelayedData=()=>{const delayedProjects=filteredProjects.filter(project=>{const dueDate=new Date(project.endDate);const today=new Date();return dueDate<today&&project.status!==ProjectStatus.COMPLETED;});return[{name:'Delayed Projects',value:delayedProjects.length}];};const processDepartmentData=()=>{const deptCounts=filteredProjects.reduce((acc,project)=>{var _project$department;const dept=((_project$department=project.department)===null||_project$department===void 0?void 0:_project$department.name)||'Unknown';acc[dept]=(acc[dept]||0)+1;return acc;},{});return Object.entries(deptCounts).map(_ref5=>{let[name,value]=_ref5;return{name,value};});};const processStalledData=()=>{const stalledProjects=filteredProjects.filter(project=>project.status===ProjectStatus.ON_HOLD);return[{name:'Stalled Projects',value:stalledProjects.length}];};const processInProgressData=()=>{const inProgressProjects=filteredProjects.filter(project=>project.status===ProjectStatus.IN_PROGRESS);return[{name:'Projects In Progress',value:inProgressProjects.length}];};// Risk metrics processing methods\nconst processRiskStatusData=()=>{const statusCounts=risks.reduce((acc,risk)=>{const status=risk.status||'Unknown';acc[status]=(acc[status]||0)+1;return acc;},{});return Object.entries(statusCounts).map(_ref6=>{let[name,value]=_ref6;return{name,value};});};const processRiskImpactData=()=>{const impactCounts=risks.reduce((acc,risk)=>{const impact=risk.impact||'Unknown';acc[impact]=(acc[impact]||0)+1;return acc;},{});return Object.entries(impactCounts).map(_ref7=>{let[name,value]=_ref7;return{name,value};});};const processHighProbabilityRisksData=()=>{const highProbRisks=risks.filter(risk=>risk.probability&&risk.probability>70);// Group by impact level\nconst impactCounts=highProbRisks.reduce((acc,risk)=>{const impact=risk.impact||'Unknown';acc[impact]=(acc[impact]||0)+1;return acc;},{});return Object.entries(impactCounts).map(_ref8=>{let[name,value]=_ref8;return{name,value};});};// Issue metrics processing methods\nconst processIssueStatusData=()=>{const statusCounts=issues.reduce((acc,issue)=>{const status=issue.status||'Unknown';acc[status]=(acc[status]||0)+1;return acc;},{});return Object.entries(statusCounts).map(_ref9=>{let[name,value]=_ref9;return{name,value};});};const processIssuePriorityData=()=>{const priorityCounts=issues.reduce((acc,issue)=>{const priority=issue.impact||'Unknown';acc[priority]=(acc[priority]||0)+1;return acc;},{});return Object.entries(priorityCounts).map(_ref0=>{let[name,value]=_ref0;return{name,value};});};const processOpenIssuesData=()=>{const openIssues=issues.filter(issue=>issue.status===IssueStatus.OPEN);const projectCounts=openIssues.reduce((acc,issue)=>{const projectId=issue.projectId||'Unknown';acc[projectId]=(acc[projectId]||0)+1;return acc;},{});return Object.entries(projectCounts).map(_ref1=>{let[name,value]=_ref1;return{name,value};});};// Add new processing functions for budget metrics  \nconst processBudgetByDepartmentData=()=>{const departmentBudgets=filteredProjects.reduce((acc,project)=>{var _project$department2;const deptName=((_project$department2=project.department)===null||_project$department2===void 0?void 0:_project$department2.name)||'Unknown';acc[deptName]=(acc[deptName]||0)+(project.budget||0);return acc;},{});return Object.entries(departmentBudgets).map(_ref10=>{let[name,value]=_ref10;return{name,value};}).sort((a,b)=>b.value-a.value);};const processBudgetVsActualData=()=>{const totalBudget=filteredProjects.reduce((sum,project)=>sum+(project.budget||0),0);const totalActual=filteredProjects.reduce((sum,project)=>sum+(project.actualCost||0),0);return[{name:t('analytics.plannedBudget','Planned Budget'),value:totalBudget},{name:t('analytics.actualCost','Actual Cost'),value:totalActual}];};const processTopBudgetProjectsData=()=>{return filteredProjects.filter(project=>project.budget&&project.budget>0).sort((a,b)=>(b.budget||0)-(a.budget||0)).slice(0,10)// Get top 10 projects by budget\n.map(project=>({name:project.name,value:project.budget||0}));};const processBudgetUtilizationData=()=>{return filteredProjects.filter(project=>project.budget&&project.budget>0).map(project=>{const utilization=(project.actualCost||0)/(project.budget||1)*100;return{name:project.name,value:Math.min(utilization,100)// Cap at 100% for display purposes\n};}).sort((a,b)=>b.value-a.value);};useEffect(()=>{if(!selectedMetric)return;const data=processData(selectedMetric);setCharts(prevCharts=>{var _metrics$find;return[...prevCharts,{type:selectedChartType,data:data,title:((_metrics$find=metrics.find(m=>m.value===selectedMetric))===null||_metrics$find===void 0?void 0:_metrics$find.label)||''}];});},[selectedMetric,selectedChartType,filteredProjects]);const handleMetricChange=event=>{setSelectedMetric(event.target.value);};const handleChartTypeChange=event=>{setSelectedChartType(event.target.value);};const removeChart=index=>{setCharts(prevCharts=>prevCharts.filter((_,i)=>i!==index));};// Get available metrics based on user role\nconst getAvailableMetrics=()=>{if(!user||!user.role)return[];// If user is admin, return all metrics\nif(user.role===UserRole.ADMIN)return metrics;return metrics.filter(metric=>metric.allowedRoles.includes(user.role));};const availableMetrics=getAvailableMetrics();const renderChart=(config,index)=>{const{type,data,title}=config;switch(type){case'bar':return/*#__PURE__*/_jsx(Box,{sx:{width:'50%',p:1},children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2,height:'400px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:title}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(BarChart,{data:data,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"name\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"value\",fill:\"#8884d8\"})]})}),/*#__PURE__*/_jsx(Button,{onClick:()=>removeChart(index),children:t('common.remove','Remove')})]})},index);case'pie':return/*#__PURE__*/_jsx(Box,{sx:{width:'50%',p:1},children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2,height:'400px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:title}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(PieChart,{children:[/*#__PURE__*/_jsx(Pie,{data:data,cx:\"50%\",cy:\"50%\",labelLine:false,label:_ref11=>{let{name,percent}=_ref11;return`${name}: ${(percent*100).toFixed(0)}%`;},outerRadius:80,fill:\"#8884d8\",dataKey:\"value\",children:data.map((entry,index)=>/*#__PURE__*/_jsx(Cell,{fill:COLORS[index%COLORS.length]},`cell-${index}`))}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{})]})}),/*#__PURE__*/_jsx(Button,{onClick:()=>removeChart(index),children:t('common.remove','Remove')})]})},index);case'line':return/*#__PURE__*/_jsx(Box,{sx:{width:'50%',p:1},children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2,height:'400px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:title}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(LineChart,{data:data,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"name\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"value\",stroke:\"#8884d8\"})]})}),/*#__PURE__*/_jsx(Button,{onClick:()=>removeChart(index),children:t('common.remove','Remove')})]})},index);case'area':return/*#__PURE__*/_jsx(Box,{sx:{width:'50%',p:1},children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2,height:'400px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:title}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(AreaChart,{data:data,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"name\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Area,{type:\"monotone\",dataKey:\"value\",stroke:\"#8884d8\",fill:\"#8884d8\",fillOpacity:0.3})]})}),/*#__PURE__*/_jsx(Button,{onClick:()=>removeChart(index),children:t('common.remove','Remove')})]})},index);case'scatter':return/*#__PURE__*/_jsx(Box,{sx:{width:'50%',p:1},children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2,height:'400px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:title}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(ScatterChart,{children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"name\"}),/*#__PURE__*/_jsx(YAxis,{dataKey:\"value\"}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Scatter,{data:data,fill:\"#8884d8\"})]})}),/*#__PURE__*/_jsx(Button,{onClick:()=>removeChart(index),children:t('common.remove','Remove')})]})},index);case'radar':return/*#__PURE__*/_jsx(Box,{sx:{width:'50%',p:1},children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2,height:'400px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:title}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(RadarChart,{data:data,children:[/*#__PURE__*/_jsx(PolarGrid,{}),/*#__PURE__*/_jsx(PolarAngleAxis,{dataKey:\"name\"}),/*#__PURE__*/_jsx(PolarRadiusAxis,{}),/*#__PURE__*/_jsx(Radar,{dataKey:\"value\",stroke:\"#8884d8\",fill:\"#8884d8\",fillOpacity:0.6}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{})]})}),/*#__PURE__*/_jsx(Button,{onClick:()=>removeChart(index),children:t('common.remove','Remove')})]})},index);case'composed':return/*#__PURE__*/_jsx(Box,{sx:{width:'50%',p:1},children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2,height:'400px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:title}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(ComposedChart,{data:data,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"name\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"value\",fill:\"#8884d8\"}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"value\",stroke:\"#ff7300\"})]})}),/*#__PURE__*/_jsx(Button,{onClick:()=>removeChart(index),children:t('common.remove','Remove')})]})},index);default:return null;}};return/*#__PURE__*/_jsxs(Box,{sx:{p:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:t('analytics.title','Project Analytics Dashboard')}),availableMetrics.length===0?/*#__PURE__*/_jsx(Alert,{severity:\"info\",children:t('analytics.noAccess','You don\\'t have access to any analytics data. Please contact your administrator for access.')}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Paper,{sx:{p:2,mb:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:t('dashboard.kpi')}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexWrap:'wrap',gap:3},children:[/*#__PURE__*/_jsx(Box,{sx:{flex:'1 1 calc(25% - 24px)',minWidth:{xs:'100%',sm:'calc(50% - 24px)',md:'calc(25% - 24px)'}},children:/*#__PURE__*/_jsxs(Paper,{elevation:2,sx:{p:2,textAlign:'center',backgroundColor:'#f5f5f5'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"textSecondary\",children:t('dashboard.totalProjects')}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:filteredProjects.length})]})}),/*#__PURE__*/_jsx(Box,{sx:{flex:'1 1 calc(25% - 24px)',minWidth:{xs:'100%',sm:'calc(50% - 24px)',md:'calc(25% - 24px)'}},children:/*#__PURE__*/_jsxs(Paper,{elevation:2,sx:{p:2,textAlign:'center',backgroundColor:'#f5f5f5'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"textSecondary\",children:t('dashboard.inProgress')}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:filteredProjects.filter(p=>p.status===ProjectStatus.IN_PROGRESS).length})]})}),/*#__PURE__*/_jsx(Box,{sx:{flex:'1 1 calc(25% - 24px)',minWidth:{xs:'100%',sm:'calc(50% - 24px)',md:'calc(25% - 24px)'}},children:/*#__PURE__*/_jsxs(Paper,{elevation:2,sx:{p:2,textAlign:'center',backgroundColor:'#f5f5f5'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"textSecondary\",children:t('analytics.overdueAssignments','Overdue Assignments')}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:assignments.filter(a=>{const dueDate=new Date(a.dueDate);return dueDate<new Date()&&a.status!==AssignmentStatus.COMPLETED;}).length})]})}),/*#__PURE__*/_jsx(Box,{sx:{flex:'1 1 calc(25% - 24px)',minWidth:{xs:'100%',sm:'calc(50% - 24px)',md:'calc(25% - 24px)'}},children:/*#__PURE__*/_jsxs(Paper,{elevation:2,sx:{p:2,textAlign:'center',backgroundColor:'#f5f5f5'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"textSecondary\",children:t('analytics.highPriorityRisks','High Priority Risks')}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:risks.filter(r=>r.impact===RiskImpact.HIGH||r.impact===RiskImpact.CRITICAL).length})]})})]})]}),/*#__PURE__*/_jsxs(Paper,{sx:{p:2,mb:3},children:[/*#__PURE__*/_jsxs(Stack,{direction:{xs:'column',sm:'row'},spacing:2,alignItems:{xs:'stretch',sm:'center'},children:[/*#__PURE__*/_jsxs(FormControl,{sx:{minWidth:200,flex:1},children:[/*#__PURE__*/_jsx(InputLabel,{children:t('analytics.selectMetric','Select Metric')}),/*#__PURE__*/_jsx(Select,{value:selectedMetric,onChange:handleMetricChange,label:t('analytics.selectMetric','Select Metric'),children:availableMetrics.map(metric=>/*#__PURE__*/_jsx(MenuItem,{value:metric.value,title:metric.description,children:metric.label},metric.value))})]}),/*#__PURE__*/_jsxs(FormControl,{sx:{minWidth:150,flex:1},children:[/*#__PURE__*/_jsx(InputLabel,{children:t('analytics.chartType','Chart Type')}),/*#__PURE__*/_jsxs(Select,{value:selectedChartType,onChange:handleChartTypeChange,label:t('analytics.chartType','Chart Type'),children:[/*#__PURE__*/_jsx(MenuItem,{value:\"bar\",children:t('analytics.barChart','Bar Chart')}),/*#__PURE__*/_jsx(MenuItem,{value:\"pie\",children:t('analytics.pieChart','Pie Chart')}),/*#__PURE__*/_jsx(MenuItem,{value:\"line\",children:t('analytics.lineChart','Line Chart')}),/*#__PURE__*/_jsx(MenuItem,{value:\"area\",children:t('analytics.areaChart','Area Chart')}),/*#__PURE__*/_jsx(MenuItem,{value:\"scatter\",children:t('analytics.scatterPlot','Scatter Plot')}),/*#__PURE__*/_jsx(MenuItem,{value:\"radar\",children:t('analytics.radarChart','Radar Chart')}),/*#__PURE__*/_jsx(MenuItem,{value:\"composed\",children:t('analytics.composedChart','Composed Chart')})]})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:()=>{if(!selectedMetric)return;setCharts(prevCharts=>{var _metrics$find2;return[...prevCharts,{type:selectedChartType,data:processData(selectedMetric),title:((_metrics$find2=metrics.find(m=>m.value===selectedMetric))===null||_metrics$find2===void 0?void 0:_metrics$find2.label)||''}];});},disabled:!selectedMetric||!selectedChartType,sx:{minWidth:120},children:t('analytics.addChart','Add Chart')})]}),selectedMetric&&/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mt:1,fontStyle:'italic'},children:((_metrics$find3=metrics.find(m=>m.value===selectedMetric))===null||_metrics$find3===void 0?void 0:_metrics$find3.description)||''})]}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',mt:3},children:charts.map((config,index)=>renderChart(config,index))}),charts.length===0&&/*#__PURE__*/_jsx(Box,{sx:{textAlign:'center',py:5},children:/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"text.secondary\",children:t('analytics.emptyState','Select a metric and chart type from above, then click \"Add Chart\" to build your custom dashboard')})})]})]});};export default AnalyticsDashboard;","map":{"version":3,"names":["React","useState","useEffect","useMemo","Box","Paper","Typography","FormControl","InputLabel","Select","MenuItem","Button","Stack","Alert","BarChart","Bar","PieChart","Pie","LineChart","Line","AreaChart","Area","ScatterChart","Scatter","RadarChart","PolarGrid","PolarAngleAxis","PolarRadiusAxis","Radar","ComposedChart","XAxis","YAxis","CartesianGrid","Tooltip","Legend","Cell","ResponsiveContainer","useProjects","ProjectStatus","UserRole","AssignmentStatus","RiskImpact","IssueStatus","useAuth","api","useTranslation","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","COLORS","AnalyticsDashboard","_metrics$find3","projects","user","canViewAllProjects","t","currentProject","setCurrentProject","risks","setRisks","issues","setIssues","assignments","setAssignments","loading","setLoading","selectedMetric","setSelectedMetric","selectedChartType","setSelectedChartType","charts","setCharts","metrics","value","label","allowedRoles","ADMIN","EXECUTIVE","MAIN_PMO","DEPARTMENT_DIRECTOR","Object","values","PROJECT_MANAGER","SUB_PMO","DEVELOPER","description","filteredProjects","role","department","filter","project","id","projectManager","fetchRisksAndIssues","allRisks","allIssues","risksResponse","getAllRisks","success","data","forEach","risk","push","projectId","issuesResponse","getAllIssues","issue","error","console","processData","metric","processClientData","processProjectManagerData","processPriorityData","processStatusData","processDelayedData","processDepartmentData","processStalledData","processInProgressData","processBudgetByDepartmentData","processBudgetVsActualData","processTopBudgetProjectsData","processBudgetUtilizationData","processRiskStatusData","processRiskImpactData","processHighProbabilityRisksData","processIssueStatusData","processIssuePriorityData","processOpenIssuesData","clientCounts","reduce","acc","client","entries","map","_ref","name","pmCounts","_project$projectManag","_project$projectManag2","pm","firstName","lastName","_ref2","priorityCounts","priority","_ref3","statusCounts","status","_ref4","delayedProjects","dueDate","Date","endDate","today","COMPLETED","length","deptCounts","_project$department","dept","_ref5","stalledProjects","ON_HOLD","inProgressProjects","IN_PROGRESS","_ref6","impactCounts","impact","_ref7","highProbRisks","probability","_ref8","_ref9","_ref0","openIssues","OPEN","projectCounts","_ref1","departmentBudgets","_project$department2","deptName","budget","_ref10","sort","a","b","totalBudget","sum","totalActual","actualCost","slice","utilization","Math","min","prevCharts","_metrics$find","type","title","find","m","handleMetricChange","event","target","handleChartTypeChange","removeChart","index","_","i","getAvailableMetrics","includes","availableMetrics","renderChart","config","sx","width","p","children","height","variant","gutterBottom","strokeDasharray","dataKey","fill","onClick","cx","cy","labelLine","_ref11","percent","toFixed","outerRadius","entry","stroke","fillOpacity","severity","mb","display","flexWrap","gap","flex","minWidth","xs","sm","md","elevation","textAlign","backgroundColor","color","r","HIGH","CRITICAL","direction","spacing","alignItems","onChange","_metrics$find2","disabled","mt","fontStyle","py"],"sources":["/Users/hassanalsahli/Desktop/Themis/themis-client-final/src/components/Analytics/AnalyticsDashboard.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport {\n  Box,\n  Paper,\n  Typography,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  SelectChangeEvent,\n  Button,\n  Stack,\n  Alert,\n} from '@mui/material';\nimport {\n  BarChart,\n  Bar,\n  PieChart,\n  Pie,\n  LineChart,\n  Line,\n  AreaChart,\n  Area,\n  ScatterChart,\n  Scatter,\n  RadarChart,\n  PolarGrid,\n  PolarAngleAxis,\n  PolarRadiusAxis,\n  Radar,\n  ComposedChart,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  Cell,\n  ResponsiveContainer,\n} from 'recharts';\nimport { useProjects } from '../../context/ProjectContext';\nimport { Project, ProjectStatus, ProjectPriority, UserRole, AssignmentStatus, RiskStatus, RiskImpact, IssueStatus, Risk, Issue } from '../../types';\nimport { useAuth } from '../../hooks/useAuth';\nimport api from '../../services/api';\nimport { useTranslation } from 'react-i18next';\n\ninterface ChartData {\n  name: string;\n  value: number;\n}\n\ninterface ChartConfig {\n  type: 'bar' | 'pie' | 'line' | 'area' | 'scatter' | 'radar' | 'composed';\n  data: ChartData[];\n  title: string;\n}\n\ninterface MetricOption {\n  value: string;\n  label: string;\n  allowedRoles: UserRole[];\n  description?: string;\n}\n\nconst COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#8884D8', '#82CA9D'];\n\nconst AnalyticsDashboard: React.FC = () => {\n  const { projects } = useProjects();\n  const { user, canViewAllProjects } = useAuth();\n  const { t } = useTranslation();\n  const [currentProject, setCurrentProject] = useState<Project | null>(null);\n  const [risks, setRisks] = useState<Risk[]>([]);\n  const [issues, setIssues] = useState<Issue[]>([]);\n  const [assignments, setAssignments] = useState<any[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [selectedMetric, setSelectedMetric] = useState<string>('');\n  const [selectedChartType, setSelectedChartType] = useState<ChartConfig['type']>('bar');\n  const [charts, setCharts] = useState<ChartConfig[]>([]);\n\n  const metrics: MetricOption[] = [\n    { value: 'client', label: t('analytics.projectsByClient', 'Number of Projects by Client'), allowedRoles: [UserRole.ADMIN, UserRole.EXECUTIVE, UserRole.MAIN_PMO] },\n    { value: 'projectManager', label: t('analytics.projectsByManager', 'Number of Projects by Project Manager'), allowedRoles: [UserRole.ADMIN, UserRole.EXECUTIVE, UserRole.MAIN_PMO, UserRole.DEPARTMENT_DIRECTOR] },\n    { value: 'priority', label: t('analytics.projectsByPriority', 'Number of Projects by Priority'), allowedRoles: Object.values(UserRole) },\n    { value: 'status', label: t('analytics.projectsByStatus', 'Number of Projects by Status'), allowedRoles: Object.values(UserRole) },\n    { value: 'department', label: t('analytics.projectsByDepartment', 'Number of Projects by Department'), allowedRoles: [UserRole.ADMIN, UserRole.EXECUTIVE, UserRole.MAIN_PMO] },\n    { value: 'delayed', label: t('analytics.delayedProjects', 'Number of Delayed Projects'), allowedRoles: [UserRole.ADMIN, UserRole.EXECUTIVE, UserRole.MAIN_PMO, UserRole.DEPARTMENT_DIRECTOR, UserRole.PROJECT_MANAGER] },\n    { value: 'stalled', label: t('analytics.stalledProjects', 'Number of Stalled Projects'), allowedRoles: [UserRole.ADMIN, UserRole.EXECUTIVE, UserRole.MAIN_PMO, UserRole.DEPARTMENT_DIRECTOR, UserRole.PROJECT_MANAGER] },\n    { value: 'inProgress', label: t('analytics.inProgressProjects', 'Number of Projects In Progress'), allowedRoles: [UserRole.ADMIN, UserRole.EXECUTIVE, UserRole.MAIN_PMO, UserRole.SUB_PMO, UserRole.DEPARTMENT_DIRECTOR, UserRole.PROJECT_MANAGER, UserRole.DEVELOPER] },\n    \n    // Budget metrics\n    { value: 'budgetByDepartment', label: t('analytics.budgetByDepartment', 'Budget Allocation by Department'), allowedRoles: [UserRole.ADMIN, UserRole.EXECUTIVE, UserRole.MAIN_PMO], description: t('analytics.budgetByDepartmentDesc', 'Shows how budget is distributed across departments') },\n    { value: 'budgetVsActual', label: t('analytics.budgetVsActual', 'Budget vs Actual Cost'), allowedRoles: [UserRole.ADMIN, UserRole.EXECUTIVE, UserRole.MAIN_PMO, UserRole.DEPARTMENT_DIRECTOR, UserRole.PROJECT_MANAGER], description: t('analytics.budgetVsActualDesc', 'Compares planned budget with actual expenditure') },\n    { value: 'topBudgetProjects', label: t('analytics.topBudgetProjects', 'Top Projects by Budget'), allowedRoles: [UserRole.ADMIN, UserRole.EXECUTIVE, UserRole.MAIN_PMO, UserRole.DEPARTMENT_DIRECTOR], description: t('analytics.topBudgetProjectsDesc', 'Shows projects with the highest budget allocation') },\n    { value: 'budgetUtilization', label: t('analytics.budgetUtilization', 'Budget Utilization Rate'), allowedRoles: [UserRole.ADMIN, UserRole.EXECUTIVE, UserRole.MAIN_PMO, UserRole.DEPARTMENT_DIRECTOR, UserRole.PROJECT_MANAGER], description: t('analytics.budgetUtilizationDesc', 'Shows percentage of budget utilized by projects') },\n    \n    // Risk metrics\n    { value: 'riskStatus', label: t('analytics.risksByStatus', 'Risks by Status'), allowedRoles: Object.values(UserRole), description: t('analytics.risksByStatusDesc', 'Shows the distribution of risks by their status') },\n    { value: 'riskImpact', label: t('analytics.risksByImpact', 'Risks by Impact Level'), allowedRoles: Object.values(UserRole), description: t('analytics.risksByImpactDesc', 'Shows the distribution of risks by their impact level') },\n    { value: 'highProbabilityRisks', label: t('analytics.highProbRisks', 'High Probability Risks'), allowedRoles: Object.values(UserRole), description: t('analytics.highProbRisksDesc', 'Shows risks with probability greater than 70%') },\n    \n    // Issue metrics\n    { value: 'issueStatus', label: t('analytics.issuesByStatus', 'Issues by Status'), allowedRoles: Object.values(UserRole), description: t('analytics.issuesByStatusDesc', 'Shows the distribution of issues by their status') },\n    { value: 'issuePriority', label: t('analytics.issuesByPriority', 'Issues by Priority'), allowedRoles: Object.values(UserRole), description: t('analytics.issuesByPriorityDesc', 'Shows the distribution of issues by their priority') },\n    { value: 'openIssues', label: t('analytics.openIssuesByProject', 'Open Issues by Project'), allowedRoles: Object.values(UserRole), description: t('analytics.openIssuesByProjectDesc', 'Shows the number of open issues for each project') },\n  ];\n\n  // Filter projects based on user role and permissions\n  const filteredProjects = useMemo(() => {\n    if (canViewAllProjects || !user?.role) return projects;\n    \n    if (user.role === UserRole.DEPARTMENT_DIRECTOR && user.department) {\n      return projects.filter(project => project.department.id === user.department!.id);\n    } else if (user.role === UserRole.PROJECT_MANAGER) {\n      return projects.filter(project => project.projectManager.id === user.id);\n    }\n    \n    return projects;\n  }, [projects, user, canViewAllProjects]);\n\n  // Fetch risks and issues data for all visible projects\n  const fetchRisksAndIssues = async () => {\n    try {\n      const allRisks: Risk[] = [];\n      const allIssues: Issue[] = [];\n      \n      for (const project of filteredProjects) {\n        // Fetch risks\n        const risksResponse = await api.risks.getAllRisks(project.id, '');\n        if (risksResponse.success && risksResponse.data) {\n          risksResponse.data.forEach((risk: Risk) => allRisks.push({...risk, projectId: project.id}));\n        }\n        \n        // Fetch issues\n        const issuesResponse = await api.issues.getAllIssues(project.id, '');\n        if (issuesResponse.success && issuesResponse.data) {\n          issuesResponse.data.forEach((issue: Issue) => allIssues.push({...issue, projectId: project.id}));\n        }\n      }\n      \n      setRisks(allRisks);\n      setIssues(allIssues);\n    } catch (error) {\n      console.error('Error fetching risks and issues:', error);\n    }\n  };\n\n  const processData = (metric: string): ChartData[] => {\n    if (!metric) return [];\n    \n    switch (metric) {\n      case 'client':\n        return processClientData();\n      case 'projectManager':\n        return processProjectManagerData();\n      case 'priority':\n        return processPriorityData();\n      case 'status':\n        return processStatusData();\n      case 'delayed':\n        return processDelayedData();\n      case 'department':\n        return processDepartmentData();\n      case 'stalled':\n        return processStalledData();\n      case 'inProgress':\n        return processInProgressData();\n      // Budget metrics\n      case 'budgetByDepartment':\n        return processBudgetByDepartmentData();\n      case 'budgetVsActual':\n        return processBudgetVsActualData();\n      case 'topBudgetProjects':\n        return processTopBudgetProjectsData();\n      case 'budgetUtilization':\n        return processBudgetUtilizationData();\n      // Risk metrics\n      case 'riskStatus':\n        return processRiskStatusData();\n      case 'riskImpact':\n        return processRiskImpactData();\n      case 'highProbabilityRisks':\n        return processHighProbabilityRisksData();\n      // Issue metrics\n      case 'issueStatus':\n        return processIssueStatusData();\n      case 'issuePriority':\n        return processIssuePriorityData();\n      case 'openIssues':\n        return processOpenIssuesData();\n      default:\n        return [];\n    }\n  };\n\n  const processClientData = (): ChartData[] => {\n    const clientCounts = filteredProjects.reduce((acc: { [key: string]: number }, project) => {\n      const client = project.client || 'Unknown';\n      acc[client] = (acc[client] || 0) + 1;\n      return acc;\n    }, {});\n    return Object.entries(clientCounts).map(([name, value]) => ({ name, value }));\n  };\n\n  const processProjectManagerData = (): ChartData[] => {\n    const pmCounts = filteredProjects.reduce((acc: { [key: string]: number }, project) => {\n      const pm = project.projectManager?.firstName + ' ' + project.projectManager?.lastName || 'Unknown';\n      acc[pm] = (acc[pm] || 0) + 1;\n      return acc;\n    }, {});\n    return Object.entries(pmCounts).map(([name, value]) => ({ name, value }));\n  };\n\n  const processPriorityData = (): ChartData[] => {\n    const priorityCounts = filteredProjects.reduce((acc: { [key: string]: number }, project) => {\n      const priority = project.priority || 'Unknown';\n      acc[priority] = (acc[priority] || 0) + 1;\n      return acc;\n    }, {});\n    return Object.entries(priorityCounts).map(([name, value]) => ({ name, value }));\n  };\n\n  const processStatusData = (): ChartData[] => {\n    const statusCounts = filteredProjects.reduce((acc: { [key: string]: number }, project) => {\n      const status = project.status || 'Unknown';\n      acc[status] = (acc[status] || 0) + 1;\n      return acc;\n    }, {});\n    return Object.entries(statusCounts).map(([name, value]) => ({ name, value }));\n  };\n\n  const processDelayedData = (): ChartData[] => {\n    const delayedProjects = filteredProjects.filter(project => {\n      const dueDate = new Date(project.endDate);\n      const today = new Date();\n      return dueDate < today && project.status !== ProjectStatus.COMPLETED;\n    });\n    return [{ name: 'Delayed Projects', value: delayedProjects.length }];\n  };\n\n  const processDepartmentData = (): ChartData[] => {\n    const deptCounts = filteredProjects.reduce((acc: { [key: string]: number }, project) => {\n      const dept = project.department?.name || 'Unknown';\n      acc[dept] = (acc[dept] || 0) + 1;\n      return acc;\n    }, {});\n    return Object.entries(deptCounts).map(([name, value]) => ({ name, value }));\n  };\n\n  const processStalledData = (): ChartData[] => {\n    const stalledProjects = filteredProjects.filter(project => \n      project.status === ProjectStatus.ON_HOLD\n    );\n    return [{ name: 'Stalled Projects', value: stalledProjects.length }];\n  };\n\n  const processInProgressData = (): ChartData[] => {\n    const inProgressProjects = filteredProjects.filter(project => \n      project.status === ProjectStatus.IN_PROGRESS\n    );\n    return [{ name: 'Projects In Progress', value: inProgressProjects.length }];\n  };\n\n  // Risk metrics processing methods\n  const processRiskStatusData = (): ChartData[] => {\n    const statusCounts = risks.reduce((acc: { [key: string]: number }, risk) => {\n      const status = risk.status || 'Unknown';\n      acc[status] = (acc[status] || 0) + 1;\n      return acc;\n    }, {});\n    return Object.entries(statusCounts).map(([name, value]) => ({ name, value }));\n  };\n\n  const processRiskImpactData = (): ChartData[] => {\n    const impactCounts = risks.reduce((acc: { [key: string]: number }, risk) => {\n      const impact = risk.impact || 'Unknown';\n      acc[impact] = (acc[impact] || 0) + 1;\n      return acc;\n    }, {});\n    return Object.entries(impactCounts).map(([name, value]) => ({ name, value }));\n  };\n\n  const processHighProbabilityRisksData = (): ChartData[] => {\n    const highProbRisks = risks.filter(risk => risk.probability && risk.probability > 70);\n    \n    // Group by impact level\n    const impactCounts = highProbRisks.reduce((acc: { [key: string]: number }, risk) => {\n      const impact = risk.impact || 'Unknown';\n      acc[impact] = (acc[impact] || 0) + 1;\n      return acc;\n    }, {});\n    \n    return Object.entries(impactCounts).map(([name, value]) => ({ name, value }));\n  };\n\n  // Issue metrics processing methods\n  const processIssueStatusData = (): ChartData[] => {\n    const statusCounts = issues.reduce((acc: { [key: string]: number }, issue) => {\n      const status = issue.status || 'Unknown';\n      acc[status] = (acc[status] || 0) + 1;\n      return acc;\n    }, {});\n    return Object.entries(statusCounts).map(([name, value]) => ({ name, value }));\n  };\n\n  const processIssuePriorityData = (): ChartData[] => {\n    const priorityCounts = issues.reduce((acc: { [key: string]: number }, issue) => {\n      const priority = issue.impact || 'Unknown';\n      acc[priority] = (acc[priority] || 0) + 1;\n      return acc;\n    }, {});\n    return Object.entries(priorityCounts).map(([name, value]) => ({ name, value }));\n  };\n\n  const processOpenIssuesData = (): ChartData[] => {\n    const openIssues = issues.filter(issue => issue.status === IssueStatus.OPEN);\n    const projectCounts = openIssues.reduce((acc: { [key: string]: number }, issue) => {\n      const projectId = issue.projectId || 'Unknown';\n      acc[projectId] = (acc[projectId] || 0) + 1;\n      return acc;\n    }, {});\n    return Object.entries(projectCounts).map(([name, value]) => ({ name, value }));\n  };\n\n  // Add new processing functions for budget metrics  \n  const processBudgetByDepartmentData = (): ChartData[] => {\n    const departmentBudgets = filteredProjects.reduce((acc: { [key: string]: number }, project) => {\n      const deptName = project.department?.name || 'Unknown';\n      acc[deptName] = (acc[deptName] || 0) + (project.budget || 0);\n      return acc;\n    }, {});\n    \n    return Object.entries(departmentBudgets)\n      .map(([name, value]) => ({ name, value }))\n      .sort((a, b) => b.value - a.value);\n  };\n\n  const processBudgetVsActualData = (): ChartData[] => {\n    const totalBudget = filteredProjects.reduce((sum, project) => sum + (project.budget || 0), 0);\n    const totalActual = filteredProjects.reduce((sum, project) => sum + (project.actualCost || 0), 0);\n    \n    return [\n      { name: t('analytics.plannedBudget', 'Planned Budget'), value: totalBudget },\n      { name: t('analytics.actualCost', 'Actual Cost'), value: totalActual }\n    ];\n  };\n\n  const processTopBudgetProjectsData = (): ChartData[] => {\n    return filteredProjects\n      .filter(project => project.budget && project.budget > 0)\n      .sort((a, b) => (b.budget || 0) - (a.budget || 0))\n      .slice(0, 10)  // Get top 10 projects by budget\n      .map(project => ({\n        name: project.name,\n        value: project.budget || 0\n      }));\n  };\n\n  const processBudgetUtilizationData = (): ChartData[] => {\n    return filteredProjects\n      .filter(project => project.budget && project.budget > 0)\n      .map(project => {\n        const utilization = ((project.actualCost || 0) / (project.budget || 1)) * 100;\n        return {\n          name: project.name,\n          value: Math.min(utilization, 100) // Cap at 100% for display purposes\n        };\n      })\n      .sort((a, b) => b.value - a.value);\n  };\n\n  useEffect(() => {\n    if (!selectedMetric) return;\n    const data = processData(selectedMetric);\n    setCharts(prevCharts => [...prevCharts, {\n      type: selectedChartType,\n      data: data,\n      title: metrics.find(m => m.value === selectedMetric)?.label || '',\n    }]);\n  }, [selectedMetric, selectedChartType, filteredProjects]);\n\n  const handleMetricChange = (event: SelectChangeEvent) => {\n    setSelectedMetric(event.target.value);\n  };\n\n  const handleChartTypeChange = (event: SelectChangeEvent) => {\n    setSelectedChartType(event.target.value as ChartConfig['type']);\n  };\n\n  const removeChart = (index: number) => {\n    setCharts(prevCharts => prevCharts.filter((_, i) => i !== index));\n  };\n\n  // Get available metrics based on user role\n  const getAvailableMetrics = () => {\n    if (!user || !user.role) return [];\n    // If user is admin, return all metrics\n    if (user.role === UserRole.ADMIN) return metrics;\n    return metrics.filter(metric => metric.allowedRoles.includes(user.role as UserRole));\n  };\n\n  const availableMetrics = getAvailableMetrics();\n\n  const renderChart = (config: ChartConfig, index: number) => {\n    const { type, data, title } = config;\n\n    switch (type) {\n      case 'bar':\n        return (\n          <Box key={index} sx={{ width: '50%', p: 1 }}>\n            <Paper sx={{ p: 2, height: '400px' }}>\n              <Typography variant=\"h6\" gutterBottom>\n                {title}\n              </Typography>\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\n                <BarChart data={data}>\n                  <CartesianGrid strokeDasharray=\"3 3\" />\n                  <XAxis dataKey=\"name\" />\n                  <YAxis />\n                  <Tooltip />\n                  <Legend />\n                  <Bar dataKey=\"value\" fill=\"#8884d8\" />\n                </BarChart>\n              </ResponsiveContainer>\n              <Button onClick={() => removeChart(index)}>{t('common.remove', 'Remove')}</Button>\n            </Paper>\n          </Box>\n        );\n      case 'pie':\n        return (\n          <Box key={index} sx={{ width: '50%', p: 1 }}>\n            <Paper sx={{ p: 2, height: '400px' }}>\n              <Typography variant=\"h6\" gutterBottom>\n                {title}\n              </Typography>\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\n                <PieChart>\n                  <Pie\n                    data={data}\n                    cx=\"50%\"\n                    cy=\"50%\"\n                    labelLine={false}\n                    label={({ name, percent }) => `${name}: ${(percent * 100).toFixed(0)}%`}\n                    outerRadius={80}\n                    fill=\"#8884d8\"\n                    dataKey=\"value\"\n                  >\n                    {data.map((entry, index) => (\n                      <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                    ))}\n                  </Pie>\n                  <Tooltip />\n                  <Legend />\n                </PieChart>\n              </ResponsiveContainer>\n              <Button onClick={() => removeChart(index)}>{t('common.remove', 'Remove')}</Button>\n            </Paper>\n          </Box>\n        );\n      case 'line':\n        return (\n          <Box key={index} sx={{ width: '50%', p: 1 }}>\n            <Paper sx={{ p: 2, height: '400px' }}>\n              <Typography variant=\"h6\" gutterBottom>\n                {title}\n              </Typography>\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\n                <LineChart data={data}>\n                  <CartesianGrid strokeDasharray=\"3 3\" />\n                  <XAxis dataKey=\"name\" />\n                  <YAxis />\n                  <Tooltip />\n                  <Legend />\n                  <Line type=\"monotone\" dataKey=\"value\" stroke=\"#8884d8\" />\n                </LineChart>\n              </ResponsiveContainer>\n              <Button onClick={() => removeChart(index)}>{t('common.remove', 'Remove')}</Button>\n            </Paper>\n          </Box>\n        );\n      case 'area':\n        return (\n          <Box key={index} sx={{ width: '50%', p: 1 }}>\n            <Paper sx={{ p: 2, height: '400px' }}>\n              <Typography variant=\"h6\" gutterBottom>\n                {title}\n              </Typography>\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\n                <AreaChart data={data}>\n                  <CartesianGrid strokeDasharray=\"3 3\" />\n                  <XAxis dataKey=\"name\" />\n                  <YAxis />\n                  <Tooltip />\n                  <Legend />\n                  <Area type=\"monotone\" dataKey=\"value\" stroke=\"#8884d8\" fill=\"#8884d8\" fillOpacity={0.3} />\n                </AreaChart>\n              </ResponsiveContainer>\n              <Button onClick={() => removeChart(index)}>{t('common.remove', 'Remove')}</Button>\n            </Paper>\n          </Box>\n        );\n      case 'scatter':\n        return (\n          <Box key={index} sx={{ width: '50%', p: 1 }}>\n            <Paper sx={{ p: 2, height: '400px' }}>\n              <Typography variant=\"h6\" gutterBottom>\n                {title}\n              </Typography>\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\n                <ScatterChart>\n                  <CartesianGrid strokeDasharray=\"3 3\" />\n                  <XAxis dataKey=\"name\" />\n                  <YAxis dataKey=\"value\" />\n                  <Tooltip />\n                  <Legend />\n                  <Scatter data={data} fill=\"#8884d8\" />\n                </ScatterChart>\n              </ResponsiveContainer>\n              <Button onClick={() => removeChart(index)}>{t('common.remove', 'Remove')}</Button>\n            </Paper>\n          </Box>\n        );\n      case 'radar':\n        return (\n          <Box key={index} sx={{ width: '50%', p: 1 }}>\n            <Paper sx={{ p: 2, height: '400px' }}>\n              <Typography variant=\"h6\" gutterBottom>\n                {title}\n              </Typography>\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\n                <RadarChart data={data}>\n                  <PolarGrid />\n                  <PolarAngleAxis dataKey=\"name\" />\n                  <PolarRadiusAxis />\n                  <Radar dataKey=\"value\" stroke=\"#8884d8\" fill=\"#8884d8\" fillOpacity={0.6} />\n                  <Tooltip />\n                  <Legend />\n                </RadarChart>\n              </ResponsiveContainer>\n              <Button onClick={() => removeChart(index)}>{t('common.remove', 'Remove')}</Button>\n            </Paper>\n          </Box>\n        );\n      case 'composed':\n        return (\n          <Box key={index} sx={{ width: '50%', p: 1 }}>\n            <Paper sx={{ p: 2, height: '400px' }}>\n              <Typography variant=\"h6\" gutterBottom>\n                {title}\n              </Typography>\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\n                <ComposedChart data={data}>\n                  <CartesianGrid strokeDasharray=\"3 3\" />\n                  <XAxis dataKey=\"name\" />\n                  <YAxis />\n                  <Tooltip />\n                  <Legend />\n                  <Bar dataKey=\"value\" fill=\"#8884d8\" />\n                  <Line type=\"monotone\" dataKey=\"value\" stroke=\"#ff7300\" />\n                </ComposedChart>\n              </ResponsiveContainer>\n              <Button onClick={() => removeChart(index)}>{t('common.remove', 'Remove')}</Button>\n            </Paper>\n          </Box>\n        );\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <Box sx={{ p: 3 }}>\n      <Typography variant=\"h4\" gutterBottom>\n        {t('analytics.title', 'Project Analytics Dashboard')}\n      </Typography>\n      \n      {availableMetrics.length === 0 ? (\n        <Alert severity=\"info\">\n          {t('analytics.noAccess', 'You don\\'t have access to any analytics data. Please contact your administrator for access.')}\n        </Alert>\n      ) : (\n        <>\n          {/* KPI Summary Section */}\n          <Paper sx={{ p: 2, mb: 3 }}>\n            <Typography variant=\"h6\" gutterBottom>{t('dashboard.kpi')}</Typography>\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 3 }}>\n              <Box sx={{ flex: '1 1 calc(25% - 24px)', minWidth: { xs: '100%', sm: 'calc(50% - 24px)', md: 'calc(25% - 24px)' } }}>\n                <Paper elevation={2} sx={{ p: 2, textAlign: 'center', backgroundColor: '#f5f5f5' }}>\n                  <Typography variant=\"subtitle2\" color=\"textSecondary\">{t('dashboard.totalProjects')}</Typography>\n                  <Typography variant=\"h4\">{filteredProjects.length}</Typography>\n                </Paper>\n              </Box>\n              <Box sx={{ flex: '1 1 calc(25% - 24px)', minWidth: { xs: '100%', sm: 'calc(50% - 24px)', md: 'calc(25% - 24px)' } }}>\n                <Paper elevation={2} sx={{ p: 2, textAlign: 'center', backgroundColor: '#f5f5f5' }}>\n                  <Typography variant=\"subtitle2\" color=\"textSecondary\">{t('dashboard.inProgress')}</Typography>\n                  <Typography variant=\"h4\">\n                    {filteredProjects.filter(p => p.status === ProjectStatus.IN_PROGRESS).length}\n                  </Typography>\n                </Paper>\n              </Box>\n              <Box sx={{ flex: '1 1 calc(25% - 24px)', minWidth: { xs: '100%', sm: 'calc(50% - 24px)', md: 'calc(25% - 24px)' } }}>\n                <Paper elevation={2} sx={{ p: 2, textAlign: 'center', backgroundColor: '#f5f5f5' }}>\n                  <Typography variant=\"subtitle2\" color=\"textSecondary\">{t('analytics.overdueAssignments', 'Overdue Assignments')}</Typography>\n                  <Typography variant=\"h4\">\n                    {assignments.filter(a => {\n                      const dueDate = new Date(a.dueDate);\n                      return dueDate < new Date() && a.status !== AssignmentStatus.COMPLETED;\n                    }).length}\n                  </Typography>\n                </Paper>\n              </Box>\n              <Box sx={{ flex: '1 1 calc(25% - 24px)', minWidth: { xs: '100%', sm: 'calc(50% - 24px)', md: 'calc(25% - 24px)' } }}>\n                <Paper elevation={2} sx={{ p: 2, textAlign: 'center', backgroundColor: '#f5f5f5' }}>\n                  <Typography variant=\"subtitle2\" color=\"textSecondary\">{t('analytics.highPriorityRisks', 'High Priority Risks')}</Typography>\n                  <Typography variant=\"h4\">\n                    {risks.filter(r => r.impact === RiskImpact.HIGH || r.impact === RiskImpact.CRITICAL).length}\n                  </Typography>\n                </Paper>\n              </Box>\n            </Box>\n          </Paper>\n\n          {/* Chart Configuration Section */}\n          <Paper sx={{ p: 2, mb: 3 }}>\n            <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2} alignItems={{ xs: 'stretch', sm: 'center' }}>\n              <FormControl sx={{ minWidth: 200, flex: 1 }}>\n                <InputLabel>{t('analytics.selectMetric', 'Select Metric')}</InputLabel>\n                <Select\n                  value={selectedMetric}\n                  onChange={handleMetricChange}\n                  label={t('analytics.selectMetric', 'Select Metric')}\n                >\n                  {availableMetrics.map((metric) => (\n                    <MenuItem \n                      key={metric.value} \n                      value={metric.value}\n                      title={metric.description}\n                    >\n                      {metric.label}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n\n              <FormControl sx={{ minWidth: 150, flex: 1 }}>\n                <InputLabel>{t('analytics.chartType', 'Chart Type')}</InputLabel>\n                <Select\n                  value={selectedChartType}\n                  onChange={handleChartTypeChange}\n                  label={t('analytics.chartType', 'Chart Type')}\n                >\n                  <MenuItem value=\"bar\">{t('analytics.barChart', 'Bar Chart')}</MenuItem>\n                  <MenuItem value=\"pie\">{t('analytics.pieChart', 'Pie Chart')}</MenuItem>\n                  <MenuItem value=\"line\">{t('analytics.lineChart', 'Line Chart')}</MenuItem>\n                  <MenuItem value=\"area\">{t('analytics.areaChart', 'Area Chart')}</MenuItem>\n                  <MenuItem value=\"scatter\">{t('analytics.scatterPlot', 'Scatter Plot')}</MenuItem>\n                  <MenuItem value=\"radar\">{t('analytics.radarChart', 'Radar Chart')}</MenuItem>\n                  <MenuItem value=\"composed\">{t('analytics.composedChart', 'Composed Chart')}</MenuItem>\n                </Select>\n              </FormControl>\n\n              <Button \n                variant=\"contained\" \n                onClick={() => {\n                  if (!selectedMetric) return;\n                  setCharts(prevCharts => [...prevCharts, {\n                    type: selectedChartType,\n                    data: processData(selectedMetric),\n                    title: metrics.find(m => m.value === selectedMetric)?.label || '',\n                  }]);\n                }}\n                disabled={!selectedMetric || !selectedChartType}\n                sx={{ minWidth: 120 }}\n              >\n                {t('analytics.addChart', 'Add Chart')}\n              </Button>\n            </Stack>\n            \n            {/* Display selected metric description if available */}\n            {selectedMetric && (\n              <Typography \n                variant=\"body2\" \n                color=\"text.secondary\" \n                sx={{ mt: 1, fontStyle: 'italic' }}\n              >\n                {metrics.find(m => m.value === selectedMetric)?.description || ''}\n              </Typography>\n            )}\n          </Paper>\n\n          {/* Display charts */}\n          <Box sx={{ display: 'flex', flexWrap: 'wrap', mt: 3 }}>\n            {charts.map((config, index) => renderChart(config, index))}\n          </Box>\n          \n          {/* Show empty state message if no charts added */}\n          {charts.length === 0 && (\n            <Box sx={{ textAlign: 'center', py: 5 }}>\n              <Typography variant=\"body1\" color=\"text.secondary\">\n                {t('analytics.emptyState', 'Select a metric and chart type from above, then click \"Add Chart\" to build your custom dashboard')}\n              </Typography>\n            </Box>\n          )}\n        </>\n      )}\n    </Box>\n  );\n};\n\nexport default AnalyticsDashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}