{"ast":null,"code":"var _jsxFileName = \"/Users/hassanalsahli/Desktop/Themis/themis-client-final/src/pages/ApprovalsPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Box, Container, Typography, Paper, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Button, Chip, Dialog, DialogTitle, DialogContent, DialogActions, TextField, Divider, CircularProgress, Alert, IconButton, Tabs, Tab } from '@mui/material';\nimport { CheckCircle as ApproveIcon, Cancel as RejectIcon, Close as CloseIcon, Refresh as RefreshIcon } from '@mui/icons-material';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../hooks/useAuth';\nimport { ProjectStatus, UserRole } from '../types';\nimport { ApprovalStatus, getNextApprovalStatus } from '../context/AuthContext';\nimport { formatDate } from '../utils/helpers';\nimport { useTranslation } from 'react-i18next';\nimport api from '../services/api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction TabPanel(props) {\n  const {\n    children,\n    value,\n    index,\n    ...other\n  } = props;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    role: \"tabpanel\",\n    hidden: value !== index,\n    id: `approval-tabpanel-${index}`,\n    \"aria-labelledby\": `approval-tab-${index}`,\n    ...other,\n    children: value === index && /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        pt: 3\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 27\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}\n_c = TabPanel;\nconst ApprovalsPage = () => {\n  _s();\n  const {\n    t\n  } = useTranslation();\n  const {\n    user,\n    token\n  } = useAuth();\n  const navigate = useNavigate();\n  const [projects, setProjects] = useState([]);\n  const [pendingApprovals, setPendingApprovals] = useState([]);\n  const [completedApprovals, setCompletedApprovals] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [tabValue, setTabValue] = useState(0);\n\n  // Dialog states\n  const [openDialog, setOpenDialog] = useState(false);\n  const [dialogType, setDialogType] = useState('approve');\n  const [selectedProject, setSelectedProject] = useState(null);\n  const [comments, setComments] = useState('');\n  const [rejectReason, setRejectReason] = useState('');\n  const [submitLoading, setSubmitLoading] = useState(false);\n  const [submitError, setSubmitError] = useState(null);\n  useEffect(() => {\n    fetchApprovals();\n  }, [token]);\n  const fetchApprovals = async () => {\n    if (!token) return;\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await api.projects.getAllProjects('');\n      if (response.data) {\n        const allProjects = response.data;\n\n        // Filter projects by approval status\n        const pending = allProjects.filter(project => {\n          const status = String(project.status);\n          return status === 'SUBMITTED' || status === 'SUB_PMO_REVIEW' || status === 'MAIN_PMO_REVIEW' || status === 'SUB_PMO_APPROVED';\n        });\n        const completed = allProjects.filter(project => {\n          const status = String(project.status);\n          return status === 'APPROVED' || status === 'REJECTED' || status === 'CHANGES_REQUESTED';\n        });\n        setProjects(allProjects);\n        setPendingApprovals(pending);\n        setCompletedApprovals(completed);\n      } else {\n        setError('Failed to fetch approvals');\n      }\n    } catch (err) {\n      setError('An error occurred while fetching approvals');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleRefresh = () => {\n    fetchApprovals();\n  };\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n  const handleViewProject = projectId => {\n    navigate(`/projects/${projectId}`);\n  };\n  const handleOpenDialog = (project, type) => {\n    setSelectedProject(project);\n    setDialogType(type);\n    setComments('');\n    setRejectReason('');\n    setSubmitError(null);\n    setOpenDialog(true);\n  };\n  const handleCloseDialog = () => {\n    setOpenDialog(false);\n    setSelectedProject(null);\n  };\n  const handleApproveReject = async () => {\n    if (!selectedProject || !token || !user) {\n      setSubmitError('Invalid project or user session');\n      return;\n    }\n\n    // Validate reject reason is provided when rejecting\n    if (dialogType === 'reject' && !rejectReason.trim()) {\n      setSubmitError('Rejection reason is required');\n      return;\n    }\n    setSubmitLoading(true);\n    setSubmitError(null);\n    try {\n      let nextStatus;\n      const action = dialogType === 'approve' ? 'APPROVE' : 'REJECT';\n      const currentStatus = selectedProject.approvalStatus || ApprovalStatus.SUBMITTED;\n      nextStatus = getNextApprovalStatus(currentStatus, user.role, action);\n      if (!nextStatus) {\n        setSubmitError('Cannot determine next approval status');\n        setSubmitLoading(false);\n        return;\n      }\n\n      // Prepare reviewComments, combining comments with rejection reason if applicable\n      const reviewComments = dialogType === 'reject' ? `${comments ? comments + '\\n\\n' : ''}REJECTION REASON: ${rejectReason}` : comments;\n\n      // Prepare project data with review history\n      const projectData = {\n        ...selectedProject,\n        approvalStatus: nextStatus,\n        reviewHistory: [...((selectedProject === null || selectedProject === void 0 ? void 0 : selectedProject.reviewHistory) || []), {\n          id: Date.now().toString(),\n          text: reviewComments,\n          createdAt: new Date().toISOString(),\n          user: user,\n          action: action\n        }],\n        lastReviewedBy: user,\n        lastReviewedAt: new Date().toISOString(),\n        comments: reviewComments\n      };\n\n      // Update project\n      const response = await api.projects.updateProject(selectedProject.id, projectData, localStorage.getItem('token') || '');\n      if (response.data) {\n        handleCloseDialog();\n        fetchApprovals();\n      } else {\n        setSubmitError('Failed to update project');\n      }\n    } catch (err) {\n      setSubmitError('An error occurred while updating project');\n      console.error(err);\n    } finally {\n      setSubmitLoading(false);\n    }\n  };\n  const canApprove = project => {\n    var _project$projectManag;\n    const isOwnProject = ((_project$projectManag = project.projectManager) === null || _project$projectManag === void 0 ? void 0 : _project$projectManag.id) === (user === null || user === void 0 ? void 0 : user.id);\n    if (!user) return false;\n\n    // Admin can approve anything\n    if (user.role === UserRole.ADMIN) return true;\n\n    // SUB_PMO can approve submitted projects that are not their own\n    if (user.role === UserRole.SUB_PMO && !isOwnProject && (project.approvalStatus === ApprovalStatus.SUBMITTED || project.status === ProjectStatus.PLANNING)) {\n      return true;\n    }\n\n    // MAIN_PMO can approve projects that have been approved by SUB_PMO\n    if (user.role === UserRole.MAIN_PMO && project.approvalStatus === ApprovalStatus.SUB_PMO_APPROVED) {\n      return true;\n    }\n    return false;\n  };\n  const getStatusLabel = status => {\n    switch (status) {\n      case 'DRAFT':\n        return t('status.draft');\n      case 'SUBMITTED':\n        return t('status.submitted');\n      case 'SUB_PMO_REVIEW':\n        return t('status.subPmoReview');\n      case 'SUB_PMO_APPROVED':\n        return t('status.subPmoApproved');\n      case 'MAIN_PMO_REVIEW':\n        return t('status.mainPmoReview');\n      case 'APPROVED':\n        return t('status.approved');\n      case 'REJECTED':\n        return t('status.rejected');\n      case 'CHANGES_REQUESTED':\n        return t('status.changesRequested');\n      default:\n        return status;\n    }\n  };\n  const getStatusColor = status => {\n    switch (status) {\n      case 'DRAFT':\n        return 'default';\n      case 'SUBMITTED':\n      case 'SUB_PMO_REVIEW':\n      case 'MAIN_PMO_REVIEW':\n        return 'info';\n      case 'SUB_PMO_APPROVED':\n        return 'secondary';\n      case 'APPROVED':\n        return 'success';\n      case 'REJECTED':\n        return 'error';\n      case 'CHANGES_REQUESTED':\n        return 'warning';\n      default:\n        return 'default';\n    }\n  };\n  const renderApprovalsTable = items => {\n    if (items.length === 0) {\n      return /*#__PURE__*/_jsxDEV(Paper, {\n        sx: {\n          p: 3,\n          textAlign: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          color: \"textSecondary\",\n          children: t('approvals.noItemsFound')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 9\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(TableContainer, {\n      component: Paper,\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        children: [/*#__PURE__*/_jsxDEV(TableHead, {\n          children: /*#__PURE__*/_jsxDEV(TableRow, {\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              children: t('project.name')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: t('project.department')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: t('project.projectManager')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: t('project.submittedDate')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: t('project.status')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"right\",\n              children: t('common.actions')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n          children: items.map(project => {\n            var _project$department;\n            return /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: project.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: ((_project$department = project.department) === null || _project$department === void 0 ? void 0 : _project$department.name) || t('common.none')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: project.projectManager ? `${project.projectManager.firstName} ${project.projectManager.lastName}` : t('common.unassigned')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: formatDate(project.createdAt || '')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: /*#__PURE__*/_jsxDEV(Chip, {\n                  label: getStatusLabel(project.approvalStatus || String(project.status)),\n                  color: getStatusColor(project.approvalStatus || String(project.status)),\n                  size: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  size: \"small\",\n                  onClick: () => handleViewProject(project.id),\n                  sx: {\n                    mr: 1\n                  },\n                  children: t('common.view')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 19\n                }, this), canApprove(project) && tabValue === 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(Button, {\n                    size: \"small\",\n                    color: \"success\",\n                    startIcon: /*#__PURE__*/_jsxDEV(ApproveIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 353,\n                      columnNumber: 36\n                    }, this),\n                    onClick: () => handleOpenDialog(project, 'approve'),\n                    sx: {\n                      mr: 1\n                    },\n                    children: t('approvals.approve')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 350,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    size: \"small\",\n                    color: \"error\",\n                    startIcon: /*#__PURE__*/_jsxDEV(RejectIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 363,\n                      columnNumber: 36\n                    }, this),\n                    onClick: () => handleOpenDialog(project, 'reject'),\n                    children: t('approvals.reject')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 360,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 17\n              }, this)]\n            }, project.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 15\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"xl\",\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        py: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          mb: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          component: \"h1\",\n          children: t('approvals.title', 'Project Approvals')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: handleRefresh,\n          disabled: loading,\n          children: loading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 24\n          }, this) : /*#__PURE__*/_jsxDEV(RefreshIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 57\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          mb: 3\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          borderBottom: 1,\n          borderColor: 'divider'\n        },\n        children: /*#__PURE__*/_jsxDEV(Tabs, {\n          value: tabValue,\n          onChange: handleTabChange,\n          children: [/*#__PURE__*/_jsxDEV(Tab, {\n            label: t('approvals.pending', 'Pending')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Tab, {\n            label: t('approvals.completed', 'Completed')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n        value: tabValue,\n        index: 0,\n        children: loading ? /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: 'center',\n            p: 4\n          },\n          children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 13\n        }, this) : renderApprovalsTable(pendingApprovals)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n        value: tabValue,\n        index: 1,\n        children: loading ? /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: 'center',\n            p: 4\n          },\n          children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 13\n        }, this) : renderApprovalsTable(completedApprovals)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: openDialog,\n      onClose: handleCloseDialog,\n      maxWidth: \"md\",\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: [dialogType === 'approve' ? t('approvals.approveProject') : t('approvals.rejectProject'), /*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"close\",\n          onClick: handleCloseDialog,\n          sx: {\n            position: 'absolute',\n            right: 8,\n            top: 8\n          },\n          children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: selectedProject && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              mb: 3\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              children: selectedProject.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"textSecondary\",\n              children: [t('project.id'), \": \", selectedProject.id]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            sx: {\n              my: 2\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: t('approvals.comments'),\n            multiline: true,\n            rows: 4,\n            fullWidth: true,\n            variant: \"outlined\",\n            value: comments,\n            onChange: e => setComments(e.target.value),\n            sx: {\n              mb: 3\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 15\n          }, this), dialogType === 'reject' && /*#__PURE__*/_jsxDEV(TextField, {\n            label: t('approvals.rejectionReason'),\n            multiline: true,\n            rows: 4,\n            fullWidth: true,\n            variant: \"outlined\",\n            value: rejectReason,\n            onChange: e => setRejectReason(e.target.value),\n            required: true,\n            error: submitError === null || submitError === void 0 ? void 0 : submitError.includes('reason'),\n            helperText: submitError !== null && submitError !== void 0 && submitError.includes('reason') ? t('approvals.reasonRequired') : t('approvals.reasonHelp')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 17\n          }, this), submitError && !submitError.includes('reason') && /*#__PURE__*/_jsxDEV(Alert, {\n            severity: \"error\",\n            sx: {\n              mt: 2\n            },\n            children: submitError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleCloseDialog,\n          children: t('common.cancel')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleApproveReject,\n          color: dialogType === 'approve' ? 'success' : 'error',\n          variant: \"contained\",\n          disabled: submitLoading || dialogType === 'reject' && !rejectReason.trim(),\n          children: submitLoading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 15\n          }, this) : dialogType === 'approve' ? t('approvals.approve') : t('approvals.reject')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 380,\n    columnNumber: 5\n  }, this);\n};\n_s(ApprovalsPage, \"Xcj80PbdvBFMQPstIHXLS+ZLVr4=\", false, function () {\n  return [useTranslation, useAuth, useNavigate];\n});\n_c2 = ApprovalsPage;\nexport default ApprovalsPage;\nvar _c, _c2;\n$RefreshReg$(_c, \"TabPanel\");\n$RefreshReg$(_c2, \"ApprovalsPage\");","map":{"version":3,"names":["React","useState","useEffect","Box","Container","Typography","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Button","Chip","Dialog","DialogTitle","DialogContent","DialogActions","TextField","Divider","CircularProgress","Alert","IconButton","Tabs","Tab","CheckCircle","ApproveIcon","Cancel","RejectIcon","Close","CloseIcon","Refresh","RefreshIcon","useNavigate","useAuth","ProjectStatus","UserRole","ApprovalStatus","getNextApprovalStatus","formatDate","useTranslation","api","jsxDEV","_jsxDEV","Fragment","_Fragment","TabPanel","props","children","value","index","other","role","hidden","id","sx","pt","fileName","_jsxFileName","lineNumber","columnNumber","_c","ApprovalsPage","_s","t","user","token","navigate","projects","setProjects","pendingApprovals","setPendingApprovals","completedApprovals","setCompletedApprovals","loading","setLoading","error","setError","tabValue","setTabValue","openDialog","setOpenDialog","dialogType","setDialogType","selectedProject","setSelectedProject","comments","setComments","rejectReason","setRejectReason","submitLoading","setSubmitLoading","submitError","setSubmitError","fetchApprovals","response","getAllProjects","data","allProjects","pending","filter","project","status","String","completed","err","console","handleRefresh","handleTabChange","event","newValue","handleViewProject","projectId","handleOpenDialog","type","handleCloseDialog","handleApproveReject","trim","nextStatus","action","currentStatus","approvalStatus","SUBMITTED","reviewComments","projectData","reviewHistory","Date","now","toString","text","createdAt","toISOString","lastReviewedBy","lastReviewedAt","updateProject","localStorage","getItem","canApprove","_project$projectManag","isOwnProject","projectManager","ADMIN","SUB_PMO","PLANNING","MAIN_PMO","SUB_PMO_APPROVED","getStatusLabel","getStatusColor","renderApprovalsTable","items","length","p","textAlign","color","component","align","map","_project$department","name","department","firstName","lastName","label","size","onClick","mr","startIcon","maxWidth","py","display","justifyContent","alignItems","mb","variant","disabled","severity","borderBottom","borderColor","onChange","open","onClose","fullWidth","position","right","top","my","multiline","rows","e","target","required","includes","helperText","mt","_c2","$RefreshReg$"],"sources":["/Users/hassanalsahli/Desktop/Themis/themis-client-final/src/pages/ApprovalsPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Box, \n  Container, \n  Typography, \n  Paper, \n  Table, \n  TableBody, \n  TableCell, \n  TableContainer, \n  TableHead, \n  TableRow,\n  Button,\n  Chip,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  Divider,\n  CircularProgress,\n  Alert,\n  IconButton,\n  Tabs,\n  Tab\n} from '@mui/material';\nimport { \n  CheckCircle as ApproveIcon,\n  Cancel as RejectIcon,\n  Edit as EditIcon,\n  Close as CloseIcon,\n  Refresh as RefreshIcon\n} from '@mui/icons-material';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../hooks/useAuth';\nimport { Project, ProjectStatus, UserRole } from '../types';\nimport { ApprovalStatus, getNextApprovalStatus } from '../context/AuthContext';\nimport { formatDate } from '../utils/helpers';\nimport { useTranslation } from 'react-i18next';\nimport api from '../services/api';\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`approval-tabpanel-${index}`}\n      aria-labelledby={`approval-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box sx={{ pt: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\nconst ApprovalsPage: React.FC = () => {\n  const { t } = useTranslation();\n  const { user, token } = useAuth();\n  const navigate = useNavigate();\n\n  const [projects, setProjects] = useState<Project[]>([]);\n  const [pendingApprovals, setPendingApprovals] = useState<Project[]>([]);\n  const [completedApprovals, setCompletedApprovals] = useState<Project[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [tabValue, setTabValue] = useState(0);\n\n  // Dialog states\n  const [openDialog, setOpenDialog] = useState(false);\n  const [dialogType, setDialogType] = useState<'approve' | 'reject'>('approve');\n  const [selectedProject, setSelectedProject] = useState<Project | null>(null);\n  const [comments, setComments] = useState('');\n  const [rejectReason, setRejectReason] = useState('');\n  const [submitLoading, setSubmitLoading] = useState(false);\n  const [submitError, setSubmitError] = useState<string | null>(null);\n\n  useEffect(() => {\n    fetchApprovals();\n  }, [token]);\n\n  const fetchApprovals = async () => {\n    if (!token) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await api.projects.getAllProjects('');\n      if (response.data) {\n        const allProjects = response.data;\n\n        // Filter projects by approval status\n        const pending = allProjects.filter((project: Project) => {\n          const status = String(project.status);\n          return status === 'SUBMITTED' || \n                 status === 'SUB_PMO_REVIEW' || \n                 status === 'MAIN_PMO_REVIEW' || \n                 status === 'SUB_PMO_APPROVED';\n        });\n        \n        const completed = allProjects.filter((project: Project) => {\n          const status = String(project.status);\n          return status === 'APPROVED' || \n                 status === 'REJECTED' || \n                 status === 'CHANGES_REQUESTED';\n        });\n\n        setProjects(allProjects);\n        setPendingApprovals(pending);\n        setCompletedApprovals(completed);\n      } else {\n        setError('Failed to fetch approvals');\n      }\n    } catch (err) {\n      setError('An error occurred while fetching approvals');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRefresh = () => {\n    fetchApprovals();\n  };\n\n  const handleTabChange = (event: React.SyntheticEvent, newValue: number) => {\n    setTabValue(newValue);\n  };\n\n  const handleViewProject = (projectId: string) => {\n    navigate(`/projects/${projectId}`);\n  };\n\n  const handleOpenDialog = (project: Project, type: 'approve' | 'reject') => {\n    setSelectedProject(project);\n    setDialogType(type);\n    setComments('');\n    setRejectReason('');\n    setSubmitError(null);\n    setOpenDialog(true);\n  };\n\n  const handleCloseDialog = () => {\n    setOpenDialog(false);\n    setSelectedProject(null);\n  };\n\n  const handleApproveReject = async () => {\n    if (!selectedProject || !token || !user) {\n      setSubmitError('Invalid project or user session');\n      return;\n    }\n\n    // Validate reject reason is provided when rejecting\n    if (dialogType === 'reject' && !rejectReason.trim()) {\n      setSubmitError('Rejection reason is required');\n      return;\n    }\n\n    setSubmitLoading(true);\n    setSubmitError(null);\n\n    try {\n      let nextStatus: ApprovalStatus | null;\n      const action = dialogType === 'approve' ? 'APPROVE' : 'REJECT';\n      const currentStatus = (selectedProject as any).approvalStatus || ApprovalStatus.SUBMITTED;\n      \n      nextStatus = getNextApprovalStatus(currentStatus, user.role, action);\n      \n      if (!nextStatus) {\n        setSubmitError('Cannot determine next approval status');\n        setSubmitLoading(false);\n        return;\n      }\n\n      // Prepare reviewComments, combining comments with rejection reason if applicable\n      const reviewComments = dialogType === 'reject' \n        ? `${comments ? comments + '\\n\\n' : ''}REJECTION REASON: ${rejectReason}`\n        : comments;\n\n      // Prepare project data with review history\n      const projectData = {\n        ...selectedProject,\n        approvalStatus: nextStatus,\n        reviewHistory: [\n          ...((selectedProject as any)?.reviewHistory || []),\n          {\n            id: Date.now().toString(),\n            text: reviewComments,\n            createdAt: new Date().toISOString(),\n            user: user,\n            action: action\n          }\n        ],\n        lastReviewedBy: user,\n        lastReviewedAt: new Date().toISOString(),\n        comments: reviewComments\n      };\n\n      // Update project\n      const response = await api.projects.updateProject(\n        selectedProject.id, \n        projectData,\n        localStorage.getItem('token') || ''\n      );\n\n      if (response.data) {\n        handleCloseDialog();\n        fetchApprovals();\n      } else {\n        setSubmitError('Failed to update project');\n      }\n    } catch (err) {\n      setSubmitError('An error occurred while updating project');\n      console.error(err);\n    } finally {\n      setSubmitLoading(false);\n    }\n  };\n\n  const canApprove = (project: Project): boolean => {\n    const isOwnProject = project.projectManager?.id === user?.id;\n    \n    if (!user) return false;\n    \n    // Admin can approve anything\n    if (user.role === UserRole.ADMIN) return true;\n    \n    // SUB_PMO can approve submitted projects that are not their own\n    if (user.role === UserRole.SUB_PMO && !isOwnProject && \n        ((project as any).approvalStatus === ApprovalStatus.SUBMITTED || \n        (project.status === ProjectStatus.PLANNING))) {\n      return true;\n    }\n    \n    // MAIN_PMO can approve projects that have been approved by SUB_PMO\n    if (user.role === UserRole.MAIN_PMO && \n        ((project as any).approvalStatus === ApprovalStatus.SUB_PMO_APPROVED)) {\n      return true;\n    }\n    \n    return false;\n  };\n\n  const getStatusLabel = (status: string) => {\n    switch (status) {\n      case 'DRAFT':\n        return t('status.draft');\n      case 'SUBMITTED':\n        return t('status.submitted');\n      case 'SUB_PMO_REVIEW':\n        return t('status.subPmoReview');\n      case 'SUB_PMO_APPROVED':\n        return t('status.subPmoApproved');\n      case 'MAIN_PMO_REVIEW':\n        return t('status.mainPmoReview');\n      case 'APPROVED':\n        return t('status.approved');\n      case 'REJECTED':\n        return t('status.rejected');\n      case 'CHANGES_REQUESTED':\n        return t('status.changesRequested');\n      default:\n        return status;\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'DRAFT':\n        return 'default';\n      case 'SUBMITTED':\n      case 'SUB_PMO_REVIEW':\n      case 'MAIN_PMO_REVIEW':\n        return 'info';\n      case 'SUB_PMO_APPROVED':\n        return 'secondary';\n      case 'APPROVED':\n        return 'success';\n      case 'REJECTED':\n        return 'error';\n      case 'CHANGES_REQUESTED':\n        return 'warning';\n      default:\n        return 'default';\n    }\n  };\n\n  const renderApprovalsTable = (items: Project[]) => {\n    if (items.length === 0) {\n      return (\n        <Paper sx={{ p: 3, textAlign: 'center' }}>\n          <Typography color=\"textSecondary\">\n            {t('approvals.noItemsFound')}\n          </Typography>\n        </Paper>\n      );\n    }\n\n    return (\n      <TableContainer component={Paper}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>{t('project.name')}</TableCell>\n              <TableCell>{t('project.department')}</TableCell>\n              <TableCell>{t('project.projectManager')}</TableCell>\n              <TableCell>{t('project.submittedDate')}</TableCell>\n              <TableCell>{t('project.status')}</TableCell>\n              <TableCell align=\"right\">{t('common.actions')}</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {items.map((project) => (\n              <TableRow key={project.id}>\n                <TableCell>{project.name}</TableCell>\n                <TableCell>{project.department?.name || t('common.none')}</TableCell>\n                <TableCell>\n                  {project.projectManager ? \n                    `${project.projectManager.firstName} ${project.projectManager.lastName}` : \n                    t('common.unassigned')}\n                </TableCell>\n                <TableCell>{formatDate(project.createdAt || '')}</TableCell>\n                <TableCell>\n                  <Chip \n                    label={getStatusLabel((project as any).approvalStatus || String(project.status))} \n                    color={getStatusColor((project as any).approvalStatus || String(project.status)) as any} \n                    size=\"small\" \n                  />\n                </TableCell>\n                <TableCell align=\"right\">\n                  <Button\n                    size=\"small\"\n                    onClick={() => handleViewProject(project.id)}\n                    sx={{ mr: 1 }}\n                  >\n                    {t('common.view')}\n                  </Button>\n                  \n                  {canApprove(project) && tabValue === 0 && (\n                    <>\n                      <Button\n                        size=\"small\"\n                        color=\"success\"\n                        startIcon={<ApproveIcon />}\n                        onClick={() => handleOpenDialog(project, 'approve')}\n                        sx={{ mr: 1 }}\n                      >\n                        {t('approvals.approve')}\n                      </Button>\n                      \n                      <Button\n                        size=\"small\"\n                        color=\"error\"\n                        startIcon={<RejectIcon />}\n                        onClick={() => handleOpenDialog(project, 'reject')}\n                      >\n                        {t('approvals.reject')}\n                      </Button>\n                    </>\n                  )}\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    );\n  };\n\n  return (\n    <Container maxWidth=\"xl\">\n      <Box sx={{ py: 4 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n          <Typography variant=\"h4\" component=\"h1\">\n            {t('approvals.title', 'Project Approvals')}\n          </Typography>\n          \n          <IconButton onClick={handleRefresh} disabled={loading}>\n            {loading ? <CircularProgress size={24} /> : <RefreshIcon />}\n          </IconButton>\n        </Box>\n        \n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 3 }}>\n            {error}\n          </Alert>\n        )}\n        \n        <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n          <Tabs value={tabValue} onChange={handleTabChange}>\n            <Tab label={t('approvals.pending', 'Pending')} />\n            <Tab label={t('approvals.completed', 'Completed')} />\n          </Tabs>\n        </Box>\n        \n        <TabPanel value={tabValue} index={0}>\n          {loading ? (\n            <Box sx={{ display: 'flex', justifyContent: 'center', p: 4 }}>\n              <CircularProgress />\n            </Box>\n          ) : (\n            renderApprovalsTable(pendingApprovals)\n          )}\n        </TabPanel>\n        \n        <TabPanel value={tabValue} index={1}>\n          {loading ? (\n            <Box sx={{ display: 'flex', justifyContent: 'center', p: 4 }}>\n              <CircularProgress />\n            </Box>\n          ) : (\n            renderApprovalsTable(completedApprovals)\n          )}\n        </TabPanel>\n      </Box>\n      \n      {/* Approval/Rejection Dialog */}\n      <Dialog open={openDialog} onClose={handleCloseDialog} maxWidth=\"md\" fullWidth>\n        <DialogTitle>\n          {dialogType === 'approve' ? t('approvals.approveProject') : t('approvals.rejectProject')}\n          <IconButton\n            aria-label=\"close\"\n            onClick={handleCloseDialog}\n            sx={{ position: 'absolute', right: 8, top: 8 }}\n          >\n            <CloseIcon />\n          </IconButton>\n        </DialogTitle>\n        \n        <DialogContent>\n          {selectedProject && (\n            <>\n              <Box sx={{ mb: 3 }}>\n                <Typography variant=\"h6\">{selectedProject.name}</Typography>\n                <Typography variant=\"body2\" color=\"textSecondary\">\n                  {t('project.id')}: {selectedProject.id}\n                </Typography>\n              </Box>\n              \n              <Divider sx={{ my: 2 }} />\n              \n              <TextField\n                label={t('approvals.comments')}\n                multiline\n                rows={4}\n                fullWidth\n                variant=\"outlined\"\n                value={comments}\n                onChange={(e) => setComments(e.target.value)}\n                sx={{ mb: 3 }}\n              />\n              \n              {dialogType === 'reject' && (\n                <TextField\n                  label={t('approvals.rejectionReason')}\n                  multiline\n                  rows={4}\n                  fullWidth\n                  variant=\"outlined\"\n                  value={rejectReason}\n                  onChange={(e) => setRejectReason(e.target.value)}\n                  required\n                  error={submitError?.includes('reason')}\n                  helperText={submitError?.includes('reason') ? t('approvals.reasonRequired') : t('approvals.reasonHelp')}\n                />\n              )}\n              \n              {submitError && !submitError.includes('reason') && (\n                <Alert severity=\"error\" sx={{ mt: 2 }}>\n                  {submitError}\n                </Alert>\n              )}\n            </>\n          )}\n        </DialogContent>\n        \n        <DialogActions>\n          <Button onClick={handleCloseDialog}>{t('common.cancel')}</Button>\n          <Button \n            onClick={handleApproveReject}\n            color={dialogType === 'approve' ? 'success' : 'error'}\n            variant=\"contained\"\n            disabled={submitLoading || (dialogType === 'reject' && !rejectReason.trim())}\n          >\n            {submitLoading ? (\n              <CircularProgress size={24} />\n            ) : dialogType === 'approve' ? (\n              t('approvals.approve')\n            ) : (\n              t('approvals.reject')\n            )}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Container>\n  );\n};\n\nexport default ApprovalsPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}