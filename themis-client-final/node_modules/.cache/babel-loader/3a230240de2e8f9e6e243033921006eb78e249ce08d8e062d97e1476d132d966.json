{"ast":null,"code":"import React,{useState,useEffect}from'react';import FormWithValidation,{FormTextField,FormSelect,FormDatePicker}from'../shared/FormWithValidation';import{Box,Paper,Typography,Stepper,Step,StepLabel,Button,Divider,Dialog,DialogActions,DialogContent,DialogContentText,DialogTitle,InputAdornment,Alert,Snackbar,FormControlLabel,Switch}from'@mui/material';import{GridContainer,GridItem}from'../common/MuiGridWrapper';import{CalendarMonth as CalendarIcon,Business as BusinessIcon,Person as PersonIcon,PriorityHigh as PriorityIcon,Save as SaveIcon,Delete as DeleteIcon,ArrowBack as ArrowBackIcon,Add as AddIcon}from'@mui/icons-material';import{ProjectPriority,ProjectStatus,UserRole}from'../../types';import{useAuth}from'../../context/AuthContext';import{useTranslation}from'react-i18next';import api from'../../services/api';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";// Define a simple TeamMemberList component for now\nconst TeamMemberList=_ref=>{let{users,selectedMembers,onMembersChange}=_ref;return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Team members selection will be implemented here\"}),/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(AddIcon,{}),variant:\"outlined\",sx:{mt:1},children:\"Add Team Member\"})]});};// Define a simple MilestoneList component for now\nconst MilestoneList=_ref2=>{let{milestones,onMilestonesChange}=_ref2;return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Milestones will be implemented here\"}),/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(AddIcon,{}),variant:\"outlined\",sx:{mt:1},children:\"Add Milestone\"})]});};// Define a simple BudgetForm component for now\nconst BudgetForm=_ref3=>{let{items,onItemsChange}=_ref3;return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Budget items will be implemented here\"}),/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(AddIcon,{}),variant:\"outlined\",sx:{mt:1},children:\"Add Budget Item\"})]});};// Enum for audit actions\nvar AuditAction=/*#__PURE__*/function(AuditAction){AuditAction[\"CREATE\"]=\"CREATE\";AuditAction[\"UPDATE\"]=\"UPDATE\";AuditAction[\"DELETE\"]=\"DELETE\";AuditAction[\"LOGIN\"]=\"LOGIN\";AuditAction[\"LOGOUT\"]=\"LOGOUT\";AuditAction[\"APPROVE\"]=\"APPROVE\";AuditAction[\"REJECT\"]=\"REJECT\";AuditAction[\"SUBMIT\"]=\"SUBMIT\";return AuditAction;}(AuditAction||{});// Update the interface\n// Extend the audit logs API interface\n// Add the createAuditLog function to the auditLogs API\napi.auditLogs.createAuditLog=async(auditData,token)=>{console.log('Creating audit log:',auditData);// This is a stub - in a real implementation, it would call the API\nreturn{success:true};};// Continue with the component\nconst steps=['Basic Information','Team & Timeline','Budget & Documents'];const LegacyProjectForm=_ref4=>{let{departments,users,onCancel}=_ref4;const{token,user}=useAuth();const{t}=useTranslation();const navigate=useNavigate();const[isSubmitting,setIsSubmitting]=useState(false);const[submitError,setSubmitError]=useState(null);const[activeStep,setActiveStep]=useState(0);const[projectData,setProjectData]=useState({name:'',description:'',departmentId:'',startDate:new Date(),endDate:new Date(Date.now()+30*24*60*60*1000),status:ProjectStatus.PLANNING,projectManagerId:'',budget:0,goalsLink:'',teamMembers:[],client:'',priority:ProjectPriority.MEDIUM,legacyImport:true,milestones:[],budgetItems:[]});const[saveAsDraft,setSaveAsDraft]=useState(false);const[openDeleteDialog,setOpenDeleteDialog]=useState(false);const[snackbarOpen,setSnackbarOpen]=useState(false);const[snackbarMessage,setSnackbarMessage]=useState('');const[teamMembers,setTeamMembers]=useState([]);const[milestones,setMilestones]=useState([]);const[budgetItems,setBudgetItems]=useState([]);// Check if user has appropriate role (SUB_PMO, MAIN_PMO, or ADMIN)\nconst hasPermission=(user===null||user===void 0?void 0:user.role)===UserRole.SUB_PMO||(user===null||user===void 0?void 0:user.role)===UserRole.MAIN_PMO||(user===null||user===void 0?void 0:user.role)===UserRole.ADMIN;// Redirect if user doesn't have permission\nuseEffect(()=>{if(!hasPermission){navigate('/dashboard');}},[hasPermission,navigate]);// Default values for the form\nconst defaultValues={name:'',description:'',departmentId:'',startDate:new Date(),endDate:new Date(Date.now()+30*24*60*60*1000),// Default to 30 days from now\nstatus:ProjectStatus.PLANNING,projectManagerId:'',budget:0,goalsLink:'',teamMembers:[],client:'',priority:ProjectPriority.MEDIUM,legacyImport:true,// Default to true for legacy import\nmilestones:[],budgetItems:[]};// Get project managers\nconst getProjectManagers=()=>{return users.filter(user=>user.role===UserRole.PROJECT_MANAGER||user.role===UserRole.SUB_PMO||user.role===UserRole.MAIN_PMO).map(pm=>({value:pm.id,label:`${pm.firstName} ${pm.lastName}`}));};// Handle closing the snackbar\nconst handleSnackbarClose=()=>{setSnackbarOpen(false);};// Custom function to create audit log since the API endpoint might be missing\nconst createProjectAuditLog=async(projectId,details,metadata)=>{try{// In a real implementation, this would call api.auditLogs.createAuditLog\n// For now, we'll just log the information\nconsole.log('Creating audit log:',{action:AuditAction.CREATE,entityType:'Project',entityId:projectId,details,metadata});// Return a success response\nreturn{success:true};}catch(error){console.error('Error creating audit log:',error);return{success:false};}};// Function to save as draft\nconst saveProjectAsDraft=async data=>{setIsSubmitting(true);setSubmitError(null);try{const projectDataToSave={...data,startDate:data.startDate.toISOString(),endDate:data.endDate.toISOString(),client:data.client.trim(),budget:data.budget,teamMembers:teamMembers,milestones:milestones,budgetItems:budgetItems,priority:data.priority,legacyImport:true,isDraft:true,status:ProjectStatus.PLANNING};const projectResponse=await api.projects.createProject(projectDataToSave,token||'');if(projectResponse.data){// Create audit log for the legacy import\nawait createProjectAuditLog(projectResponse.data.id,`Manual legacy import created as draft by ${user===null||user===void 0?void 0:user.firstName} ${user===null||user===void 0?void 0:user.lastName}`,{legacyImport:true,createdBy:user===null||user===void 0?void 0:user.id,createdAt:new Date().toISOString()});setSnackbarMessage('Legacy project saved as draft');setSnackbarOpen(true);// Redirect to projects list after a short delay\nsetTimeout(()=>{navigate('/projects');},2000);}else{setSubmitError('Failed to save project draft. Please try again.');}}catch(error){console.error('Error saving project draft:',error);setSubmitError('An error occurred while saving the project draft.');}finally{setIsSubmitting(false);}};// Function to publish the project\nconst publishProject=async data=>{setIsSubmitting(true);setSubmitError(null);try{const projectDataToSave={...data,startDate:data.startDate.toISOString(),endDate:data.endDate.toISOString(),client:data.client.trim(),budget:data.budget,teamMembers:teamMembers,milestones:milestones,budgetItems:budgetItems,priority:data.priority,legacyImport:true,isDraft:false,status:data.status};const projectResponse=await api.projects.createProject(projectDataToSave,token||'');if(projectResponse.data){// Create audit log for the legacy import\nawait createProjectAuditLog(projectResponse.data.id,`Manual legacy import published by ${user===null||user===void 0?void 0:user.firstName} ${user===null||user===void 0?void 0:user.lastName}`,{legacyImport:true,createdBy:user===null||user===void 0?void 0:user.id,createdAt:new Date().toISOString()});setSnackbarMessage('Legacy project published successfully');setSnackbarOpen(true);// Redirect to projects list after a short delay\nsetTimeout(()=>{navigate('/projects');},2000);}else{setSubmitError('Failed to publish project. Please try again.');}}catch(error){console.error('Error publishing project:',error);setSubmitError('An error occurred while publishing the project.');}finally{setIsSubmitting(false);}};// Handle team members update\nconst handleTeamMembersUpdate=members=>{setTeamMembers(members);};// Handle milestones update\nconst handleMilestonesUpdate=milestoneList=>{setMilestones(milestoneList);};// Handle budget items update\nconst handleBudgetItemsUpdate=items=>{setBudgetItems(items);};// Form validation\nconst validateForm=data=>{const errors={};if(!data.name){errors.name='Project name is required';}if(!data.departmentId){errors.departmentId='Department is required';}if(!data.projectManagerId){errors.projectManagerId='Project manager is required';}if(!data.startDate){errors.startDate='Start date is required';}if(!data.endDate){errors.endDate='End date is required';}else if(data.endDate<data.startDate){errors.endDate='End date must be after start date';}if(!data.status){errors.status='Status is required';}return errors;};// Handle step navigation\nconst handleNext=()=>{setActiveStep(prevActiveStep=>prevActiveStep+1);};const handleBack=()=>{setActiveStep(prevActiveStep=>prevActiveStep-1);};// Handle form submission on each step\nconst handleStepSubmit=data=>{const errors=validateForm(data);if(Object.keys(errors).length===0){setProjectData(prevData=>({...prevData,...data}));if(activeStep===steps.length-1){if(saveAsDraft){saveProjectAsDraft({...projectData,...data});}else{publishProject({...projectData,...data});}}else{handleNext();}}else{setSubmitError('Please fix the errors before continuing');}};// Handle deleting the draft\nconst handleDeleteDraft=async()=>{if(!(projectData!==null&&projectData!==void 0&&projectData.id)){setOpenDeleteDialog(false);onCancel();return;}try{await api.projects.deleteProject(projectData.id,token||'');setSnackbarMessage('Draft deleted successfully');setSnackbarOpen(true);setOpenDeleteDialog(false);// Redirect to projects list after a short delay\nsetTimeout(()=>{navigate('/projects');},1500);}catch(error){console.error('Error deleting draft:',error);setSnackbarMessage('Failed to delete draft');setSnackbarOpen(true);setOpenDeleteDialog(false);}};// Then update the getStepContent function with proper types\nconst getStepContent=(step,control,errors)=>{switch(step){case 0:return/*#__PURE__*/_jsx(Box,{sx:{p:3,mt:2},children:/*#__PURE__*/_jsxs(GridContainer,{spacing:3,children:[/*#__PURE__*/_jsx(GridItem,{xs:12,children:/*#__PURE__*/_jsx(FormTextField,{name:\"name\",label:t('project.name'),required:true,control:control,errors:errors})}),/*#__PURE__*/_jsx(GridItem,{xs:12,children:/*#__PURE__*/_jsx(FormTextField,{name:\"description\",label:t('project.description'),multiline:true,rows:3,required:true,control:control,errors:errors})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(FormSelect,{name:\"departmentId\",label:t('project.department'),required:true,options:departments.map(dept=>({value:dept.id,label:dept.name})),startIcon:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(BusinessIcon,{color:\"action\"})}),control:control,errors:errors})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(FormSelect,{name:\"projectManagerId\",label:t('project.projectManager'),required:true,options:getProjectManagers(),startIcon:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(PersonIcon,{color:\"action\"})}),control:control,errors:errors})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(FormTextField,{name:\"client\",label:t('project.client'),required:true,control:control,errors:errors})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(FormSelect,{name:\"priority\",label:t('project.priority'),required:true,options:[{value:ProjectPriority.LOW,label:t('projectPriority.LOW')},{value:ProjectPriority.MEDIUM,label:t('projectPriority.MEDIUM')},{value:ProjectPriority.HIGH,label:t('projectPriority.HIGH')},{value:ProjectPriority.CRITICAL,label:t('projectPriority.CRITICAL')}],startIcon:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(PriorityIcon,{color:\"action\"})}),control:control,errors:errors})}),/*#__PURE__*/_jsx(GridItem,{xs:12,children:/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:true,disabled:true}),label:\"Imported from Legacy PMO\"})})]})});case 1:return/*#__PURE__*/_jsx(Box,{sx:{p:3,mt:2},children:/*#__PURE__*/_jsxs(GridContainer,{spacing:3,children:[/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(FormDatePicker,{name:\"startDate\",label:t('project.startDate'),required:true,startIcon:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(CalendarIcon,{color:\"action\"})}),control:control,errors:errors})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(FormDatePicker,{name:\"endDate\",label:t('project.endDate'),required:true,minDate:defaultValues.startDate,startIcon:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(CalendarIcon,{color:\"action\"})}),control:control,errors:errors})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(FormSelect,{name:\"status\",label:t('project.status'),required:true,options:[{value:ProjectStatus.PLANNING,label:t('projectStatus.PLANNING')},{value:ProjectStatus.IN_PROGRESS,label:t('projectStatus.IN_PROGRESS')},{value:ProjectStatus.ON_HOLD,label:t('projectStatus.ON_HOLD')},{value:ProjectStatus.COMPLETED,label:t('projectStatus.COMPLETED')},{value:ProjectStatus.CANCELLED,label:t('projectStatus.CANCELLED')}],control:control,errors:errors})}),/*#__PURE__*/_jsxs(GridItem,{xs:12,children:[/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Team Members\"}),/*#__PURE__*/_jsx(TeamMemberList,{users:users,selectedMembers:teamMembers,onMembersChange:handleTeamMembersUpdate})]}),/*#__PURE__*/_jsxs(GridItem,{xs:12,children:[/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Milestones\"}),/*#__PURE__*/_jsx(MilestoneList,{milestones:milestones,onMilestonesChange:handleMilestonesUpdate})]})]})});case 2:return/*#__PURE__*/_jsx(Box,{sx:{p:3,mt:2},children:/*#__PURE__*/_jsxs(GridContainer,{spacing:3,children:[/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(FormTextField,{name:\"budget\",label:t('project.budget'),type:\"number\",required:true,control:control,errors:errors})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(FormTextField,{name:\"goalsLink\",label:t('project.goalsLink'),control:control,errors:errors})}),/*#__PURE__*/_jsxs(GridItem,{xs:12,children:[/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Budget Items\"}),/*#__PURE__*/_jsx(BudgetForm,{items:budgetItems,onItemsChange:handleBudgetItemsUpdate})]})]})});default:return'Unknown step';}};if(!hasPermission){return/*#__PURE__*/_jsx(Box,{sx:{p:3},children:/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:\"You do not have permission to access this page.\"})});}return/*#__PURE__*/_jsxs(Box,{sx:{width:'100%',minHeight:'100vh',bgcolor:'background.default',py:4},children:[/*#__PURE__*/_jsxs(Box,{sx:{maxWidth:1200,mx:'auto',px:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",children:\"Add Legacy Project\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(ArrowBackIcon,{}),onClick:onCancel,children:\"Back to Projects\"})]}),/*#__PURE__*/_jsxs(Paper,{sx:{p:3,mb:4},children:[/*#__PURE__*/_jsx(Stepper,{activeStep:activeStep,alternativeLabel:true,sx:{mb:4},children:steps.map(label=>/*#__PURE__*/_jsx(Step,{children:/*#__PURE__*/_jsx(StepLabel,{children:label})},label))}),/*#__PURE__*/_jsx(FormWithValidation,{defaultValues:defaultValues,onSubmit:handleStepSubmit,submitButtonText:activeStep===steps.length-1?'Publish Project':'Next',cancelButtonText:activeStep===0?'Cancel':'Back',onCancel:activeStep===0?onCancel:handleBack,isLoading:isSubmitting,error:submitError||undefined,children:(control,errors)=>/*#__PURE__*/_jsxs(_Fragment,{children:[getStepContent(activeStep,control,errors),activeStep===steps.length-1&&/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',mt:3},children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(SaveIcon,{}),onClick:()=>{setSaveAsDraft(true);// Submit form is triggered which will check saveAsDraft flag\n},sx:{mr:1},disabled:isSubmitting,children:\"Save as Draft\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"error\",startIcon:/*#__PURE__*/_jsx(DeleteIcon,{}),onClick:()=>setOpenDeleteDialog(true),disabled:isSubmitting,children:\"Delete Draft\"})]})]})})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:openDeleteDialog,onClose:()=>setOpenDeleteDialog(false),children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Delete Draft Project?\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(DialogContentText,{children:\"Are you sure you want to delete this draft project? This action cannot be undone.\"})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setOpenDeleteDialog(false),children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleDeleteDraft,color:\"error\",children:\"Delete\"})]})]}),/*#__PURE__*/_jsx(Snackbar,{open:snackbarOpen,autoHideDuration:4000,onClose:handleSnackbarClose,message:snackbarMessage})]});};export default LegacyProjectForm;","map":{"version":3,"names":["React","useState","useEffect","FormWithValidation","FormTextField","FormSelect","FormDatePicker","Box","Paper","Typography","Stepper","Step","StepLabel","Button","Divider","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","InputAdornment","Alert","Snackbar","FormControlLabel","Switch","GridContainer","GridItem","CalendarMonth","CalendarIcon","Business","BusinessIcon","Person","PersonIcon","PriorityHigh","PriorityIcon","Save","SaveIcon","Delete","DeleteIcon","ArrowBack","ArrowBackIcon","Add","AddIcon","ProjectPriority","ProjectStatus","UserRole","useAuth","useTranslation","api","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TeamMemberList","_ref","users","selectedMembers","onMembersChange","children","variant","color","startIcon","sx","mt","MilestoneList","_ref2","milestones","onMilestonesChange","BudgetForm","_ref3","items","onItemsChange","AuditAction","auditLogs","createAuditLog","auditData","token","console","log","success","steps","LegacyProjectForm","_ref4","departments","onCancel","user","t","navigate","isSubmitting","setIsSubmitting","submitError","setSubmitError","activeStep","setActiveStep","projectData","setProjectData","name","description","departmentId","startDate","Date","endDate","now","status","PLANNING","projectManagerId","budget","goalsLink","teamMembers","client","priority","MEDIUM","legacyImport","budgetItems","saveAsDraft","setSaveAsDraft","openDeleteDialog","setOpenDeleteDialog","snackbarOpen","setSnackbarOpen","snackbarMessage","setSnackbarMessage","setTeamMembers","setMilestones","setBudgetItems","hasPermission","role","SUB_PMO","MAIN_PMO","ADMIN","defaultValues","getProjectManagers","filter","PROJECT_MANAGER","map","pm","value","id","label","firstName","lastName","handleSnackbarClose","createProjectAuditLog","projectId","details","metadata","action","CREATE","entityType","entityId","error","saveProjectAsDraft","data","projectDataToSave","toISOString","trim","isDraft","projectResponse","projects","createProject","createdBy","createdAt","setTimeout","publishProject","handleTeamMembersUpdate","members","handleMilestonesUpdate","milestoneList","handleBudgetItemsUpdate","validateForm","errors","handleNext","prevActiveStep","handleBack","handleStepSubmit","Object","keys","length","prevData","handleDeleteDraft","deleteProject","getStepContent","step","control","p","spacing","xs","required","multiline","rows","sm","options","dept","position","LOW","HIGH","CRITICAL","checked","disabled","minDate","IN_PROGRESS","ON_HOLD","COMPLETED","CANCELLED","my","gutterBottom","type","severity","width","minHeight","bgcolor","py","maxWidth","mx","px","display","justifyContent","alignItems","mb","component","onClick","alternativeLabel","onSubmit","submitButtonText","cancelButtonText","isLoading","undefined","mr","open","onClose","autoHideDuration","message"],"sources":["/Users/hassanalsahli/Desktop/Themis/themis-client-final/src/components/Project/LegacyProjectForm.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useForm, Control, FieldErrors } from 'react-hook-form';\nimport FormWithValidation, { \n  FormTextField, \n  FormSelect, \n  FormDatePicker\n} from '../shared/FormWithValidation';\nimport { \n  Box, \n  Paper, \n  Typography, \n  Stepper, \n  Step, \n  StepLabel, \n  Button, \n  Divider, \n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  InputAdornment, \n  IconButton,\n  Alert,\n  Snackbar,\n  CircularProgress,\n  FormControlLabel,\n  Switch\n} from '@mui/material';\nimport { GridContainer, GridItem } from '../common/MuiGridWrapper';\nimport { \n  CalendarMonth as CalendarIcon,\n  Business as BusinessIcon,\n  Person as PersonIcon,\n  PriorityHigh as PriorityIcon,\n  Save as SaveIcon,\n  Delete as DeleteIcon,\n  Publish as PublishIcon,\n  ArrowBack as ArrowBackIcon,\n  Add as AddIcon\n} from '@mui/icons-material';\nimport { Department, Project, ProjectPriority, ProjectStatus, User, UserRole } from '../../types';\nimport { useAuth } from '../../context/AuthContext';\nimport { useTranslation } from 'react-i18next';\nimport api from '../../services/api';\nimport { useNavigate } from 'react-router-dom';\nimport { canManageProjects } from '../../utils/permissions';\n\n// Define a simple TeamMemberList component for now\nconst TeamMemberList: React.FC<{\n  users: User[];\n  selectedMembers: string[];\n  onMembersChange: (members: string[]) => void;\n}> = ({ users, selectedMembers, onMembersChange }) => {\n  return (\n    <Box>\n      <Typography variant=\"body2\" color=\"text.secondary\">\n        Team members selection will be implemented here\n      </Typography>\n      {/* Placeholder UI for team member selection */}\n      <Button startIcon={<AddIcon />} variant=\"outlined\" sx={{ mt: 1 }}>\n        Add Team Member\n      </Button>\n    </Box>\n  );\n};\n\n// Define a simple MilestoneList component for now\nconst MilestoneList: React.FC<{\n  milestones: any[];\n  onMilestonesChange: (milestones: any[]) => void;\n}> = ({ milestones, onMilestonesChange }) => {\n  return (\n    <Box>\n      <Typography variant=\"body2\" color=\"text.secondary\">\n        Milestones will be implemented here\n      </Typography>\n      {/* Placeholder UI for milestones */}\n      <Button startIcon={<AddIcon />} variant=\"outlined\" sx={{ mt: 1 }}>\n        Add Milestone\n      </Button>\n    </Box>\n  );\n};\n\n// Define a simple BudgetForm component for now\nconst BudgetForm: React.FC<{\n  items: any[];\n  onItemsChange: (items: any[]) => void;\n}> = ({ items, onItemsChange }) => {\n  return (\n    <Box>\n      <Typography variant=\"body2\" color=\"text.secondary\">\n        Budget items will be implemented here\n      </Typography>\n      {/* Placeholder UI for budget items */}\n      <Button startIcon={<AddIcon />} variant=\"outlined\" sx={{ mt: 1 }}>\n        Add Budget Item\n      </Button>\n    </Box>\n  );\n};\n\n// Enum for audit actions\nenum AuditAction {\n  CREATE = 'CREATE',\n  UPDATE = 'UPDATE',\n  DELETE = 'DELETE',\n  LOGIN = 'LOGIN',\n  LOGOUT = 'LOGOUT',\n  APPROVE = 'APPROVE',\n  REJECT = 'REJECT',\n  SUBMIT = 'SUBMIT'\n}\n\n// Update the interface\ninterface LegacyProjectFormData {\n  name: string;\n  description: string;\n  departmentId: string;\n  startDate: Date;\n  endDate: Date;\n  status: ProjectStatus;\n  projectManagerId: string;\n  budget: number;\n  goalsLink: string;\n  teamMembers: string[];\n  client: string;\n  priority: ProjectPriority;\n  legacyImport: boolean;\n  milestones: any[];\n  budgetItems: any[];\n  id?: string; // Add optional id property\n}\n\n// Extend the audit logs API interface\ninterface AuditLogAPI {\n  getAuditLogs: (token: string) => Promise<any>;\n  getAuditLogById: (logId: string, token: string) => Promise<any>;\n  createAuditLog: (auditData: any, token: string) => Promise<any>;\n}\n\n// Add the createAuditLog function to the auditLogs API\n(api.auditLogs as AuditLogAPI).createAuditLog = async (auditData: any, token: string) => {\n  console.log('Creating audit log:', auditData);\n  // This is a stub - in a real implementation, it would call the API\n  return { success: true };\n};\n\n// Continue with the component\ninterface LegacyProjectFormProps {\n  departments: Department[];\n  users: User[];\n  onCancel: () => void;\n}\n\nconst steps = ['Basic Information', 'Team & Timeline', 'Budget & Documents'];\n\nconst LegacyProjectForm: React.FC<LegacyProjectFormProps> = ({\n  departments,\n  users,\n  onCancel\n}) => {\n  const { token, user } = useAuth();\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitError, setSubmitError] = useState<string | null>(null);\n  const [activeStep, setActiveStep] = useState(0);\n  const [projectData, setProjectData] = useState<LegacyProjectFormData>({\n    name: '',\n    description: '',\n    departmentId: '',\n    startDate: new Date(),\n    endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\n    status: ProjectStatus.PLANNING,\n    projectManagerId: '',\n    budget: 0,\n    goalsLink: '',\n    teamMembers: [],\n    client: '',\n    priority: ProjectPriority.MEDIUM,\n    legacyImport: true,\n    milestones: [],\n    budgetItems: []\n  });\n  const [saveAsDraft, setSaveAsDraft] = useState(false);\n  const [openDeleteDialog, setOpenDeleteDialog] = useState(false);\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const [snackbarMessage, setSnackbarMessage] = useState('');\n  const [teamMembers, setTeamMembers] = useState<string[]>([]);\n  const [milestones, setMilestones] = useState<any[]>([]);\n  const [budgetItems, setBudgetItems] = useState<any[]>([]);\n\n  // Check if user has appropriate role (SUB_PMO, MAIN_PMO, or ADMIN)\n  const hasPermission = user?.role === UserRole.SUB_PMO || \n                       user?.role === UserRole.MAIN_PMO || \n                       user?.role === UserRole.ADMIN;\n\n  // Redirect if user doesn't have permission\n  useEffect(() => {\n    if (!hasPermission) {\n      navigate('/dashboard');\n    }\n  }, [hasPermission, navigate]);\n\n  // Default values for the form\n  const defaultValues: LegacyProjectFormData = {\n    name: '',\n    description: '',\n    departmentId: '',\n    startDate: new Date(),\n    endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000), // Default to 30 days from now\n    status: ProjectStatus.PLANNING,\n    projectManagerId: '',\n    budget: 0,\n    goalsLink: '',\n    teamMembers: [],\n    client: '',\n    priority: ProjectPriority.MEDIUM,\n    legacyImport: true, // Default to true for legacy import\n    milestones: [],\n    budgetItems: []\n  };\n\n  // Get project managers\n  const getProjectManagers = () => {\n    return users\n      .filter(user => \n        user.role === UserRole.PROJECT_MANAGER || \n        user.role === UserRole.SUB_PMO || \n        user.role === UserRole.MAIN_PMO\n      )\n      .map(pm => ({\n        value: pm.id,\n        label: `${pm.firstName} ${pm.lastName}`\n      }));\n  };\n\n  // Handle closing the snackbar\n  const handleSnackbarClose = () => {\n    setSnackbarOpen(false);\n  };\n\n  // Custom function to create audit log since the API endpoint might be missing\n  const createProjectAuditLog = async (projectId: string, details: string, metadata: any) => {\n    try {\n      // In a real implementation, this would call api.auditLogs.createAuditLog\n      // For now, we'll just log the information\n      console.log('Creating audit log:', {\n        action: AuditAction.CREATE,\n        entityType: 'Project',\n        entityId: projectId,\n        details,\n        metadata\n      });\n      // Return a success response\n      return { success: true };\n    } catch (error) {\n      console.error('Error creating audit log:', error);\n      return { success: false };\n    }\n  };\n\n  // Function to save as draft\n  const saveProjectAsDraft = async (data: LegacyProjectFormData) => {\n    setIsSubmitting(true);\n    setSubmitError(null);\n    \n    try {\n      const projectDataToSave = {\n        ...data,\n        startDate: data.startDate.toISOString(),\n        endDate: data.endDate.toISOString(),\n        client: data.client.trim(),\n        budget: data.budget,\n        teamMembers: teamMembers,\n        milestones: milestones,\n        budgetItems: budgetItems,\n        priority: data.priority,\n        legacyImport: true,\n        isDraft: true,\n        status: ProjectStatus.PLANNING\n      };\n      \n      const projectResponse = await api.projects.createProject(projectDataToSave, token || '');\n      \n      if (projectResponse.data) {\n        // Create audit log for the legacy import\n        await createProjectAuditLog(\n          projectResponse.data.id,\n          `Manual legacy import created as draft by ${user?.firstName} ${user?.lastName}`,\n          {\n            legacyImport: true,\n            createdBy: user?.id,\n            createdAt: new Date().toISOString()\n          }\n        );\n        \n        setSnackbarMessage('Legacy project saved as draft');\n        setSnackbarOpen(true);\n        \n        // Redirect to projects list after a short delay\n        setTimeout(() => {\n          navigate('/projects');\n        }, 2000);\n      } else {\n        setSubmitError('Failed to save project draft. Please try again.');\n      }\n    } catch (error) {\n      console.error('Error saving project draft:', error);\n      setSubmitError('An error occurred while saving the project draft.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Function to publish the project\n  const publishProject = async (data: LegacyProjectFormData) => {\n    setIsSubmitting(true);\n    setSubmitError(null);\n    \n    try {\n      const projectDataToSave = {\n        ...data,\n        startDate: data.startDate.toISOString(),\n        endDate: data.endDate.toISOString(),\n        client: data.client.trim(),\n        budget: data.budget,\n        teamMembers: teamMembers,\n        milestones: milestones,\n        budgetItems: budgetItems,\n        priority: data.priority,\n        legacyImport: true,\n        isDraft: false,\n        status: data.status\n      };\n      \n      const projectResponse = await api.projects.createProject(projectDataToSave, token || '');\n      \n      if (projectResponse.data) {\n        // Create audit log for the legacy import\n        await createProjectAuditLog(\n          projectResponse.data.id,\n          `Manual legacy import published by ${user?.firstName} ${user?.lastName}`,\n          {\n            legacyImport: true,\n            createdBy: user?.id,\n            createdAt: new Date().toISOString()\n          }\n        );\n        \n        setSnackbarMessage('Legacy project published successfully');\n        setSnackbarOpen(true);\n        \n        // Redirect to projects list after a short delay\n        setTimeout(() => {\n          navigate('/projects');\n        }, 2000);\n      } else {\n        setSubmitError('Failed to publish project. Please try again.');\n      }\n    } catch (error) {\n      console.error('Error publishing project:', error);\n      setSubmitError('An error occurred while publishing the project.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Handle team members update\n  const handleTeamMembersUpdate = (members: string[]) => {\n    setTeamMembers(members);\n  };\n\n  // Handle milestones update\n  const handleMilestonesUpdate = (milestoneList: any[]) => {\n    setMilestones(milestoneList);\n  };\n\n  // Handle budget items update\n  const handleBudgetItemsUpdate = (items: any[]) => {\n    setBudgetItems(items);\n  };\n\n  // Form validation\n  const validateForm = (data: LegacyProjectFormData) => {\n    const errors: Partial<Record<keyof LegacyProjectFormData, string>> = {};\n    \n    if (!data.name) {\n      errors.name = 'Project name is required';\n    }\n    \n    if (!data.departmentId) {\n      errors.departmentId = 'Department is required';\n    }\n    \n    if (!data.projectManagerId) {\n      errors.projectManagerId = 'Project manager is required';\n    }\n    \n    if (!data.startDate) {\n      errors.startDate = 'Start date is required';\n    }\n    \n    if (!data.endDate) {\n      errors.endDate = 'End date is required';\n    } else if (data.endDate < data.startDate) {\n      errors.endDate = 'End date must be after start date';\n    }\n    \n    if (!data.status) {\n      errors.status = 'Status is required';\n    }\n    \n    return errors;\n  };\n\n  // Handle step navigation\n  const handleNext = () => {\n    setActiveStep(prevActiveStep => prevActiveStep + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep(prevActiveStep => prevActiveStep - 1);\n  };\n\n  // Handle form submission on each step\n  const handleStepSubmit = (data: LegacyProjectFormData) => {\n    const errors = validateForm(data);\n    \n    if (Object.keys(errors).length === 0) {\n      setProjectData(prevData => ({ ...prevData, ...data }));\n      \n      if (activeStep === steps.length - 1) {\n        if (saveAsDraft) {\n          saveProjectAsDraft({ ...projectData, ...data });\n        } else {\n          publishProject({ ...projectData, ...data });\n        }\n      } else {\n        handleNext();\n      }\n    } else {\n      setSubmitError('Please fix the errors before continuing');\n    }\n  };\n\n  // Handle deleting the draft\n  const handleDeleteDraft = async () => {\n    if (!projectData?.id) {\n      setOpenDeleteDialog(false);\n      onCancel();\n      return;\n    }\n    \n    try {\n      await api.projects.deleteProject(projectData.id as string, token || '');\n      setSnackbarMessage('Draft deleted successfully');\n      setSnackbarOpen(true);\n      setOpenDeleteDialog(false);\n      \n      // Redirect to projects list after a short delay\n      setTimeout(() => {\n        navigate('/projects');\n      }, 1500);\n    } catch (error) {\n      console.error('Error deleting draft:', error);\n      setSnackbarMessage('Failed to delete draft');\n      setSnackbarOpen(true);\n      setOpenDeleteDialog(false);\n    }\n  };\n\n  // Then update the getStepContent function with proper types\n  const getStepContent = (\n    step: number, \n    control: Control<LegacyProjectFormData>, \n    errors: FieldErrors<LegacyProjectFormData>\n  ): React.ReactNode => {\n    switch (step) {\n      case 0:\n        return (\n          <Box sx={{ p: 3, mt: 2 }}>\n            <GridContainer spacing={3}>\n              <GridItem xs={12}>\n                <FormTextField\n                  name=\"name\"\n                  label={t('project.name')}\n                  required\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12}>\n                <FormTextField\n                  name=\"description\"\n                  label={t('project.description')}\n                  multiline\n                  rows={3}\n                  required\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12} sm={6}>\n                <FormSelect\n                  name=\"departmentId\"\n                  label={t('project.department')}\n                  required\n                  options={departments.map(dept => ({\n                    value: dept.id,\n                    label: dept.name\n                  }))}\n                  startIcon={\n                    <InputAdornment position=\"start\">\n                      <BusinessIcon color=\"action\" />\n                    </InputAdornment>\n                  }\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12} sm={6}>\n                <FormSelect\n                  name=\"projectManagerId\"\n                  label={t('project.projectManager')}\n                  required\n                  options={getProjectManagers()}\n                  startIcon={\n                    <InputAdornment position=\"start\">\n                      <PersonIcon color=\"action\" />\n                    </InputAdornment>\n                  }\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12} sm={6}>\n                <FormTextField\n                  name=\"client\"\n                  label={t('project.client')}\n                  required\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12} sm={6}>\n                <FormSelect\n                  name=\"priority\"\n                  label={t('project.priority')}\n                  required\n                  options={[\n                    { value: ProjectPriority.LOW, label: t('projectPriority.LOW') },\n                    { value: ProjectPriority.MEDIUM, label: t('projectPriority.MEDIUM') },\n                    { value: ProjectPriority.HIGH, label: t('projectPriority.HIGH') },\n                    { value: ProjectPriority.CRITICAL, label: t('projectPriority.CRITICAL') }\n                  ]}\n                  startIcon={\n                    <InputAdornment position=\"start\">\n                      <PriorityIcon color=\"action\" />\n                    </InputAdornment>\n                  }\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12}>\n                <FormControlLabel\n                  control={\n                    <Switch\n                      checked={true}\n                      disabled={true}\n                    />\n                  }\n                  label=\"Imported from Legacy PMO\"\n                />\n              </GridItem>\n            </GridContainer>\n          </Box>\n        );\n      case 1:\n        return (\n          <Box sx={{ p: 3, mt: 2 }}>\n            <GridContainer spacing={3}>\n              <GridItem xs={12} sm={6}>\n                <FormDatePicker\n                  name=\"startDate\"\n                  label={t('project.startDate')}\n                  required\n                  startIcon={\n                    <InputAdornment position=\"start\">\n                      <CalendarIcon color=\"action\" />\n                    </InputAdornment>\n                  }\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12} sm={6}>\n                <FormDatePicker\n                  name=\"endDate\"\n                  label={t('project.endDate')}\n                  required\n                  minDate={defaultValues.startDate}\n                  startIcon={\n                    <InputAdornment position=\"start\">\n                      <CalendarIcon color=\"action\" />\n                    </InputAdornment>\n                  }\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12} sm={6}>\n                <FormSelect\n                  name=\"status\"\n                  label={t('project.status')}\n                  required\n                  options={[\n                    { value: ProjectStatus.PLANNING, label: t('projectStatus.PLANNING') },\n                    { value: ProjectStatus.IN_PROGRESS, label: t('projectStatus.IN_PROGRESS') },\n                    { value: ProjectStatus.ON_HOLD, label: t('projectStatus.ON_HOLD') },\n                    { value: ProjectStatus.COMPLETED, label: t('projectStatus.COMPLETED') },\n                    { value: ProjectStatus.CANCELLED, label: t('projectStatus.CANCELLED') }\n                  ]}\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12}>\n                <Divider sx={{ my: 2 }} />\n                <Typography variant=\"h6\" gutterBottom>\n                  Team Members\n                </Typography>\n                <TeamMemberList \n                  users={users}\n                  selectedMembers={teamMembers}\n                  onMembersChange={handleTeamMembersUpdate}\n                />\n              </GridItem>\n              \n              <GridItem xs={12}>\n                <Divider sx={{ my: 2 }} />\n                <Typography variant=\"h6\" gutterBottom>\n                  Milestones\n                </Typography>\n                <MilestoneList\n                  milestones={milestones}\n                  onMilestonesChange={handleMilestonesUpdate}\n                />\n              </GridItem>\n            </GridContainer>\n          </Box>\n        );\n      case 2:\n        return (\n          <Box sx={{ p: 3, mt: 2 }}>\n            <GridContainer spacing={3}>\n              <GridItem xs={12} sm={6}>\n                <FormTextField\n                  name=\"budget\"\n                  label={t('project.budget')}\n                  type=\"number\"\n                  required\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12} sm={6}>\n                <FormTextField\n                  name=\"goalsLink\"\n                  label={t('project.goalsLink')}\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12}>\n                <Divider sx={{ my: 2 }} />\n                <Typography variant=\"h6\" gutterBottom>\n                  Budget Items\n                </Typography>\n                <BudgetForm\n                  items={budgetItems}\n                  onItemsChange={handleBudgetItemsUpdate}\n                />\n              </GridItem>\n            </GridContainer>\n          </Box>\n        );\n      default:\n        return 'Unknown step';\n    }\n  };\n\n  if (!hasPermission) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <Alert severity=\"error\">\n          You do not have permission to access this page.\n        </Alert>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ width: '100%', minHeight: '100vh', bgcolor: 'background.default', py: 4 }}>\n      <Box sx={{ maxWidth: 1200, mx: 'auto', px: 2 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 4 }}>\n          <Typography variant=\"h4\" component=\"h1\">\n            Add Legacy Project\n          </Typography>\n          <Button \n            variant=\"outlined\" \n            startIcon={<ArrowBackIcon />} \n            onClick={onCancel}\n          >\n            Back to Projects\n          </Button>\n        </Box>\n        \n        <Paper sx={{ p: 3, mb: 4 }}>\n          <Stepper activeStep={activeStep} alternativeLabel sx={{ mb: 4 }}>\n            {steps.map((label) => (\n              <Step key={label}>\n                <StepLabel>{label}</StepLabel>\n              </Step>\n            ))}\n          </Stepper>\n\n          <FormWithValidation<LegacyProjectFormData>\n            defaultValues={defaultValues}\n            onSubmit={handleStepSubmit}\n            submitButtonText={activeStep === steps.length - 1 ? 'Publish Project' : 'Next'}\n            cancelButtonText={activeStep === 0 ? 'Cancel' : 'Back'}\n            onCancel={activeStep === 0 ? onCancel : handleBack}\n            isLoading={isSubmitting}\n            error={submitError || undefined}\n          >\n            {(control, errors) => (\n              <>\n                {getStepContent(activeStep, control, errors)}\n                {activeStep === steps.length - 1 && (\n                  <Box sx={{ display: 'flex', mt: 3 }}>\n                    <Button\n                      variant=\"outlined\"\n                      color=\"primary\"\n                      startIcon={<SaveIcon />}\n                      onClick={() => {\n                        setSaveAsDraft(true);\n                        // Submit form is triggered which will check saveAsDraft flag\n                      }}\n                      sx={{ mr: 1 }}\n                      disabled={isSubmitting}\n                    >\n                      Save as Draft\n                    </Button>\n                    <Button\n                      variant=\"outlined\"\n                      color=\"error\"\n                      startIcon={<DeleteIcon />}\n                      onClick={() => setOpenDeleteDialog(true)}\n                      disabled={isSubmitting}\n                    >\n                      Delete Draft\n                    </Button>\n                  </Box>\n                )}\n              </>\n            )}\n          </FormWithValidation>\n        </Paper>\n      </Box>\n      \n      {/* Delete Draft Confirmation Dialog */}\n      <Dialog\n        open={openDeleteDialog}\n        onClose={() => setOpenDeleteDialog(false)}\n      >\n        <DialogTitle>Delete Draft Project?</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Are you sure you want to delete this draft project? This action cannot be undone.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOpenDeleteDialog(false)}>Cancel</Button>\n          <Button onClick={handleDeleteDraft} color=\"error\">Delete</Button>\n        </DialogActions>\n      </Dialog>\n      \n      {/* Snackbar for notifications */}\n      <Snackbar\n        open={snackbarOpen}\n        autoHideDuration={4000}\n        onClose={handleSnackbarClose}\n        message={snackbarMessage}\n      />\n    </Box>\n  );\n};\n\nexport default LegacyProjectForm; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}