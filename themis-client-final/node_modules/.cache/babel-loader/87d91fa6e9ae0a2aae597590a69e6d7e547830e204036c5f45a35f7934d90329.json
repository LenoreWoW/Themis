{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React from 'react';\nimport { useAuth } from '../../context/AuthContext';\nimport { canCreateProjects, canEditProjects, canApproveProjects, canRequestChanges } from '../../context/AuthContext';\nimport { UserRole } from '../../types';\nimport { Fragment as _Fragment, jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport let Permission = /*#__PURE__*/function (Permission) {\n  Permission[\"CREATE_PROJECT\"] = \"CREATE_PROJECT\";\n  Permission[\"EDIT_PROJECT\"] = \"EDIT_PROJECT\";\n  Permission[\"APPROVE_PROJECT\"] = \"APPROVE_PROJECT\";\n  Permission[\"VIEW_ALL_PROJECTS\"] = \"VIEW_ALL_PROJECTS\";\n  Permission[\"VIEW_DEPARTMENT_PROJECTS\"] = \"VIEW_DEPARTMENT_PROJECTS\";\n  Permission[\"REQUEST_CHANGES\"] = \"REQUEST_CHANGES\";\n  Permission[\"CREATE_TASK\"] = \"CREATE_TASK\";\n  Permission[\"EDIT_TASK\"] = \"EDIT_TASK\";\n  Permission[\"APPROVE_TASK\"] = \"APPROVE_TASK\";\n  Permission[\"SUBMIT_WEEKLY_UPDATE\"] = \"SUBMIT_WEEKLY_UPDATE\";\n  Permission[\"APPROVE_WEEKLY_UPDATE\"] = \"APPROVE_WEEKLY_UPDATE\";\n  return Permission;\n}({});\nconst PermissionGuard = ({\n  permission,\n  isOwnItem = false,\n  fallback = null,\n  children\n}) => {\n  _s();\n  const {\n    user\n  } = useAuth();\n\n  // If no user, no permissions\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: fallback\n    }, void 0, false);\n  }\n  const hasPermission = checkPermission(permission, user.role, isOwnItem);\n  return hasPermission ? /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: children\n  }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: fallback\n  }, void 0, false);\n};\n_s(PermissionGuard, \"9ep4vdl3mBfipxjmc+tQCDhw6Ik=\", false, function () {\n  return [useAuth];\n});\n_c = PermissionGuard;\nexport const usePermission = (permission, isOwnItem = false) => {\n  _s2();\n  const {\n    user\n  } = useAuth();\n  if (!user) {\n    return false;\n  }\n  return checkPermission(permission, user.role, isOwnItem);\n};\n_s2(usePermission, \"9ep4vdl3mBfipxjmc+tQCDhw6Ik=\", false, function () {\n  return [useAuth];\n});\nconst checkPermission = (permission, userRole, isOwnItem) => {\n  if (!userRole) return false;\n  switch (permission) {\n    case Permission.CREATE_PROJECT:\n      return canCreateProjects(userRole);\n    case Permission.EDIT_PROJECT:\n      return canEditProjects(userRole, isOwnItem);\n    case Permission.APPROVE_PROJECT:\n      return canApproveProjects(userRole, isOwnItem);\n    case Permission.REQUEST_CHANGES:\n      return canRequestChanges(userRole);\n    case Permission.CREATE_TASK:\n      return userRole === UserRole.ADMIN || userRole === UserRole.PROJECT_MANAGER || userRole === UserRole.TEAM_LEAD;\n    case Permission.EDIT_TASK:\n      return userRole === UserRole.ADMIN || userRole === UserRole.PROJECT_MANAGER || userRole === UserRole.TEAM_LEAD && isOwnItem || userRole === UserRole.DEVELOPER && isOwnItem;\n    case Permission.APPROVE_TASK:\n      return userRole === UserRole.ADMIN || userRole === UserRole.PROJECT_MANAGER || userRole === UserRole.TEAM_LEAD;\n    case Permission.SUBMIT_WEEKLY_UPDATE:\n      return userRole === UserRole.ADMIN || userRole === UserRole.PROJECT_MANAGER;\n    case Permission.APPROVE_WEEKLY_UPDATE:\n      return userRole === UserRole.ADMIN || userRole === UserRole.MAIN_PMO || userRole === UserRole.SUB_PMO;\n    default:\n      return false;\n  }\n};\nexport default PermissionGuard;\nvar _c;\n$RefreshReg$(_c, \"PermissionGuard\");","map":{"version":3,"names":["React","useAuth","canCreateProjects","canEditProjects","canApproveProjects","canRequestChanges","UserRole","Fragment","_Fragment","jsxDEV","_jsxDEV","Permission","PermissionGuard","permission","isOwnItem","fallback","children","_s","user","hasPermission","checkPermission","role","_c","usePermission","_s2","userRole","CREATE_PROJECT","EDIT_PROJECT","APPROVE_PROJECT","REQUEST_CHANGES","CREATE_TASK","ADMIN","PROJECT_MANAGER","TEAM_LEAD","EDIT_TASK","DEVELOPER","APPROVE_TASK","SUBMIT_WEEKLY_UPDATE","APPROVE_WEEKLY_UPDATE","MAIN_PMO","SUB_PMO","$RefreshReg$"],"sources":["/Users/hassanalsahli/Desktop/Themis/themis-client-final/src/components/shared/PermissionGuard.tsx"],"sourcesContent":["import React from 'react';\nimport { useAuth } from '../../context/AuthContext';\nimport { \n  canCreateProjects, \n  canEditProjects, \n  canApproveProjects, \n  canRequestChanges,\n} from '../../context/AuthContext';\nimport { UserRole } from '../../types';\n\nexport enum Permission {\n  CREATE_PROJECT = 'CREATE_PROJECT',\n  EDIT_PROJECT = 'EDIT_PROJECT',\n  APPROVE_PROJECT = 'APPROVE_PROJECT',\n  VIEW_ALL_PROJECTS = 'VIEW_ALL_PROJECTS',\n  VIEW_DEPARTMENT_PROJECTS = 'VIEW_DEPARTMENT_PROJECTS',\n  REQUEST_CHANGES = 'REQUEST_CHANGES',\n  CREATE_TASK = 'CREATE_TASK',\n  EDIT_TASK = 'EDIT_TASK',\n  APPROVE_TASK = 'APPROVE_TASK',\n  SUBMIT_WEEKLY_UPDATE = 'SUBMIT_WEEKLY_UPDATE',\n  APPROVE_WEEKLY_UPDATE = 'APPROVE_WEEKLY_UPDATE'\n}\n\ninterface PermissionGuardProps {\n  permission: Permission;\n  isOwnItem?: boolean;\n  fallback?: React.ReactNode;\n  children: React.ReactNode;\n}\n\nconst PermissionGuard: React.FC<PermissionGuardProps> = ({ \n  permission, \n  isOwnItem = false,\n  fallback = null, \n  children \n}) => {\n  const { user } = useAuth();\n  \n  // If no user, no permissions\n  if (!user) {\n    return <>{fallback}</>;\n  }\n  \n  const hasPermission = checkPermission(permission, user.role, isOwnItem);\n  \n  return hasPermission ? <>{children}</> : <>{fallback}</>;\n};\n\nexport const usePermission = (permission: Permission, isOwnItem = false): boolean => {\n  const { user } = useAuth();\n  \n  if (!user) {\n    return false;\n  }\n  \n  return checkPermission(permission, user.role, isOwnItem);\n};\n\nconst checkPermission = (permission: Permission, userRole: UserRole | string | undefined, isOwnItem: boolean): boolean => {\n  if (!userRole) return false;\n  \n  switch (permission) {\n    case Permission.CREATE_PROJECT:\n      return canCreateProjects(userRole);\n      \n    case Permission.EDIT_PROJECT:\n      return canEditProjects(userRole, isOwnItem);\n      \n    case Permission.APPROVE_PROJECT:\n      return canApproveProjects(userRole, isOwnItem);\n      \n    case Permission.REQUEST_CHANGES:\n      return canRequestChanges(userRole);\n      \n    case Permission.CREATE_TASK:\n      return userRole === UserRole.ADMIN || \n             userRole === UserRole.PROJECT_MANAGER || \n             userRole === UserRole.TEAM_LEAD;\n      \n    case Permission.EDIT_TASK:\n      return userRole === UserRole.ADMIN || \n             userRole === UserRole.PROJECT_MANAGER || \n             (userRole === UserRole.TEAM_LEAD && isOwnItem) || \n             (userRole === UserRole.DEVELOPER && isOwnItem);\n      \n    case Permission.APPROVE_TASK:\n      return userRole === UserRole.ADMIN || \n             userRole === UserRole.PROJECT_MANAGER || \n             userRole === UserRole.TEAM_LEAD;\n      \n    case Permission.SUBMIT_WEEKLY_UPDATE:\n      return userRole === UserRole.ADMIN || \n             userRole === UserRole.PROJECT_MANAGER;\n      \n    case Permission.APPROVE_WEEKLY_UPDATE:\n      return userRole === UserRole.ADMIN || \n             userRole === UserRole.MAIN_PMO || \n             userRole === UserRole.SUB_PMO;\n      \n    default:\n      return false;\n  }\n};\n\nexport default PermissionGuard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}