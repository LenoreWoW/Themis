{"ast":null,"code":"import React,{useState,useRef}from'react';import{Dialog,DialogTitle,DialogContent,DialogActions,TextField,Button,FormControl,InputLabel,Select,MenuItem,Box,FormHelperText,Typography,IconButton,List,ListItem,ListItemText,Paper,Alert,AlertTitle,ListItemIcon,CircularProgress,Divider,InputAdornment}from'@mui/material';import{AdapterDateFns}from'@mui/x-date-pickers/AdapterDateFns';import{LocalizationProvider,DatePicker}from'@mui/x-date-pickers';import{ProjectStatus,ProjectPriority,ProjectTemplateType}from'../../types';import{useAuth}from'../../context/AuthContext';import CloudUploadIcon from'@mui/icons-material/CloudUpload';import DeleteIcon from'@mui/icons-material/Delete';import DescriptionIcon from'@mui/icons-material/Description';import api from'../../services/api';import{useTranslation}from'react-i18next';import{CalendarMonth as CalendarIcon,Business as BusinessIcon,Person as PersonIcon,PriorityHigh as PriorityIcon}from'@mui/icons-material';import{GridItem,GridContainer}from'../../components/common/MuiGridWrapper';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FILE_SIZE_LIMIT=10*1024*1024;// 10MB\nconst ALLOWED_FILE_TYPES=['application/pdf','application/msword','application/vnd.openxmlformats-officedocument.wordprocessingml.document','application/vnd.ms-excel','application/vnd.openxmlformats-officedocument.spreadsheetml.sheet','image/jpeg','image/png','image/gif','text/plain'];const AddProjectDialog=_ref=>{let{open,onClose,onProjectAdded,departments,users}=_ref;const{token}=useAuth();const fileInputRef=useRef(null);const[isSubmitting,setIsSubmitting]=useState(false);const[formErrors,setFormErrors]=useState({});const[attachments,setAttachments]=useState([]);const[attachmentErrors,setAttachmentErrors]=useState([]);const{t}=useTranslation();const[formData,setFormData]=useState({name:'',description:'',departmentId:'',startDate:new Date(),endDate:new Date(Date.now()+30*24*60*60*1000),// Default to 30 days from now\nstatus:ProjectStatus.PLANNING,projectManagerId:'',budget:0,client:'',teamMembers:[],priority:ProjectPriority.MEDIUM,templateType:ProjectTemplateType.DEFAULT});const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));// Clear error when field is edited\nif(formErrors[name]){setFormErrors(prev=>{const newErrors={...prev};delete newErrors[name];return newErrors;});}};const handleNumberInputChange=e=>{const{name,value}=e.target;const numValue=parseFloat(value);if(!isNaN(numValue)||value===''){setFormData(prev=>({...prev,[name]:value===''?0:numValue}));}};const handleSelectChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));};const handleStartDateChange=date=>{if(date){setFormData(prev=>({...prev,startDate:date}));}};const handleEndDateChange=date=>{if(date){setFormData(prev=>({...prev,endDate:date}));}};const handleFileUploadClick=()=>{if(fileInputRef.current){fileInputRef.current.click();}};const validateFile=file=>{// Check file size\nif(file.size>FILE_SIZE_LIMIT){return`File size exceeds ${FILE_SIZE_LIMIT/(1024*1024)}MB limit`;}// Check file type\nif(!ALLOWED_FILE_TYPES.includes(file.type)){return'File type not supported';}return null;};const handleFileChange=e=>{const files=e.target.files;if(files&&files.length>0){const newFiles=Array.from(files);const errors=[];// Validate each file\nconst validFiles=newFiles.filter((file,index)=>{const error=validateFile(file);if(error){errors.push(`${file.name}: ${error}`);return false;}return true;});setAttachments(prev=>[...prev,...validFiles]);setAttachmentErrors(errors);// Clear the input so the same file can be selected again if needed\ne.target.value='';}};const handleRemoveAttachment=index=>{setAttachments(prev=>prev.filter((_,i)=>i!==index));};// Format file size for display\nconst formatFileSize=bytes=>{if(bytes===0)return'0 Bytes';const k=1024;const sizes=['Bytes','KB','MB','GB'];const i=Math.floor(Math.log(bytes)/Math.log(k));return parseFloat((bytes/Math.pow(k,i)).toFixed(2))+' '+sizes[i];};// Get icon for file type\nconst getFileIcon=fileType=>{if(fileType.includes('pdf')){return/*#__PURE__*/_jsx(DescriptionIcon,{color:\"error\"});}else if(fileType.includes('image')){return/*#__PURE__*/_jsx(DescriptionIcon,{color:\"primary\"});}else if(fileType.includes('word')||fileType.includes('document')){return/*#__PURE__*/_jsx(DescriptionIcon,{color:\"info\"});}else if(fileType.includes('excel')||fileType.includes('sheet')){return/*#__PURE__*/_jsx(DescriptionIcon,{color:\"success\"});}return/*#__PURE__*/_jsx(DescriptionIcon,{});};// Add handler for team members selection\nconst handleTeamMembersChange=event=>{const{value}=event.target;setFormData(prev=>({...prev,teamMembers:typeof value==='string'?value.split(','):value}));};const validateForm=()=>{const errors={};if(!formData.name.trim()){errors.name=t('validation.required');}if(!formData.departmentId){errors.departmentId=t('validation.required');}if(!formData.projectManagerId){errors.projectManagerId=t('validation.required');}if(!formData.client.trim()){errors.client=t('validation.required');}if(formData.startDate>formData.endDate){errors.endDate=t('validation.endDateAfterStart');}if(formData.budget<0){errors.budget=t('validation.invalidNumber');}if(!formData.templateType){errors.templateType='Please select a project template';}setFormErrors(errors);return Object.keys(errors).length===0;};const handleSubmit=async()=>{if(!validateForm()){return;}setIsSubmitting(true);try{var _projectResponse$data;// Find the selected project manager\nconst selectedProjectManager=users.find(u=>u.id===formData.projectManagerId);const selectedDepartment=departments.find(d=>d.id===formData.departmentId);// Create project data\nconst projectData={name:formData.name,description:formData.description,status:formData.status,priority:formData.priority,startDate:formData.startDate.toISOString().split('T')[0],endDate:formData.endDate.toISOString().split('T')[0],department:selectedDepartment,budget:formData.budget,actualCost:0,projectManager:selectedProjectManager,teamMembers:formData.teamMembers,client:formData.client,progress:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),templateType:formData.templateType};// First, clear localStorage to avoid any inconsistencies\nlocalStorage.removeItem('themis_projects');const projectResponse=await api.projects.createProject(projectData,token||'');// If we have attachments, upload them\nif(attachments.length>0&&(_projectResponse$data=projectResponse.data)!==null&&_projectResponse$data!==void 0&&_projectResponse$data.id){const projectId=projectResponse.data.id;const uploadPromises=attachments.map(file=>{const formData=new FormData();formData.append('file',file);return api.projects.uploadAttachment(projectId,formData,token||'');});await Promise.all(uploadPromises);}// Check if we have a project response with data\nif(projectResponse.data){// Force update localStorage before proceeding\nconst existingProjects=JSON.parse(localStorage.getItem('themis_projects')||'[]');localStorage.setItem('themis_projects',JSON.stringify([...existingProjects,{...projectResponse.data,templateType:formData.templateType}]));onProjectAdded(projectResponse.data);onClose();}else{throw new Error('No project data returned from API');}}catch(error){console.error('Error creating project:',error);setFormErrors(prev=>({...prev,submit:'Failed to create project. Please try again.'}));}finally{setIsSubmitting(false);}};const getProjectManagers=()=>{return users.filter(user=>user.role==='PROJECT_MANAGER'||user.role==='SUB_PMO'||user.role==='MAIN_PMO');};return/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:onClose,maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsxs(DialogTitle,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"div\",fontWeight:\"bold\",children:t('project.addNew')}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mt:0.5},children:t('project.fillDetails')})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(Box,{component:\"form\",noValidate:true,autoComplete:\"off\",children:/*#__PURE__*/_jsxs(GridContainer,{spacing:3,children:[/*#__PURE__*/_jsx(GridItem,{xs:12,children:/*#__PURE__*/_jsx(TextField,{label:t('project.name'),name:\"name\",value:formData.name,onChange:handleInputChange,fullWidth:true,required:true,error:!!formErrors.name,helperText:formErrors.name,InputProps:{sx:{borderRadius:1.5}}})}),/*#__PURE__*/_jsx(GridItem,{xs:12,children:/*#__PURE__*/_jsx(TextField,{label:t('project.description'),name:\"description\",value:formData.description,onChange:handleInputChange,fullWidth:true,required:true,multiline:true,rows:3,error:!!formErrors.description,helperText:formErrors.description,InputProps:{sx:{borderRadius:1.5}}})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(LocalizationProvider,{dateAdapter:AdapterDateFns,children:/*#__PURE__*/_jsx(DatePicker,{label:t('project.startDate'),value:formData.startDate,onChange:handleStartDateChange,slotProps:{textField:{fullWidth:true,required:true,error:!!formErrors.startDate,helperText:formErrors.startDate,InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(CalendarIcon,{color:\"action\"})}),sx:{borderRadius:1.5}}}}})})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(LocalizationProvider,{dateAdapter:AdapterDateFns,children:/*#__PURE__*/_jsx(DatePicker,{label:t('project.endDate'),value:formData.endDate,onChange:handleEndDateChange,minDate:formData.startDate||undefined,slotProps:{textField:{fullWidth:true,required:true,error:!!formErrors.endDate,helperText:formErrors.endDate,InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(CalendarIcon,{color:\"action\"})}),sx:{borderRadius:1.5}}}}})})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,required:true,error:!!formErrors.departmentId,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"department-label\",children:t('project.department')}),/*#__PURE__*/_jsx(Select,{name:\"departmentId\",value:formData.departmentId,label:t('project.department'),onChange:handleSelectChange,required:true,startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(BusinessIcon,{color:\"action\"})}),sx:{borderRadius:1.5},children:departments.map(dept=>/*#__PURE__*/_jsx(MenuItem,{value:dept.id,children:dept.name},dept.id))}),formErrors.departmentId&&/*#__PURE__*/_jsx(FormHelperText,{children:formErrors.departmentId})]})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,required:true,error:!!formErrors.projectManagerId,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"manager-label\",children:t('project.projectManager')}),/*#__PURE__*/_jsx(Select,{name:\"projectManagerId\",value:formData.projectManagerId,label:t('project.projectManager'),onChange:handleSelectChange,required:true,startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(PersonIcon,{color:\"action\"})}),sx:{borderRadius:1.5},children:getProjectManagers().map(pm=>/*#__PURE__*/_jsx(MenuItem,{value:pm.id,children:`${pm.firstName} ${pm.lastName}`},pm.id))}),formErrors.projectManagerId&&/*#__PURE__*/_jsx(FormHelperText,{children:formErrors.projectManagerId})]})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{label:t('project.budget'),name:\"budget\",type:\"number\",value:formData.budget,onChange:handleNumberInputChange,fullWidth:true,required:true,error:!!formErrors.budget,helperText:formErrors.budget,InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:\"$\"}),sx:{borderRadius:1.5}}})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"status-label\",children:t('project.status')}),/*#__PURE__*/_jsxs(Select,{name:\"status\",value:formData.status,label:t('project.status'),onChange:handleSelectChange,required:true,sx:{borderRadius:1.5},children:[/*#__PURE__*/_jsx(MenuItem,{value:ProjectStatus.PLANNING,children:t('projectStatus.PLANNING')}),/*#__PURE__*/_jsx(MenuItem,{value:ProjectStatus.IN_PROGRESS,children:t('projectStatus.IN_PROGRESS')}),/*#__PURE__*/_jsx(MenuItem,{value:ProjectStatus.ON_HOLD,children:t('projectStatus.ON_HOLD')})]})]})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"priority-label\",children:t('project.priority')}),/*#__PURE__*/_jsxs(Select,{name:\"priority\",value:formData.priority,label:t('project.priority'),onChange:e=>setFormData(prev=>({...prev,priority:e.target.value})),required:true,startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(PriorityIcon,{color:\"action\"})}),sx:{borderRadius:1.5},children:[/*#__PURE__*/_jsx(MenuItem,{value:ProjectPriority.LOW,children:t('projectPriority.LOW')}),/*#__PURE__*/_jsx(MenuItem,{value:ProjectPriority.MEDIUM,children:t('projectPriority.MEDIUM')}),/*#__PURE__*/_jsx(MenuItem,{value:ProjectPriority.HIGH,children:t('projectPriority.HIGH')}),/*#__PURE__*/_jsx(MenuItem,{value:ProjectPriority.CRITICAL,children:t('projectPriority.CRITICAL')})]})]})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"template-type-label\",children:\"Project Template\"}),/*#__PURE__*/_jsxs(Select,{name:\"templateType\",value:formData.templateType,label:\"Project Template\",onChange:e=>setFormData(prev=>({...prev,templateType:e.target.value})),required:true,sx:{borderRadius:1.5},children:[/*#__PURE__*/_jsx(MenuItem,{value:ProjectTemplateType.DEFAULT,children:\"Default\"}),/*#__PURE__*/_jsx(MenuItem,{value:ProjectTemplateType.ERP,children:\"ERP\"}),/*#__PURE__*/_jsx(MenuItem,{value:ProjectTemplateType.MARKETING,children:\"Marketing\"}),/*#__PURE__*/_jsx(MenuItem,{value:ProjectTemplateType.FINANCE,children:\"Finance\"}),/*#__PURE__*/_jsx(MenuItem,{value:ProjectTemplateType.SUPPLY_CHAIN,children:\"Supply Chain\"}),/*#__PURE__*/_jsx(MenuItem,{value:ProjectTemplateType.WEBSITE,children:\"Website\"}),/*#__PURE__*/_jsx(MenuItem,{value:ProjectTemplateType.INFRASTRUCTURE,children:\"Infrastructure\"})]})]})}),/*#__PURE__*/_jsx(GridItem,{xs:12,children:/*#__PURE__*/_jsx(TextField,{label:t('project.client'),name:\"client\",value:formData.client,onChange:handleInputChange,fullWidth:true,required:true,error:!!formErrors.client,helperText:formErrors.client,InputProps:{sx:{borderRadius:1.5}}})}),/*#__PURE__*/_jsxs(GridItem,{xs:12,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:t('project.attachments')}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",gutterBottom:true,children:t('project.supportedTypes')}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,style:{display:'none'},onChange:handleFileChange,multiple:true,accept:\".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif,.txt\"}),/*#__PURE__*/_jsxs(Paper,{variant:\"outlined\",sx:{p:2,mb:2,textAlign:'center',cursor:'pointer',backgroundColor:'rgba(0, 0, 0, 0.02)'},onClick:handleFileUploadClick,children:[/*#__PURE__*/_jsx(CloudUploadIcon,{color:\"primary\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mt:1},children:t('project.clickToSelect')})]}),attachmentErrors.length>0&&/*#__PURE__*/_jsxs(Alert,{severity:\"error\",sx:{mb:2},children:[/*#__PURE__*/_jsx(AlertTitle,{children:t('project.errorUploading')}),/*#__PURE__*/_jsx(\"ul\",{style:{margin:0,paddingLeft:'1rem'},children:attachmentErrors.map((error,index)=>/*#__PURE__*/_jsx(\"li\",{children:error},index))})]}),attachments.length>0&&/*#__PURE__*/_jsx(List,{dense:true,children:attachments.map((file,index)=>/*#__PURE__*/_jsxs(ListItem,{secondaryAction:/*#__PURE__*/_jsx(IconButton,{edge:\"end\",\"aria-label\":\"delete\",onClick:()=>handleRemoveAttachment(index),children:/*#__PURE__*/_jsx(DeleteIcon,{})}),children:[/*#__PURE__*/_jsx(ListItemIcon,{children:getFileIcon(file.type)}),/*#__PURE__*/_jsx(ListItemText,{primary:file.name,secondary:formatFileSize(file.size)})]},index))})]})]})}),formErrors.submit&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mt:2},children:formErrors.submit})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:onClose,disabled:isSubmitting,children:t('common.cancel')}),/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,variant:\"contained\",disabled:isSubmitting,startIcon:isSubmitting?/*#__PURE__*/_jsx(CircularProgress,{size:24}):null,children:isSubmitting?t('common.creating'):t('common.create')})]})]},\"add-project-dialog\");};export default AddProjectDialog;","map":{"version":3,"names":["React","useState","useRef","Dialog","DialogTitle","DialogContent","DialogActions","TextField","Button","FormControl","InputLabel","Select","MenuItem","Box","FormHelperText","Typography","IconButton","List","ListItem","ListItemText","Paper","Alert","AlertTitle","ListItemIcon","CircularProgress","Divider","InputAdornment","AdapterDateFns","LocalizationProvider","DatePicker","ProjectStatus","ProjectPriority","ProjectTemplateType","useAuth","CloudUploadIcon","DeleteIcon","DescriptionIcon","api","useTranslation","CalendarMonth","CalendarIcon","Business","BusinessIcon","Person","PersonIcon","PriorityHigh","PriorityIcon","GridItem","GridContainer","jsx","_jsx","jsxs","_jsxs","FILE_SIZE_LIMIT","ALLOWED_FILE_TYPES","AddProjectDialog","_ref","open","onClose","onProjectAdded","departments","users","token","fileInputRef","isSubmitting","setIsSubmitting","formErrors","setFormErrors","attachments","setAttachments","attachmentErrors","setAttachmentErrors","t","formData","setFormData","name","description","departmentId","startDate","Date","endDate","now","status","PLANNING","projectManagerId","budget","client","teamMembers","priority","MEDIUM","templateType","DEFAULT","handleInputChange","e","value","target","prev","newErrors","handleNumberInputChange","numValue","parseFloat","isNaN","handleSelectChange","handleStartDateChange","date","handleEndDateChange","handleFileUploadClick","current","click","validateFile","file","size","includes","type","handleFileChange","files","length","newFiles","Array","from","errors","validFiles","filter","index","error","push","handleRemoveAttachment","_","i","formatFileSize","bytes","k","sizes","Math","floor","log","pow","toFixed","getFileIcon","fileType","color","handleTeamMembersChange","event","split","validateForm","trim","Object","keys","handleSubmit","_projectResponse$data","selectedProjectManager","find","u","id","selectedDepartment","d","projectData","toISOString","department","actualCost","projectManager","progress","createdAt","updatedAt","localStorage","removeItem","projectResponse","projects","createProject","data","projectId","uploadPromises","map","FormData","append","uploadAttachment","Promise","all","existingProjects","JSON","parse","getItem","setItem","stringify","Error","console","submit","getProjectManagers","user","role","maxWidth","fullWidth","children","variant","component","fontWeight","sx","mt","noValidate","autoComplete","spacing","xs","label","onChange","required","helperText","InputProps","borderRadius","multiline","rows","sm","dateAdapter","slotProps","textField","startAdornment","position","minDate","undefined","dept","pm","firstName","lastName","IN_PROGRESS","ON_HOLD","LOW","HIGH","CRITICAL","ERP","MARKETING","FINANCE","SUPPLY_CHAIN","WEBSITE","INFRASTRUCTURE","gutterBottom","ref","style","display","multiple","accept","p","mb","textAlign","cursor","backgroundColor","onClick","severity","margin","paddingLeft","dense","secondaryAction","edge","primary","secondary","disabled","startIcon"],"sources":["/Users/hassanalsahli/Desktop/Themis/themis-client-final/src/components/Project/AddProjectDialog.tsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { \n  Dialog, \n  DialogTitle, \n  DialogContent, \n  DialogActions, \n  TextField,\n  Button,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Box,\n  Stack,\n  FormHelperText,\n  Typography,\n  SelectChangeEvent,\n  Chip,\n  IconButton,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemSecondaryAction,\n  Paper,\n  OutlinedInput,\n  Checkbox,\n  ListItemAvatar,\n  Alert,\n  AlertTitle,\n  ListItemIcon,\n  CircularProgress,\n  Grid,\n  Divider,\n  InputAdornment\n} from '@mui/material';\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\nimport { LocalizationProvider, DatePicker } from '@mui/x-date-pickers';\nimport { ProjectStatus, User, ProjectPriority, ProjectTemplateType } from '../../types';\nimport { useAuth } from '../../context/AuthContext';\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport DescriptionIcon from '@mui/icons-material/Description';\nimport api from '../../services/api';\nimport { useTranslation } from 'react-i18next';\nimport { \n  CalendarMonth as CalendarIcon,\n  Business as BusinessIcon,\n  Person as PersonIcon,\n  PriorityHigh as PriorityIcon\n} from '@mui/icons-material';\nimport { GridItem, GridContainer } from '../../components/common/MuiGridWrapper';\nimport { Project, Department } from '../../types';\nimport { mockProjects } from '../../services/mockData';\nimport { v4 as uuidv4 } from 'uuid';\n\ninterface ApiResponse<T> {\n  data: T;\n  success: boolean;\n  message?: string;\n}\n\ninterface ProjectResponse {\n  id: string;\n  name: string;\n  [key: string]: any;\n}\n\ninterface AddProjectDialogProps {\n  open: boolean;\n  onClose: () => void;\n  onProjectAdded: (project: Project) => void;\n  departments: Department[];\n  users: User[];\n}\n\nconst FILE_SIZE_LIMIT = 10 * 1024 * 1024; // 10MB\nconst ALLOWED_FILE_TYPES = [\n  'application/pdf',\n  'application/msword',\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n  'application/vnd.ms-excel',\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  'image/jpeg',\n  'image/png',\n  'image/gif',\n  'text/plain'\n];\n\nconst AddProjectDialog: React.FC<AddProjectDialogProps> = ({ \n  open, \n  onClose, \n  onProjectAdded,\n  departments,\n  users\n}) => {\n  const { token } = useAuth();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [formErrors, setFormErrors] = useState<Record<string, string>>({});\n  const [attachments, setAttachments] = useState<File[]>([]);\n  const [attachmentErrors, setAttachmentErrors] = useState<string[]>([]);\n  const { t } = useTranslation();\n  \n  const [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    departmentId: '',\n    startDate: new Date(),\n    endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000), // Default to 30 days from now\n    status: ProjectStatus.PLANNING,\n    projectManagerId: '',\n    budget: 0,\n    client: '',\n    teamMembers: [] as string[],\n    priority: ProjectPriority.MEDIUM,\n    templateType: ProjectTemplateType.DEFAULT\n  });\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n    \n    // Clear error when field is edited\n    if (formErrors[name]) {\n      setFormErrors(prev => {\n        const newErrors = { ...prev };\n        delete newErrors[name];\n        return newErrors;\n      });\n    }\n  };\n\n  const handleNumberInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    const numValue = parseFloat(value);\n    if (!isNaN(numValue) || value === '') {\n      setFormData(prev => ({ ...prev, [name]: value === '' ? 0 : numValue }));\n    }\n  };\n\n  const handleSelectChange = (e: SelectChangeEvent<string>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n  };\n\n  const handleStartDateChange = (date: Date | null) => {\n    if (date) {\n      setFormData(prev => ({ ...prev, startDate: date }));\n    }\n  };\n\n  const handleEndDateChange = (date: Date | null) => {\n    if (date) {\n      setFormData(prev => ({ ...prev, endDate: date }));\n    }\n  };\n\n  const handleFileUploadClick = () => {\n    if (fileInputRef.current) {\n      fileInputRef.current.click();\n    }\n  };\n\n  const validateFile = (file: File): string | null => {\n    // Check file size\n    if (file.size > FILE_SIZE_LIMIT) {\n      return `File size exceeds ${FILE_SIZE_LIMIT / (1024 * 1024)}MB limit`;\n    }\n    \n    // Check file type\n    if (!ALLOWED_FILE_TYPES.includes(file.type)) {\n      return 'File type not supported';\n    }\n    \n    return null;\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (files && files.length > 0) {\n      const newFiles = Array.from(files);\n      const errors: string[] = [];\n      \n      // Validate each file\n      const validFiles = newFiles.filter((file, index) => {\n        const error = validateFile(file);\n        if (error) {\n          errors.push(`${file.name}: ${error}`);\n          return false;\n        }\n        return true;\n      });\n      \n      setAttachments(prev => [...prev, ...validFiles]);\n      setAttachmentErrors(errors);\n      \n      // Clear the input so the same file can be selected again if needed\n      e.target.value = '';\n    }\n  };\n\n  const handleRemoveAttachment = (index: number) => {\n    setAttachments(prev => prev.filter((_, i) => i !== index));\n  };\n\n  // Format file size for display\n  const formatFileSize = (bytes: number): string => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  // Get icon for file type\n  const getFileIcon = (fileType: string) => {\n    if (fileType.includes('pdf')) {\n      return <DescriptionIcon color=\"error\" />;\n    } else if (fileType.includes('image')) {\n      return <DescriptionIcon color=\"primary\" />;\n    } else if (fileType.includes('word') || fileType.includes('document')) {\n      return <DescriptionIcon color=\"info\" />;\n    } else if (fileType.includes('excel') || fileType.includes('sheet')) {\n      return <DescriptionIcon color=\"success\" />;\n    }\n    return <DescriptionIcon />;\n  };\n\n  // Add handler for team members selection\n  const handleTeamMembersChange = (event: SelectChangeEvent<string[]>) => {\n    const { value } = event.target;\n    setFormData(prev => ({\n      ...prev,\n      teamMembers: typeof value === 'string' ? value.split(',') : value\n    }));\n  };\n\n  const validateForm = (): boolean => {\n    const errors: Record<string, string> = {};\n    \n    if (!formData.name.trim()) {\n      errors.name = t('validation.required');\n    }\n    \n    if (!formData.departmentId) {\n      errors.departmentId = t('validation.required');\n    }\n    \n    if (!formData.projectManagerId) {\n      errors.projectManagerId = t('validation.required');\n    }\n    \n    if (!formData.client.trim()) {\n      errors.client = t('validation.required');\n    }\n    \n    if (formData.startDate > formData.endDate) {\n      errors.endDate = t('validation.endDateAfterStart');\n    }\n    \n    if (formData.budget < 0) {\n      errors.budget = t('validation.invalidNumber');\n    }\n    \n    if (!formData.templateType) {\n      errors.templateType = 'Please select a project template';\n    }\n    \n    setFormErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  const handleSubmit = async () => {\n    if (!validateForm()) {\n      return;\n    }\n    \n    setIsSubmitting(true);\n    \n    try {\n      // Find the selected project manager\n      const selectedProjectManager = users.find(u => u.id === formData.projectManagerId);\n      const selectedDepartment = departments.find(d => d.id === formData.departmentId);\n      \n      // Create project data\n      const projectData = {\n        name: formData.name,\n        description: formData.description,\n        status: formData.status,\n        priority: formData.priority,\n        startDate: formData.startDate.toISOString().split('T')[0],\n        endDate: formData.endDate.toISOString().split('T')[0],\n        department: selectedDepartment,\n        budget: formData.budget,\n        actualCost: 0,\n        projectManager: selectedProjectManager,\n        teamMembers: formData.teamMembers,\n        client: formData.client,\n        progress: 0,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        templateType: formData.templateType\n      };\n      \n      // First, clear localStorage to avoid any inconsistencies\n      localStorage.removeItem('themis_projects');\n      \n      const projectResponse = await api.projects.createProject(projectData, token || '');\n      \n      // If we have attachments, upload them\n      if (attachments.length > 0 && projectResponse.data?.id) {\n        const projectId = projectResponse.data.id;\n        const uploadPromises = attachments.map(file => {\n          const formData = new FormData();\n          formData.append('file', file);\n          return api.projects.uploadAttachment(projectId, formData, token || '');\n        });\n        \n        await Promise.all(uploadPromises);\n      }\n      \n      // Check if we have a project response with data\n      if (projectResponse.data) {\n        // Force update localStorage before proceeding\n        const existingProjects = JSON.parse(localStorage.getItem('themis_projects') || '[]');\n        localStorage.setItem('themis_projects', JSON.stringify([\n          ...existingProjects,\n          { ...projectResponse.data, templateType: formData.templateType }\n        ]));\n        \n        onProjectAdded(projectResponse.data as Project);\n        onClose();\n      } else {\n        throw new Error('No project data returned from API');\n      }\n    } catch (error) {\n      console.error('Error creating project:', error);\n      setFormErrors(prev => ({ \n        ...prev, \n        submit: 'Failed to create project. Please try again.' \n      }));\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const getProjectManagers = () => {\n    return users.filter(user => \n      user.role === 'PROJECT_MANAGER' || \n      user.role === 'SUB_PMO' || \n      user.role === 'MAIN_PMO'\n    );\n  };\n\n  return (\n    <Dialog \n      open={open} \n      onClose={onClose} \n      maxWidth=\"md\" \n      fullWidth\n      key=\"add-project-dialog\"\n    >\n      <DialogTitle>\n        <Typography variant=\"h5\" component=\"div\" fontWeight=\"bold\">\n          {t('project.addNew')}\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 0.5 }}>\n          {t('project.fillDetails')}\n        </Typography>\n      </DialogTitle>\n      \n      <Divider />\n      \n      <DialogContent>\n        <Box component=\"form\" noValidate autoComplete=\"off\">\n          <GridContainer spacing={3}>\n            <GridItem xs={12}>\n              <TextField\n                label={t('project.name')}\n                name=\"name\"\n                value={formData.name}\n                onChange={handleInputChange}\n                fullWidth\n                required\n                error={!!formErrors.name}\n                helperText={formErrors.name}\n                InputProps={{\n                  sx: { borderRadius: 1.5 }\n                }}\n              />\n            </GridItem>\n            \n            <GridItem xs={12}>\n              <TextField\n                label={t('project.description')}\n                name=\"description\"\n                value={formData.description}\n                onChange={handleInputChange}\n                fullWidth\n                required\n                multiline\n                rows={3}\n                error={!!formErrors.description}\n                helperText={formErrors.description}\n                InputProps={{\n                  sx: { borderRadius: 1.5 }\n                }}\n              />\n            </GridItem>\n            \n            <GridItem xs={12} sm={6}>\n              <LocalizationProvider dateAdapter={AdapterDateFns}>\n                <DatePicker\n                  label={t('project.startDate')}\n                  value={formData.startDate}\n                  onChange={handleStartDateChange}\n                  slotProps={{\n                    textField: {\n                      fullWidth: true,\n                      required: true,\n                      error: !!formErrors.startDate,\n                      helperText: formErrors.startDate,\n                      InputProps: {\n                        startAdornment: (\n                          <InputAdornment position=\"start\">\n                            <CalendarIcon color=\"action\" />\n                          </InputAdornment>\n                        ),\n                        sx: { borderRadius: 1.5 }\n                      }\n                    }\n                  }}\n                />\n              </LocalizationProvider>\n            </GridItem>\n            \n            <GridItem xs={12} sm={6}>\n              <LocalizationProvider dateAdapter={AdapterDateFns}>\n                <DatePicker\n                  label={t('project.endDate')}\n                  value={formData.endDate}\n                  onChange={handleEndDateChange}\n                  minDate={formData.startDate || undefined}\n                  slotProps={{\n                    textField: {\n                      fullWidth: true,\n                      required: true,\n                      error: !!formErrors.endDate,\n                      helperText: formErrors.endDate,\n                      InputProps: {\n                        startAdornment: (\n                          <InputAdornment position=\"start\">\n                            <CalendarIcon color=\"action\" />\n                          </InputAdornment>\n                        ),\n                        sx: { borderRadius: 1.5 }\n                      }\n                    }\n                  }}\n                />\n              </LocalizationProvider>\n            </GridItem>\n            \n            <GridItem xs={12} sm={6}>\n              <FormControl \n                fullWidth \n                required\n                error={!!formErrors.departmentId}\n              >\n                <InputLabel id=\"department-label\">\n                  {t('project.department')}\n                </InputLabel>\n                <Select\n                  name=\"departmentId\"\n                  value={formData.departmentId}\n                  label={t('project.department')}\n                  onChange={handleSelectChange}\n                  required\n                  startAdornment={\n                    <InputAdornment position=\"start\">\n                      <BusinessIcon color=\"action\" />\n                    </InputAdornment>\n                  }\n                  sx={{ borderRadius: 1.5 }}\n                >\n                  {departments.map((dept) => (\n                    <MenuItem key={dept.id} value={dept.id}>\n                      {dept.name}\n                    </MenuItem>\n                  ))}\n                </Select>\n                {formErrors.departmentId && <FormHelperText>{formErrors.departmentId}</FormHelperText>}\n              </FormControl>\n            </GridItem>\n            \n            <GridItem xs={12} sm={6}>\n              <FormControl \n                fullWidth \n                required\n                error={!!formErrors.projectManagerId}\n              >\n                <InputLabel id=\"manager-label\">\n                  {t('project.projectManager')}\n                </InputLabel>\n                <Select\n                  name=\"projectManagerId\"\n                  value={formData.projectManagerId}\n                  label={t('project.projectManager')}\n                  onChange={handleSelectChange}\n                  required\n                  startAdornment={\n                    <InputAdornment position=\"start\">\n                      <PersonIcon color=\"action\" />\n                    </InputAdornment>\n                  }\n                  sx={{ borderRadius: 1.5 }}\n                >\n                  {getProjectManagers().map((pm) => (\n                    <MenuItem key={pm.id} value={pm.id}>\n                      {`${pm.firstName} ${pm.lastName}`}\n                    </MenuItem>\n                  ))}\n                </Select>\n                {formErrors.projectManagerId && <FormHelperText>{formErrors.projectManagerId}</FormHelperText>}\n              </FormControl>\n            </GridItem>\n            \n            <GridItem xs={12} sm={6}>\n              <TextField\n                label={t('project.budget')}\n                name=\"budget\"\n                type=\"number\"\n                value={formData.budget}\n                onChange={handleNumberInputChange}\n                fullWidth\n                required\n                error={!!formErrors.budget}\n                helperText={formErrors.budget}\n                InputProps={{\n                  startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\n                  sx: { borderRadius: 1.5 }\n                }}\n              />\n            </GridItem>\n            \n            <GridItem xs={12} sm={6}>\n              <FormControl fullWidth>\n                <InputLabel id=\"status-label\">\n                  {t('project.status')}\n                </InputLabel>\n                <Select\n                  name=\"status\"\n                  value={formData.status}\n                  label={t('project.status')}\n                  onChange={handleSelectChange}\n                  required\n                  sx={{ borderRadius: 1.5 }}\n                >\n                  <MenuItem value={ProjectStatus.PLANNING}>{t('projectStatus.PLANNING')}</MenuItem>\n                  <MenuItem value={ProjectStatus.IN_PROGRESS}>{t('projectStatus.IN_PROGRESS')}</MenuItem>\n                  <MenuItem value={ProjectStatus.ON_HOLD}>{t('projectStatus.ON_HOLD')}</MenuItem>\n                </Select>\n              </FormControl>\n            </GridItem>\n            \n            <GridItem xs={12} sm={6}>\n              <FormControl fullWidth>\n                <InputLabel id=\"priority-label\">\n                  {t('project.priority')}\n                </InputLabel>\n                <Select\n                  name=\"priority\"\n                  value={formData.priority}\n                  label={t('project.priority')}\n                  onChange={(e) => setFormData(prev => ({ ...prev, priority: e.target.value as ProjectPriority }))}\n                  required\n                  startAdornment={\n                    <InputAdornment position=\"start\">\n                      <PriorityIcon color=\"action\" />\n                    </InputAdornment>\n                  }\n                  sx={{ borderRadius: 1.5 }}\n                >\n                  <MenuItem value={ProjectPriority.LOW}>{t('projectPriority.LOW')}</MenuItem>\n                  <MenuItem value={ProjectPriority.MEDIUM}>{t('projectPriority.MEDIUM')}</MenuItem>\n                  <MenuItem value={ProjectPriority.HIGH}>{t('projectPriority.HIGH')}</MenuItem>\n                  <MenuItem value={ProjectPriority.CRITICAL}>{t('projectPriority.CRITICAL')}</MenuItem>\n                </Select>\n              </FormControl>\n            </GridItem>\n            \n            <GridItem xs={12} sm={6}>\n              <FormControl fullWidth>\n                <InputLabel id=\"template-type-label\">\n                  Project Template\n                </InputLabel>\n                <Select\n                  name=\"templateType\"\n                  value={formData.templateType}\n                  label=\"Project Template\"\n                  onChange={(e) => setFormData(prev => ({ ...prev, templateType: e.target.value as ProjectTemplateType }))}\n                  required\n                  sx={{ borderRadius: 1.5 }}\n                >\n                  <MenuItem value={ProjectTemplateType.DEFAULT}>Default</MenuItem>\n                  <MenuItem value={ProjectTemplateType.ERP}>ERP</MenuItem>\n                  <MenuItem value={ProjectTemplateType.MARKETING}>Marketing</MenuItem>\n                  <MenuItem value={ProjectTemplateType.FINANCE}>Finance</MenuItem>\n                  <MenuItem value={ProjectTemplateType.SUPPLY_CHAIN}>Supply Chain</MenuItem>\n                  <MenuItem value={ProjectTemplateType.WEBSITE}>Website</MenuItem>\n                  <MenuItem value={ProjectTemplateType.INFRASTRUCTURE}>Infrastructure</MenuItem>\n                </Select>\n              </FormControl>\n            </GridItem>\n            \n            <GridItem xs={12}>\n              <TextField\n                label={t('project.client')}\n                name=\"client\"\n                value={formData.client}\n                onChange={handleInputChange}\n                fullWidth\n                required\n                error={!!formErrors.client}\n                helperText={formErrors.client}\n                InputProps={{\n                  sx: { borderRadius: 1.5 }\n                }}\n              />\n            </GridItem>\n            \n            {/* File Attachments */}\n            <GridItem xs={12}>\n              <Typography variant=\"subtitle1\" gutterBottom>\n                {t('project.attachments')}\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                {t('project.supportedTypes')}\n              </Typography>\n              \n              <input\n                type=\"file\"\n                ref={fileInputRef}\n                style={{ display: 'none' }}\n                onChange={handleFileChange}\n                multiple\n                accept=\".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif,.txt\"\n              />\n              \n              <Paper\n                variant=\"outlined\"\n                sx={{\n                  p: 2,\n                  mb: 2,\n                  textAlign: 'center',\n                  cursor: 'pointer',\n                  backgroundColor: 'rgba(0, 0, 0, 0.02)',\n                }}\n                onClick={handleFileUploadClick}\n              >\n                <CloudUploadIcon color=\"primary\" />\n                <Typography variant=\"body2\" sx={{ mt: 1 }}>\n                  {t('project.clickToSelect')}\n                </Typography>\n              </Paper>\n              \n              {attachmentErrors.length > 0 && (\n                <Alert severity=\"error\" sx={{ mb: 2 }}>\n                  <AlertTitle>{t('project.errorUploading')}</AlertTitle>\n                  <ul style={{ margin: 0, paddingLeft: '1rem' }}>\n                    {attachmentErrors.map((error, index) => (\n                      <li key={index}>{error}</li>\n                    ))}\n                  </ul>\n                </Alert>\n              )}\n              \n              {attachments.length > 0 && (\n                <List dense>\n                  {attachments.map((file, index) => (\n                    <ListItem\n                      key={index}\n                      secondaryAction={\n                        <IconButton\n                          edge=\"end\"\n                          aria-label=\"delete\"\n                          onClick={() => handleRemoveAttachment(index)}\n                        >\n                          <DeleteIcon />\n                        </IconButton>\n                      }\n                    >\n                      <ListItemIcon>\n                        {getFileIcon(file.type)}\n                      </ListItemIcon>\n                      <ListItemText\n                        primary={file.name}\n                        secondary={formatFileSize(file.size)}\n                      />\n                    </ListItem>\n                  ))}\n                </List>\n              )}\n            </GridItem>\n          </GridContainer>\n        </Box>\n        \n        {formErrors.submit && (\n          <Alert severity=\"error\" sx={{ mt: 2 }}>\n            {formErrors.submit}\n          </Alert>\n        )}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} disabled={isSubmitting}>\n          {t('common.cancel')}\n        </Button>\n        <Button \n          onClick={handleSubmit} \n          variant=\"contained\"\n          disabled={isSubmitting}\n          startIcon={isSubmitting ? <CircularProgress size={24} /> : null}\n        >\n          {isSubmitting ? t('common.creating') : t('common.create')}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default AddProjectDialog; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,KAAQ,OAAO,CAC/C,OACEC,MAAM,CACNC,WAAW,CACXC,aAAa,CACbC,aAAa,CACbC,SAAS,CACTC,MAAM,CACNC,WAAW,CACXC,UAAU,CACVC,MAAM,CACNC,QAAQ,CACRC,GAAG,CAEHC,cAAc,CACdC,UAAU,CAGVC,UAAU,CACVC,IAAI,CACJC,QAAQ,CACRC,YAAY,CAEZC,KAAK,CAILC,KAAK,CACLC,UAAU,CACVC,YAAY,CACZC,gBAAgB,CAEhBC,OAAO,CACPC,cAAc,KACT,eAAe,CACtB,OAASC,cAAc,KAAQ,oCAAoC,CACnE,OAASC,oBAAoB,CAAEC,UAAU,KAAQ,qBAAqB,CACtE,OAASC,aAAa,CAAQC,eAAe,CAAEC,mBAAmB,KAAQ,aAAa,CACvF,OAASC,OAAO,KAAQ,2BAA2B,CACnD,MAAO,CAAAC,eAAe,KAAM,iCAAiC,CAC7D,MAAO,CAAAC,UAAU,KAAM,4BAA4B,CACnD,MAAO,CAAAC,eAAe,KAAM,iCAAiC,CAC7D,MAAO,CAAAC,GAAG,KAAM,oBAAoB,CACpC,OAASC,cAAc,KAAQ,eAAe,CAC9C,OACEC,aAAa,GAAI,CAAAC,YAAY,CAC7BC,QAAQ,GAAI,CAAAC,YAAY,CACxBC,MAAM,GAAI,CAAAC,UAAU,CACpBC,YAAY,GAAI,CAAAC,YAAY,KACvB,qBAAqB,CAC5B,OAASC,QAAQ,CAAEC,aAAa,KAAQ,wCAAwC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAyBjF,KAAM,CAAAC,eAAe,CAAG,EAAE,CAAG,IAAI,CAAG,IAAI,CAAE;AAC1C,KAAM,CAAAC,kBAAkB,CAAG,CACzB,iBAAiB,CACjB,oBAAoB,CACpB,yEAAyE,CACzE,0BAA0B,CAC1B,mEAAmE,CACnE,YAAY,CACZ,WAAW,CACX,WAAW,CACX,YAAY,CACb,CAED,KAAM,CAAAC,gBAAiD,CAAGC,IAAA,EAMpD,IANqD,CACzDC,IAAI,CACJC,OAAO,CACPC,cAAc,CACdC,WAAW,CACXC,KACF,CAAC,CAAAL,IAAA,CACC,KAAM,CAAEM,KAAM,CAAC,CAAG7B,OAAO,CAAC,CAAC,CAC3B,KAAM,CAAA8B,YAAY,CAAG7D,MAAM,CAAmB,IAAI,CAAC,CACnD,KAAM,CAAC8D,YAAY,CAAEC,eAAe,CAAC,CAAGhE,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAACiE,UAAU,CAAEC,aAAa,CAAC,CAAGlE,QAAQ,CAAyB,CAAC,CAAC,CAAC,CACxE,KAAM,CAACmE,WAAW,CAAEC,cAAc,CAAC,CAAGpE,QAAQ,CAAS,EAAE,CAAC,CAC1D,KAAM,CAACqE,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGtE,QAAQ,CAAW,EAAE,CAAC,CACtE,KAAM,CAAEuE,CAAE,CAAC,CAAGlC,cAAc,CAAC,CAAC,CAE9B,KAAM,CAACmC,QAAQ,CAAEC,WAAW,CAAC,CAAGzE,QAAQ,CAAC,CACvC0E,IAAI,CAAE,EAAE,CACRC,WAAW,CAAE,EAAE,CACfC,YAAY,CAAE,EAAE,CAChBC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CACrBC,OAAO,CAAE,GAAI,CAAAD,IAAI,CAACA,IAAI,CAACE,GAAG,CAAC,CAAC,CAAG,EAAE,CAAG,EAAE,CAAG,EAAE,CAAG,EAAE,CAAG,IAAI,CAAC,CAAE;AAC1DC,MAAM,CAAEpD,aAAa,CAACqD,QAAQ,CAC9BC,gBAAgB,CAAE,EAAE,CACpBC,MAAM,CAAE,CAAC,CACTC,MAAM,CAAE,EAAE,CACVC,WAAW,CAAE,EAAc,CAC3BC,QAAQ,CAAEzD,eAAe,CAAC0D,MAAM,CAChCC,YAAY,CAAE1D,mBAAmB,CAAC2D,OACpC,CAAC,CAAC,CAEF,KAAM,CAAAC,iBAAiB,CAAIC,CAA4D,EAAK,CAC1F,KAAM,CAAElB,IAAI,CAAEmB,KAAM,CAAC,CAAGD,CAAC,CAACE,MAAM,CAChCrB,WAAW,CAACsB,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAE,CAACrB,IAAI,EAAGmB,KAAM,CAAC,CAAC,CAAC,CAEjD;AACA,GAAI5B,UAAU,CAACS,IAAI,CAAC,CAAE,CACpBR,aAAa,CAAC6B,IAAI,EAAI,CACpB,KAAM,CAAAC,SAAS,CAAG,CAAE,GAAGD,IAAK,CAAC,CAC7B,MAAO,CAAAC,SAAS,CAACtB,IAAI,CAAC,CACtB,MAAO,CAAAsB,SAAS,CAClB,CAAC,CAAC,CACJ,CACF,CAAC,CAED,KAAM,CAAAC,uBAAuB,CAAIL,CAAsC,EAAK,CAC1E,KAAM,CAAElB,IAAI,CAAEmB,KAAM,CAAC,CAAGD,CAAC,CAACE,MAAM,CAChC,KAAM,CAAAI,QAAQ,CAAGC,UAAU,CAACN,KAAK,CAAC,CAClC,GAAI,CAACO,KAAK,CAACF,QAAQ,CAAC,EAAIL,KAAK,GAAK,EAAE,CAAE,CACpCpB,WAAW,CAACsB,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAE,CAACrB,IAAI,EAAGmB,KAAK,GAAK,EAAE,CAAG,CAAC,CAAGK,QAAS,CAAC,CAAC,CAAC,CACzE,CACF,CAAC,CAED,KAAM,CAAAG,kBAAkB,CAAIT,CAA4B,EAAK,CAC3D,KAAM,CAAElB,IAAI,CAAEmB,KAAM,CAAC,CAAGD,CAAC,CAACE,MAAM,CAChCrB,WAAW,CAACsB,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAE,CAACrB,IAAI,EAAGmB,KAAM,CAAC,CAAC,CAAC,CACnD,CAAC,CAED,KAAM,CAAAS,qBAAqB,CAAIC,IAAiB,EAAK,CACnD,GAAIA,IAAI,CAAE,CACR9B,WAAW,CAACsB,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAElB,SAAS,CAAE0B,IAAK,CAAC,CAAC,CAAC,CACrD,CACF,CAAC,CAED,KAAM,CAAAC,mBAAmB,CAAID,IAAiB,EAAK,CACjD,GAAIA,IAAI,CAAE,CACR9B,WAAW,CAACsB,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAEhB,OAAO,CAAEwB,IAAK,CAAC,CAAC,CAAC,CACnD,CACF,CAAC,CAED,KAAM,CAAAE,qBAAqB,CAAGA,CAAA,GAAM,CAClC,GAAI3C,YAAY,CAAC4C,OAAO,CAAE,CACxB5C,YAAY,CAAC4C,OAAO,CAACC,KAAK,CAAC,CAAC,CAC9B,CACF,CAAC,CAED,KAAM,CAAAC,YAAY,CAAIC,IAAU,EAAoB,CAClD;AACA,GAAIA,IAAI,CAACC,IAAI,CAAG1D,eAAe,CAAE,CAC/B,MAAO,qBAAqBA,eAAe,EAAI,IAAI,CAAG,IAAI,CAAC,UAAU,CACvE,CAEA;AACA,GAAI,CAACC,kBAAkB,CAAC0D,QAAQ,CAACF,IAAI,CAACG,IAAI,CAAC,CAAE,CAC3C,MAAO,yBAAyB,CAClC,CAEA,MAAO,KAAI,CACb,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAIrB,CAAsC,EAAK,CACnE,KAAM,CAAAsB,KAAK,CAAGtB,CAAC,CAACE,MAAM,CAACoB,KAAK,CAC5B,GAAIA,KAAK,EAAIA,KAAK,CAACC,MAAM,CAAG,CAAC,CAAE,CAC7B,KAAM,CAAAC,QAAQ,CAAGC,KAAK,CAACC,IAAI,CAACJ,KAAK,CAAC,CAClC,KAAM,CAAAK,MAAgB,CAAG,EAAE,CAE3B;AACA,KAAM,CAAAC,UAAU,CAAGJ,QAAQ,CAACK,MAAM,CAAC,CAACZ,IAAI,CAAEa,KAAK,GAAK,CAClD,KAAM,CAAAC,KAAK,CAAGf,YAAY,CAACC,IAAI,CAAC,CAChC,GAAIc,KAAK,CAAE,CACTJ,MAAM,CAACK,IAAI,CAAC,GAAGf,IAAI,CAACnC,IAAI,KAAKiD,KAAK,EAAE,CAAC,CACrC,MAAO,MAAK,CACd,CACA,MAAO,KAAI,CACb,CAAC,CAAC,CAEFvD,cAAc,CAAC2B,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAE,GAAGyB,UAAU,CAAC,CAAC,CAChDlD,mBAAmB,CAACiD,MAAM,CAAC,CAE3B;AACA3B,CAAC,CAACE,MAAM,CAACD,KAAK,CAAG,EAAE,CACrB,CACF,CAAC,CAED,KAAM,CAAAgC,sBAAsB,CAAIH,KAAa,EAAK,CAChDtD,cAAc,CAAC2B,IAAI,EAAIA,IAAI,CAAC0B,MAAM,CAAC,CAACK,CAAC,CAAEC,CAAC,GAAKA,CAAC,GAAKL,KAAK,CAAC,CAAC,CAC5D,CAAC,CAED;AACA,KAAM,CAAAM,cAAc,CAAIC,KAAa,EAAa,CAChD,GAAIA,KAAK,GAAK,CAAC,CAAE,MAAO,SAAS,CACjC,KAAM,CAAAC,CAAC,CAAG,IAAI,CACd,KAAM,CAAAC,KAAK,CAAG,CAAC,OAAO,CAAE,IAAI,CAAE,IAAI,CAAE,IAAI,CAAC,CACzC,KAAM,CAAAJ,CAAC,CAAGK,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,GAAG,CAACL,KAAK,CAAC,CAAGG,IAAI,CAACE,GAAG,CAACJ,CAAC,CAAC,CAAC,CACnD,MAAO,CAAA/B,UAAU,CAAC,CAAC8B,KAAK,CAAGG,IAAI,CAACG,GAAG,CAACL,CAAC,CAAEH,CAAC,CAAC,EAAES,OAAO,CAAC,CAAC,CAAC,CAAC,CAAG,GAAG,CAAGL,KAAK,CAACJ,CAAC,CAAC,CACzE,CAAC,CAED;AACA,KAAM,CAAAU,WAAW,CAAIC,QAAgB,EAAK,CACxC,GAAIA,QAAQ,CAAC3B,QAAQ,CAAC,KAAK,CAAC,CAAE,CAC5B,mBAAO9D,IAAA,CAACd,eAAe,EAACwG,KAAK,CAAC,OAAO,CAAE,CAAC,CAC1C,CAAC,IAAM,IAAID,QAAQ,CAAC3B,QAAQ,CAAC,OAAO,CAAC,CAAE,CACrC,mBAAO9D,IAAA,CAACd,eAAe,EAACwG,KAAK,CAAC,SAAS,CAAE,CAAC,CAC5C,CAAC,IAAM,IAAID,QAAQ,CAAC3B,QAAQ,CAAC,MAAM,CAAC,EAAI2B,QAAQ,CAAC3B,QAAQ,CAAC,UAAU,CAAC,CAAE,CACrE,mBAAO9D,IAAA,CAACd,eAAe,EAACwG,KAAK,CAAC,MAAM,CAAE,CAAC,CACzC,CAAC,IAAM,IAAID,QAAQ,CAAC3B,QAAQ,CAAC,OAAO,CAAC,EAAI2B,QAAQ,CAAC3B,QAAQ,CAAC,OAAO,CAAC,CAAE,CACnE,mBAAO9D,IAAA,CAACd,eAAe,EAACwG,KAAK,CAAC,SAAS,CAAE,CAAC,CAC5C,CACA,mBAAO1F,IAAA,CAACd,eAAe,GAAE,CAAC,CAC5B,CAAC,CAED;AACA,KAAM,CAAAyG,uBAAuB,CAAIC,KAAkC,EAAK,CACtE,KAAM,CAAEhD,KAAM,CAAC,CAAGgD,KAAK,CAAC/C,MAAM,CAC9BrB,WAAW,CAACsB,IAAI,GAAK,CACnB,GAAGA,IAAI,CACPT,WAAW,CAAE,MAAO,CAAAO,KAAK,GAAK,QAAQ,CAAGA,KAAK,CAACiD,KAAK,CAAC,GAAG,CAAC,CAAGjD,KAC9D,CAAC,CAAC,CAAC,CACL,CAAC,CAED,KAAM,CAAAkD,YAAY,CAAGA,CAAA,GAAe,CAClC,KAAM,CAAAxB,MAA8B,CAAG,CAAC,CAAC,CAEzC,GAAI,CAAC/C,QAAQ,CAACE,IAAI,CAACsE,IAAI,CAAC,CAAC,CAAE,CACzBzB,MAAM,CAAC7C,IAAI,CAAGH,CAAC,CAAC,qBAAqB,CAAC,CACxC,CAEA,GAAI,CAACC,QAAQ,CAACI,YAAY,CAAE,CAC1B2C,MAAM,CAAC3C,YAAY,CAAGL,CAAC,CAAC,qBAAqB,CAAC,CAChD,CAEA,GAAI,CAACC,QAAQ,CAACW,gBAAgB,CAAE,CAC9BoC,MAAM,CAACpC,gBAAgB,CAAGZ,CAAC,CAAC,qBAAqB,CAAC,CACpD,CAEA,GAAI,CAACC,QAAQ,CAACa,MAAM,CAAC2D,IAAI,CAAC,CAAC,CAAE,CAC3BzB,MAAM,CAAClC,MAAM,CAAGd,CAAC,CAAC,qBAAqB,CAAC,CAC1C,CAEA,GAAIC,QAAQ,CAACK,SAAS,CAAGL,QAAQ,CAACO,OAAO,CAAE,CACzCwC,MAAM,CAACxC,OAAO,CAAGR,CAAC,CAAC,8BAA8B,CAAC,CACpD,CAEA,GAAIC,QAAQ,CAACY,MAAM,CAAG,CAAC,CAAE,CACvBmC,MAAM,CAACnC,MAAM,CAAGb,CAAC,CAAC,0BAA0B,CAAC,CAC/C,CAEA,GAAI,CAACC,QAAQ,CAACiB,YAAY,CAAE,CAC1B8B,MAAM,CAAC9B,YAAY,CAAG,kCAAkC,CAC1D,CAEAvB,aAAa,CAACqD,MAAM,CAAC,CACrB,MAAO,CAAA0B,MAAM,CAACC,IAAI,CAAC3B,MAAM,CAAC,CAACJ,MAAM,GAAK,CAAC,CACzC,CAAC,CAED,KAAM,CAAAgC,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CAACJ,YAAY,CAAC,CAAC,CAAE,CACnB,OACF,CAEA/E,eAAe,CAAC,IAAI,CAAC,CAErB,GAAI,KAAAoF,qBAAA,CACF;AACA,KAAM,CAAAC,sBAAsB,CAAGzF,KAAK,CAAC0F,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACC,EAAE,GAAKhF,QAAQ,CAACW,gBAAgB,CAAC,CAClF,KAAM,CAAAsE,kBAAkB,CAAG9F,WAAW,CAAC2F,IAAI,CAACI,CAAC,EAAIA,CAAC,CAACF,EAAE,GAAKhF,QAAQ,CAACI,YAAY,CAAC,CAEhF;AACA,KAAM,CAAA+E,WAAW,CAAG,CAClBjF,IAAI,CAAEF,QAAQ,CAACE,IAAI,CACnBC,WAAW,CAAEH,QAAQ,CAACG,WAAW,CACjCM,MAAM,CAAET,QAAQ,CAACS,MAAM,CACvBM,QAAQ,CAAEf,QAAQ,CAACe,QAAQ,CAC3BV,SAAS,CAAEL,QAAQ,CAACK,SAAS,CAAC+E,WAAW,CAAC,CAAC,CAACd,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACzD/D,OAAO,CAAEP,QAAQ,CAACO,OAAO,CAAC6E,WAAW,CAAC,CAAC,CAACd,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACrDe,UAAU,CAAEJ,kBAAkB,CAC9BrE,MAAM,CAAEZ,QAAQ,CAACY,MAAM,CACvB0E,UAAU,CAAE,CAAC,CACbC,cAAc,CAAEV,sBAAsB,CACtC/D,WAAW,CAAEd,QAAQ,CAACc,WAAW,CACjCD,MAAM,CAAEb,QAAQ,CAACa,MAAM,CACvB2E,QAAQ,CAAE,CAAC,CACXC,SAAS,CAAE,GAAI,CAAAnF,IAAI,CAAC,CAAC,CAAC8E,WAAW,CAAC,CAAC,CACnCM,SAAS,CAAE,GAAI,CAAApF,IAAI,CAAC,CAAC,CAAC8E,WAAW,CAAC,CAAC,CACnCnE,YAAY,CAAEjB,QAAQ,CAACiB,YACzB,CAAC,CAED;AACA0E,YAAY,CAACC,UAAU,CAAC,iBAAiB,CAAC,CAE1C,KAAM,CAAAC,eAAe,CAAG,KAAM,CAAAjI,GAAG,CAACkI,QAAQ,CAACC,aAAa,CAACZ,WAAW,CAAE9F,KAAK,EAAI,EAAE,CAAC,CAElF;AACA,GAAIM,WAAW,CAACgD,MAAM,CAAG,CAAC,GAAAiC,qBAAA,CAAIiB,eAAe,CAACG,IAAI,UAAApB,qBAAA,WAApBA,qBAAA,CAAsBI,EAAE,CAAE,CACtD,KAAM,CAAAiB,SAAS,CAAGJ,eAAe,CAACG,IAAI,CAAChB,EAAE,CACzC,KAAM,CAAAkB,cAAc,CAAGvG,WAAW,CAACwG,GAAG,CAAC9D,IAAI,EAAI,CAC7C,KAAM,CAAArC,QAAQ,CAAG,GAAI,CAAAoG,QAAQ,CAAC,CAAC,CAC/BpG,QAAQ,CAACqG,MAAM,CAAC,MAAM,CAAEhE,IAAI,CAAC,CAC7B,MAAO,CAAAzE,GAAG,CAACkI,QAAQ,CAACQ,gBAAgB,CAACL,SAAS,CAAEjG,QAAQ,CAAEX,KAAK,EAAI,EAAE,CAAC,CACxE,CAAC,CAAC,CAEF,KAAM,CAAAkH,OAAO,CAACC,GAAG,CAACN,cAAc,CAAC,CACnC,CAEA;AACA,GAAIL,eAAe,CAACG,IAAI,CAAE,CACxB;AACA,KAAM,CAAAS,gBAAgB,CAAGC,IAAI,CAACC,KAAK,CAAChB,YAAY,CAACiB,OAAO,CAAC,iBAAiB,CAAC,EAAI,IAAI,CAAC,CACpFjB,YAAY,CAACkB,OAAO,CAAC,iBAAiB,CAAEH,IAAI,CAACI,SAAS,CAAC,CACrD,GAAGL,gBAAgB,CACnB,CAAE,GAAGZ,eAAe,CAACG,IAAI,CAAE/E,YAAY,CAAEjB,QAAQ,CAACiB,YAAa,CAAC,CACjE,CAAC,CAAC,CAEH/B,cAAc,CAAC2G,eAAe,CAACG,IAAe,CAAC,CAC/C/G,OAAO,CAAC,CAAC,CACX,CAAC,IAAM,CACL,KAAM,IAAI,CAAA8H,KAAK,CAAC,mCAAmC,CAAC,CACtD,CACF,CAAE,MAAO5D,KAAK,CAAE,CACd6D,OAAO,CAAC7D,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/CzD,aAAa,CAAC6B,IAAI,GAAK,CACrB,GAAGA,IAAI,CACP0F,MAAM,CAAE,6CACV,CAAC,CAAC,CAAC,CACL,CAAC,OAAS,CACRzH,eAAe,CAAC,KAAK,CAAC,CACxB,CACF,CAAC,CAED,KAAM,CAAA0H,kBAAkB,CAAGA,CAAA,GAAM,CAC/B,MAAO,CAAA9H,KAAK,CAAC6D,MAAM,CAACkE,IAAI,EACtBA,IAAI,CAACC,IAAI,GAAK,iBAAiB,EAC/BD,IAAI,CAACC,IAAI,GAAK,SAAS,EACvBD,IAAI,CAACC,IAAI,GAAK,UAChB,CAAC,CACH,CAAC,CAED,mBACEzI,KAAA,CAACjD,MAAM,EACLsD,IAAI,CAAEA,IAAK,CACXC,OAAO,CAAEA,OAAQ,CACjBoI,QAAQ,CAAC,IAAI,CACbC,SAAS,MAAAC,QAAA,eAGT5I,KAAA,CAAChD,WAAW,EAAA4L,QAAA,eACV9I,IAAA,CAACnC,UAAU,EAACkL,OAAO,CAAC,IAAI,CAACC,SAAS,CAAC,KAAK,CAACC,UAAU,CAAC,MAAM,CAAAH,QAAA,CACvDxH,CAAC,CAAC,gBAAgB,CAAC,CACV,CAAC,cACbtB,IAAA,CAACnC,UAAU,EAACkL,OAAO,CAAC,OAAO,CAACrD,KAAK,CAAC,gBAAgB,CAACwD,EAAE,CAAE,CAAEC,EAAE,CAAE,GAAI,CAAE,CAAAL,QAAA,CAChExH,CAAC,CAAC,qBAAqB,CAAC,CACf,CAAC,EACF,CAAC,cAEdtB,IAAA,CAACzB,OAAO,GAAE,CAAC,cAEX2B,KAAA,CAAC/C,aAAa,EAAA2L,QAAA,eACZ9I,IAAA,CAACrC,GAAG,EAACqL,SAAS,CAAC,MAAM,CAACI,UAAU,MAACC,YAAY,CAAC,KAAK,CAAAP,QAAA,cACjD5I,KAAA,CAACJ,aAAa,EAACwJ,OAAO,CAAE,CAAE,CAAAR,QAAA,eACxB9I,IAAA,CAACH,QAAQ,EAAC0J,EAAE,CAAE,EAAG,CAAAT,QAAA,cACf9I,IAAA,CAAC3C,SAAS,EACRmM,KAAK,CAAElI,CAAC,CAAC,cAAc,CAAE,CACzBG,IAAI,CAAC,MAAM,CACXmB,KAAK,CAAErB,QAAQ,CAACE,IAAK,CACrBgI,QAAQ,CAAE/G,iBAAkB,CAC5BmG,SAAS,MACTa,QAAQ,MACRhF,KAAK,CAAE,CAAC,CAAC1D,UAAU,CAACS,IAAK,CACzBkI,UAAU,CAAE3I,UAAU,CAACS,IAAK,CAC5BmI,UAAU,CAAE,CACVV,EAAE,CAAE,CAAEW,YAAY,CAAE,GAAI,CAC1B,CAAE,CACH,CAAC,CACM,CAAC,cAEX7J,IAAA,CAACH,QAAQ,EAAC0J,EAAE,CAAE,EAAG,CAAAT,QAAA,cACf9I,IAAA,CAAC3C,SAAS,EACRmM,KAAK,CAAElI,CAAC,CAAC,qBAAqB,CAAE,CAChCG,IAAI,CAAC,aAAa,CAClBmB,KAAK,CAAErB,QAAQ,CAACG,WAAY,CAC5B+H,QAAQ,CAAE/G,iBAAkB,CAC5BmG,SAAS,MACTa,QAAQ,MACRI,SAAS,MACTC,IAAI,CAAE,CAAE,CACRrF,KAAK,CAAE,CAAC,CAAC1D,UAAU,CAACU,WAAY,CAChCiI,UAAU,CAAE3I,UAAU,CAACU,WAAY,CACnCkI,UAAU,CAAE,CACVV,EAAE,CAAE,CAAEW,YAAY,CAAE,GAAI,CAC1B,CAAE,CACH,CAAC,CACM,CAAC,cAEX7J,IAAA,CAACH,QAAQ,EAAC0J,EAAE,CAAE,EAAG,CAACS,EAAE,CAAE,CAAE,CAAAlB,QAAA,cACtB9I,IAAA,CAACtB,oBAAoB,EAACuL,WAAW,CAAExL,cAAe,CAAAqK,QAAA,cAChD9I,IAAA,CAACrB,UAAU,EACT6K,KAAK,CAAElI,CAAC,CAAC,mBAAmB,CAAE,CAC9BsB,KAAK,CAAErB,QAAQ,CAACK,SAAU,CAC1B6H,QAAQ,CAAEpG,qBAAsB,CAChC6G,SAAS,CAAE,CACTC,SAAS,CAAE,CACTtB,SAAS,CAAE,IAAI,CACfa,QAAQ,CAAE,IAAI,CACdhF,KAAK,CAAE,CAAC,CAAC1D,UAAU,CAACY,SAAS,CAC7B+H,UAAU,CAAE3I,UAAU,CAACY,SAAS,CAChCgI,UAAU,CAAE,CACVQ,cAAc,cACZpK,IAAA,CAACxB,cAAc,EAAC6L,QAAQ,CAAC,OAAO,CAAAvB,QAAA,cAC9B9I,IAAA,CAACV,YAAY,EAACoG,KAAK,CAAC,QAAQ,CAAE,CAAC,CACjB,CACjB,CACDwD,EAAE,CAAE,CAAEW,YAAY,CAAE,GAAI,CAC1B,CACF,CACF,CAAE,CACH,CAAC,CACkB,CAAC,CACf,CAAC,cAEX7J,IAAA,CAACH,QAAQ,EAAC0J,EAAE,CAAE,EAAG,CAACS,EAAE,CAAE,CAAE,CAAAlB,QAAA,cACtB9I,IAAA,CAACtB,oBAAoB,EAACuL,WAAW,CAAExL,cAAe,CAAAqK,QAAA,cAChD9I,IAAA,CAACrB,UAAU,EACT6K,KAAK,CAAElI,CAAC,CAAC,iBAAiB,CAAE,CAC5BsB,KAAK,CAAErB,QAAQ,CAACO,OAAQ,CACxB2H,QAAQ,CAAElG,mBAAoB,CAC9B+G,OAAO,CAAE/I,QAAQ,CAACK,SAAS,EAAI2I,SAAU,CACzCL,SAAS,CAAE,CACTC,SAAS,CAAE,CACTtB,SAAS,CAAE,IAAI,CACfa,QAAQ,CAAE,IAAI,CACdhF,KAAK,CAAE,CAAC,CAAC1D,UAAU,CAACc,OAAO,CAC3B6H,UAAU,CAAE3I,UAAU,CAACc,OAAO,CAC9B8H,UAAU,CAAE,CACVQ,cAAc,cACZpK,IAAA,CAACxB,cAAc,EAAC6L,QAAQ,CAAC,OAAO,CAAAvB,QAAA,cAC9B9I,IAAA,CAACV,YAAY,EAACoG,KAAK,CAAC,QAAQ,CAAE,CAAC,CACjB,CACjB,CACDwD,EAAE,CAAE,CAAEW,YAAY,CAAE,GAAI,CAC1B,CACF,CACF,CAAE,CACH,CAAC,CACkB,CAAC,CACf,CAAC,cAEX7J,IAAA,CAACH,QAAQ,EAAC0J,EAAE,CAAE,EAAG,CAACS,EAAE,CAAE,CAAE,CAAAlB,QAAA,cACtB5I,KAAA,CAAC3C,WAAW,EACVsL,SAAS,MACTa,QAAQ,MACRhF,KAAK,CAAE,CAAC,CAAC1D,UAAU,CAACW,YAAa,CAAAmH,QAAA,eAEjC9I,IAAA,CAACxC,UAAU,EAAC+I,EAAE,CAAC,kBAAkB,CAAAuC,QAAA,CAC9BxH,CAAC,CAAC,oBAAoB,CAAC,CACd,CAAC,cACbtB,IAAA,CAACvC,MAAM,EACLgE,IAAI,CAAC,cAAc,CACnBmB,KAAK,CAAErB,QAAQ,CAACI,YAAa,CAC7B6H,KAAK,CAAElI,CAAC,CAAC,oBAAoB,CAAE,CAC/BmI,QAAQ,CAAErG,kBAAmB,CAC7BsG,QAAQ,MACRU,cAAc,cACZpK,IAAA,CAACxB,cAAc,EAAC6L,QAAQ,CAAC,OAAO,CAAAvB,QAAA,cAC9B9I,IAAA,CAACR,YAAY,EAACkG,KAAK,CAAC,QAAQ,CAAE,CAAC,CACjB,CACjB,CACDwD,EAAE,CAAE,CAAEW,YAAY,CAAE,GAAI,CAAE,CAAAf,QAAA,CAEzBpI,WAAW,CAACgH,GAAG,CAAE8C,IAAI,eACpBxK,IAAA,CAACtC,QAAQ,EAAekF,KAAK,CAAE4H,IAAI,CAACjE,EAAG,CAAAuC,QAAA,CACpC0B,IAAI,CAAC/I,IAAI,EADG+I,IAAI,CAACjE,EAEV,CACX,CAAC,CACI,CAAC,CACRvF,UAAU,CAACW,YAAY,eAAI3B,IAAA,CAACpC,cAAc,EAAAkL,QAAA,CAAE9H,UAAU,CAACW,YAAY,CAAiB,CAAC,EAC3E,CAAC,CACN,CAAC,cAEX3B,IAAA,CAACH,QAAQ,EAAC0J,EAAE,CAAE,EAAG,CAACS,EAAE,CAAE,CAAE,CAAAlB,QAAA,cACtB5I,KAAA,CAAC3C,WAAW,EACVsL,SAAS,MACTa,QAAQ,MACRhF,KAAK,CAAE,CAAC,CAAC1D,UAAU,CAACkB,gBAAiB,CAAA4G,QAAA,eAErC9I,IAAA,CAACxC,UAAU,EAAC+I,EAAE,CAAC,eAAe,CAAAuC,QAAA,CAC3BxH,CAAC,CAAC,wBAAwB,CAAC,CAClB,CAAC,cACbtB,IAAA,CAACvC,MAAM,EACLgE,IAAI,CAAC,kBAAkB,CACvBmB,KAAK,CAAErB,QAAQ,CAACW,gBAAiB,CACjCsH,KAAK,CAAElI,CAAC,CAAC,wBAAwB,CAAE,CACnCmI,QAAQ,CAAErG,kBAAmB,CAC7BsG,QAAQ,MACRU,cAAc,cACZpK,IAAA,CAACxB,cAAc,EAAC6L,QAAQ,CAAC,OAAO,CAAAvB,QAAA,cAC9B9I,IAAA,CAACN,UAAU,EAACgG,KAAK,CAAC,QAAQ,CAAE,CAAC,CACf,CACjB,CACDwD,EAAE,CAAE,CAAEW,YAAY,CAAE,GAAI,CAAE,CAAAf,QAAA,CAEzBL,kBAAkB,CAAC,CAAC,CAACf,GAAG,CAAE+C,EAAE,eAC3BzK,IAAA,CAACtC,QAAQ,EAAakF,KAAK,CAAE6H,EAAE,CAAClE,EAAG,CAAAuC,QAAA,CAChC,GAAG2B,EAAE,CAACC,SAAS,IAAID,EAAE,CAACE,QAAQ,EAAE,EADpBF,EAAE,CAAClE,EAER,CACX,CAAC,CACI,CAAC,CACRvF,UAAU,CAACkB,gBAAgB,eAAIlC,IAAA,CAACpC,cAAc,EAAAkL,QAAA,CAAE9H,UAAU,CAACkB,gBAAgB,CAAiB,CAAC,EACnF,CAAC,CACN,CAAC,cAEXlC,IAAA,CAACH,QAAQ,EAAC0J,EAAE,CAAE,EAAG,CAACS,EAAE,CAAE,CAAE,CAAAlB,QAAA,cACtB9I,IAAA,CAAC3C,SAAS,EACRmM,KAAK,CAAElI,CAAC,CAAC,gBAAgB,CAAE,CAC3BG,IAAI,CAAC,QAAQ,CACbsC,IAAI,CAAC,QAAQ,CACbnB,KAAK,CAAErB,QAAQ,CAACY,MAAO,CACvBsH,QAAQ,CAAEzG,uBAAwB,CAClC6F,SAAS,MACTa,QAAQ,MACRhF,KAAK,CAAE,CAAC,CAAC1D,UAAU,CAACmB,MAAO,CAC3BwH,UAAU,CAAE3I,UAAU,CAACmB,MAAO,CAC9ByH,UAAU,CAAE,CACVQ,cAAc,cAAEpK,IAAA,CAACxB,cAAc,EAAC6L,QAAQ,CAAC,OAAO,CAAAvB,QAAA,CAAC,GAAC,CAAgB,CAAC,CACnEI,EAAE,CAAE,CAAEW,YAAY,CAAE,GAAI,CAC1B,CAAE,CACH,CAAC,CACM,CAAC,cAEX7J,IAAA,CAACH,QAAQ,EAAC0J,EAAE,CAAE,EAAG,CAACS,EAAE,CAAE,CAAE,CAAAlB,QAAA,cACtB5I,KAAA,CAAC3C,WAAW,EAACsL,SAAS,MAAAC,QAAA,eACpB9I,IAAA,CAACxC,UAAU,EAAC+I,EAAE,CAAC,cAAc,CAAAuC,QAAA,CAC1BxH,CAAC,CAAC,gBAAgB,CAAC,CACV,CAAC,cACbpB,KAAA,CAACzC,MAAM,EACLgE,IAAI,CAAC,QAAQ,CACbmB,KAAK,CAAErB,QAAQ,CAACS,MAAO,CACvBwH,KAAK,CAAElI,CAAC,CAAC,gBAAgB,CAAE,CAC3BmI,QAAQ,CAAErG,kBAAmB,CAC7BsG,QAAQ,MACRR,EAAE,CAAE,CAAEW,YAAY,CAAE,GAAI,CAAE,CAAAf,QAAA,eAE1B9I,IAAA,CAACtC,QAAQ,EAACkF,KAAK,CAAEhE,aAAa,CAACqD,QAAS,CAAA6G,QAAA,CAAExH,CAAC,CAAC,wBAAwB,CAAC,CAAW,CAAC,cACjFtB,IAAA,CAACtC,QAAQ,EAACkF,KAAK,CAAEhE,aAAa,CAACgM,WAAY,CAAA9B,QAAA,CAAExH,CAAC,CAAC,2BAA2B,CAAC,CAAW,CAAC,cACvFtB,IAAA,CAACtC,QAAQ,EAACkF,KAAK,CAAEhE,aAAa,CAACiM,OAAQ,CAAA/B,QAAA,CAAExH,CAAC,CAAC,uBAAuB,CAAC,CAAW,CAAC,EACzE,CAAC,EACE,CAAC,CACN,CAAC,cAEXtB,IAAA,CAACH,QAAQ,EAAC0J,EAAE,CAAE,EAAG,CAACS,EAAE,CAAE,CAAE,CAAAlB,QAAA,cACtB5I,KAAA,CAAC3C,WAAW,EAACsL,SAAS,MAAAC,QAAA,eACpB9I,IAAA,CAACxC,UAAU,EAAC+I,EAAE,CAAC,gBAAgB,CAAAuC,QAAA,CAC5BxH,CAAC,CAAC,kBAAkB,CAAC,CACZ,CAAC,cACbpB,KAAA,CAACzC,MAAM,EACLgE,IAAI,CAAC,UAAU,CACfmB,KAAK,CAAErB,QAAQ,CAACe,QAAS,CACzBkH,KAAK,CAAElI,CAAC,CAAC,kBAAkB,CAAE,CAC7BmI,QAAQ,CAAG9G,CAAC,EAAKnB,WAAW,CAACsB,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAER,QAAQ,CAAEK,CAAC,CAACE,MAAM,CAACD,KAAyB,CAAC,CAAC,CAAE,CACjG8G,QAAQ,MACRU,cAAc,cACZpK,IAAA,CAACxB,cAAc,EAAC6L,QAAQ,CAAC,OAAO,CAAAvB,QAAA,cAC9B9I,IAAA,CAACJ,YAAY,EAAC8F,KAAK,CAAC,QAAQ,CAAE,CAAC,CACjB,CACjB,CACDwD,EAAE,CAAE,CAAEW,YAAY,CAAE,GAAI,CAAE,CAAAf,QAAA,eAE1B9I,IAAA,CAACtC,QAAQ,EAACkF,KAAK,CAAE/D,eAAe,CAACiM,GAAI,CAAAhC,QAAA,CAAExH,CAAC,CAAC,qBAAqB,CAAC,CAAW,CAAC,cAC3EtB,IAAA,CAACtC,QAAQ,EAACkF,KAAK,CAAE/D,eAAe,CAAC0D,MAAO,CAAAuG,QAAA,CAAExH,CAAC,CAAC,wBAAwB,CAAC,CAAW,CAAC,cACjFtB,IAAA,CAACtC,QAAQ,EAACkF,KAAK,CAAE/D,eAAe,CAACkM,IAAK,CAAAjC,QAAA,CAAExH,CAAC,CAAC,sBAAsB,CAAC,CAAW,CAAC,cAC7EtB,IAAA,CAACtC,QAAQ,EAACkF,KAAK,CAAE/D,eAAe,CAACmM,QAAS,CAAAlC,QAAA,CAAExH,CAAC,CAAC,0BAA0B,CAAC,CAAW,CAAC,EAC/E,CAAC,EACE,CAAC,CACN,CAAC,cAEXtB,IAAA,CAACH,QAAQ,EAAC0J,EAAE,CAAE,EAAG,CAACS,EAAE,CAAE,CAAE,CAAAlB,QAAA,cACtB5I,KAAA,CAAC3C,WAAW,EAACsL,SAAS,MAAAC,QAAA,eACpB9I,IAAA,CAACxC,UAAU,EAAC+I,EAAE,CAAC,qBAAqB,CAAAuC,QAAA,CAAC,kBAErC,CAAY,CAAC,cACb5I,KAAA,CAACzC,MAAM,EACLgE,IAAI,CAAC,cAAc,CACnBmB,KAAK,CAAErB,QAAQ,CAACiB,YAAa,CAC7BgH,KAAK,CAAC,kBAAkB,CACxBC,QAAQ,CAAG9G,CAAC,EAAKnB,WAAW,CAACsB,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAEN,YAAY,CAAEG,CAAC,CAACE,MAAM,CAACD,KAA6B,CAAC,CAAC,CAAE,CACzG8G,QAAQ,MACRR,EAAE,CAAE,CAAEW,YAAY,CAAE,GAAI,CAAE,CAAAf,QAAA,eAE1B9I,IAAA,CAACtC,QAAQ,EAACkF,KAAK,CAAE9D,mBAAmB,CAAC2D,OAAQ,CAAAqG,QAAA,CAAC,SAAO,CAAU,CAAC,cAChE9I,IAAA,CAACtC,QAAQ,EAACkF,KAAK,CAAE9D,mBAAmB,CAACmM,GAAI,CAAAnC,QAAA,CAAC,KAAG,CAAU,CAAC,cACxD9I,IAAA,CAACtC,QAAQ,EAACkF,KAAK,CAAE9D,mBAAmB,CAACoM,SAAU,CAAApC,QAAA,CAAC,WAAS,CAAU,CAAC,cACpE9I,IAAA,CAACtC,QAAQ,EAACkF,KAAK,CAAE9D,mBAAmB,CAACqM,OAAQ,CAAArC,QAAA,CAAC,SAAO,CAAU,CAAC,cAChE9I,IAAA,CAACtC,QAAQ,EAACkF,KAAK,CAAE9D,mBAAmB,CAACsM,YAAa,CAAAtC,QAAA,CAAC,cAAY,CAAU,CAAC,cAC1E9I,IAAA,CAACtC,QAAQ,EAACkF,KAAK,CAAE9D,mBAAmB,CAACuM,OAAQ,CAAAvC,QAAA,CAAC,SAAO,CAAU,CAAC,cAChE9I,IAAA,CAACtC,QAAQ,EAACkF,KAAK,CAAE9D,mBAAmB,CAACwM,cAAe,CAAAxC,QAAA,CAAC,gBAAc,CAAU,CAAC,EACxE,CAAC,EACE,CAAC,CACN,CAAC,cAEX9I,IAAA,CAACH,QAAQ,EAAC0J,EAAE,CAAE,EAAG,CAAAT,QAAA,cACf9I,IAAA,CAAC3C,SAAS,EACRmM,KAAK,CAAElI,CAAC,CAAC,gBAAgB,CAAE,CAC3BG,IAAI,CAAC,QAAQ,CACbmB,KAAK,CAAErB,QAAQ,CAACa,MAAO,CACvBqH,QAAQ,CAAE/G,iBAAkB,CAC5BmG,SAAS,MACTa,QAAQ,MACRhF,KAAK,CAAE,CAAC,CAAC1D,UAAU,CAACoB,MAAO,CAC3BuH,UAAU,CAAE3I,UAAU,CAACoB,MAAO,CAC9BwH,UAAU,CAAE,CACVV,EAAE,CAAE,CAAEW,YAAY,CAAE,GAAI,CAC1B,CAAE,CACH,CAAC,CACM,CAAC,cAGX3J,KAAA,CAACL,QAAQ,EAAC0J,EAAE,CAAE,EAAG,CAAAT,QAAA,eACf9I,IAAA,CAACnC,UAAU,EAACkL,OAAO,CAAC,WAAW,CAACwC,YAAY,MAAAzC,QAAA,CACzCxH,CAAC,CAAC,qBAAqB,CAAC,CACf,CAAC,cACbtB,IAAA,CAACnC,UAAU,EAACkL,OAAO,CAAC,OAAO,CAACrD,KAAK,CAAC,gBAAgB,CAAC6F,YAAY,MAAAzC,QAAA,CAC5DxH,CAAC,CAAC,wBAAwB,CAAC,CAClB,CAAC,cAEbtB,IAAA,UACE+D,IAAI,CAAC,MAAM,CACXyH,GAAG,CAAE3K,YAAa,CAClB4K,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAC3BjC,QAAQ,CAAEzF,gBAAiB,CAC3B2H,QAAQ,MACRC,MAAM,CAAC,sDAAsD,CAC9D,CAAC,cAEF1L,KAAA,CAAChC,KAAK,EACJ6K,OAAO,CAAC,UAAU,CAClBG,EAAE,CAAE,CACF2C,CAAC,CAAE,CAAC,CACJC,EAAE,CAAE,CAAC,CACLC,SAAS,CAAE,QAAQ,CACnBC,MAAM,CAAE,SAAS,CACjBC,eAAe,CAAE,qBACnB,CAAE,CACFC,OAAO,CAAE1I,qBAAsB,CAAAsF,QAAA,eAE/B9I,IAAA,CAAChB,eAAe,EAAC0G,KAAK,CAAC,SAAS,CAAE,CAAC,cACnC1F,IAAA,CAACnC,UAAU,EAACkL,OAAO,CAAC,OAAO,CAACG,EAAE,CAAE,CAAEC,EAAE,CAAE,CAAE,CAAE,CAAAL,QAAA,CACvCxH,CAAC,CAAC,uBAAuB,CAAC,CACjB,CAAC,EACR,CAAC,CAEPF,gBAAgB,CAAC8C,MAAM,CAAG,CAAC,eAC1BhE,KAAA,CAAC/B,KAAK,EAACgO,QAAQ,CAAC,OAAO,CAACjD,EAAE,CAAE,CAAE4C,EAAE,CAAE,CAAE,CAAE,CAAAhD,QAAA,eACpC9I,IAAA,CAAC5B,UAAU,EAAA0K,QAAA,CAAExH,CAAC,CAAC,wBAAwB,CAAC,CAAa,CAAC,cACtDtB,IAAA,OAAIyL,KAAK,CAAE,CAAEW,MAAM,CAAE,CAAC,CAAEC,WAAW,CAAE,MAAO,CAAE,CAAAvD,QAAA,CAC3C1H,gBAAgB,CAACsG,GAAG,CAAC,CAAChD,KAAK,CAAED,KAAK,gBACjCzE,IAAA,OAAA8I,QAAA,CAAiBpE,KAAK,EAAbD,KAAkB,CAC5B,CAAC,CACA,CAAC,EACA,CACR,CAEAvD,WAAW,CAACgD,MAAM,CAAG,CAAC,eACrBlE,IAAA,CAACjC,IAAI,EAACuO,KAAK,MAAAxD,QAAA,CACR5H,WAAW,CAACwG,GAAG,CAAC,CAAC9D,IAAI,CAAEa,KAAK,gBAC3BvE,KAAA,CAAClC,QAAQ,EAEPuO,eAAe,cACbvM,IAAA,CAAClC,UAAU,EACT0O,IAAI,CAAC,KAAK,CACV,aAAW,QAAQ,CACnBN,OAAO,CAAEA,CAAA,GAAMtH,sBAAsB,CAACH,KAAK,CAAE,CAAAqE,QAAA,cAE7C9I,IAAA,CAACf,UAAU,GAAE,CAAC,CACJ,CACb,CAAA6J,QAAA,eAED9I,IAAA,CAAC3B,YAAY,EAAAyK,QAAA,CACVtD,WAAW,CAAC5B,IAAI,CAACG,IAAI,CAAC,CACX,CAAC,cACf/D,IAAA,CAAC/B,YAAY,EACXwO,OAAO,CAAE7I,IAAI,CAACnC,IAAK,CACnBiL,SAAS,CAAE3H,cAAc,CAACnB,IAAI,CAACC,IAAI,CAAE,CACtC,CAAC,GAjBGY,KAkBG,CACX,CAAC,CACE,CACP,EACO,CAAC,EACE,CAAC,CACb,CAAC,CAELzD,UAAU,CAACwH,MAAM,eAChBxI,IAAA,CAAC7B,KAAK,EAACgO,QAAQ,CAAC,OAAO,CAACjD,EAAE,CAAE,CAAEC,EAAE,CAAE,CAAE,CAAE,CAAAL,QAAA,CACnC9H,UAAU,CAACwH,MAAM,CACb,CACR,EACY,CAAC,cAChBtI,KAAA,CAAC9C,aAAa,EAAA0L,QAAA,eACZ9I,IAAA,CAAC1C,MAAM,EAAC4O,OAAO,CAAE1L,OAAQ,CAACmM,QAAQ,CAAE7L,YAAa,CAAAgI,QAAA,CAC9CxH,CAAC,CAAC,eAAe,CAAC,CACb,CAAC,cACTtB,IAAA,CAAC1C,MAAM,EACL4O,OAAO,CAAEhG,YAAa,CACtB6C,OAAO,CAAC,WAAW,CACnB4D,QAAQ,CAAE7L,YAAa,CACvB8L,SAAS,CAAE9L,YAAY,cAAGd,IAAA,CAAC1B,gBAAgB,EAACuF,IAAI,CAAE,EAAG,CAAE,CAAC,CAAG,IAAK,CAAAiF,QAAA,CAE/DhI,YAAY,CAAGQ,CAAC,CAAC,iBAAiB,CAAC,CAAGA,CAAC,CAAC,eAAe,CAAC,CACnD,CAAC,EACI,CAAC,GA7WZ,oBA8WE,CAAC,CAEb,CAAC,CAED,cAAe,CAAAjB,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}