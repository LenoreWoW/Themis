{"ast":null,"code":"import React,{useState,useEffect}from'react';import FormWithValidation,{FormTextField,FormSelect,FormDatePicker}from'../shared/FormWithValidation';import{Box,Paper,Typography,Stepper,Step,StepLabel,Button,Divider,Dialog,DialogActions,DialogContent,DialogContentText,DialogTitle,InputAdornment,Alert,Snackbar,FormControlLabel,Switch}from'@mui/material';import{GridContainer,GridItem}from'../common/MuiGridWrapper';import{CalendarMonth as CalendarIcon,Business as BusinessIcon,Person as PersonIcon,PriorityHigh as PriorityIcon,Save as SaveIcon,Delete as DeleteIcon,ArrowBack as ArrowBackIcon,Add as AddIcon}from'@mui/icons-material';import{ProjectPriority,ProjectStatus,UserRole}from'../../types';import{useAuth}from'../../context/AuthContext';import{useTranslation}from'react-i18next';import api from'../../services/api';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";// Define a simple TeamMemberList component for now\nconst TeamMemberList=_ref=>{let{users,selectedMembers,onMembersChange}=_ref;return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Team members selection will be implemented here\"}),/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(AddIcon,{}),variant:\"outlined\",sx:{mt:1},children:\"Add Team Member\"})]});};// Define a simple MilestoneList component for now\nconst MilestoneList=_ref2=>{let{milestones,onMilestonesChange}=_ref2;return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Milestones will be implemented here\"}),/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(AddIcon,{}),variant:\"outlined\",sx:{mt:1},children:\"Add Milestone\"})]});};// Define a simple BudgetForm component for now\nconst BudgetForm=_ref3=>{let{items,onItemsChange}=_ref3;return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Budget items will be implemented here\"}),/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(AddIcon,{}),variant:\"outlined\",sx:{mt:1},children:\"Add Budget Item\"})]});};// Enum for audit actions\nvar AuditAction=/*#__PURE__*/function(AuditAction){AuditAction[\"CREATE\"]=\"CREATE\";AuditAction[\"UPDATE\"]=\"UPDATE\";AuditAction[\"DELETE\"]=\"DELETE\";AuditAction[\"LOGIN\"]=\"LOGIN\";AuditAction[\"LOGOUT\"]=\"LOGOUT\";AuditAction[\"APPROVE\"]=\"APPROVE\";AuditAction[\"REJECT\"]=\"REJECT\";AuditAction[\"SUBMIT\"]=\"SUBMIT\";return AuditAction;}(AuditAction||{});// Update the interface\n// Extend the audit logs API interface\n// Add the createAuditLog function to the auditLogs API\napi.auditLogs.createAuditLog=async(auditData,token)=>{console.log('Creating audit log:',auditData);// This is a stub - in a real implementation, it would call the API\nreturn{success:true};};// Continue with the component\nconst steps=['Basic Information','Team & Timeline','Budget & Documents'];const LegacyProjectForm=_ref4=>{let{departments,users,onCancel}=_ref4;const{token,user}=useAuth();const{t}=useTranslation();const navigate=useNavigate();const[isSubmitting,setIsSubmitting]=useState(false);const[submitError,setSubmitError]=useState(null);const[activeStep,setActiveStep]=useState(0);const[formData,setFormData]=useState({name:'',description:'',departmentId:'',startDate:new Date(),endDate:new Date(Date.now()+30*24*60*60*1000),status:ProjectStatus.PLANNING,projectManagerId:'',budget:0,goalsLink:'',teamMembers:[],priority:ProjectPriority.MEDIUM,legacyImport:true,milestones:[],budgetItems:[]});const[saveAsDraft,setSaveAsDraft]=useState(false);const[openDeleteDialog,setOpenDeleteDialog]=useState(false);const[snackbarOpen,setSnackbarOpen]=useState(false);const[snackbarMessage,setSnackbarMessage]=useState('');const[teamMembers,setTeamMembers]=useState([]);const[milestones,setMilestones]=useState([]);const[budgetItems,setBudgetItems]=useState([]);// Check if user has appropriate role (SUB_PMO, MAIN_PMO, or ADMIN)\nconst hasPermission=(user===null||user===void 0?void 0:user.role)===UserRole.SUB_PMO||(user===null||user===void 0?void 0:user.role)===UserRole.MAIN_PMO||(user===null||user===void 0?void 0:user.role)===UserRole.ADMIN;// Redirect if user doesn't have permission\nuseEffect(()=>{if(!hasPermission){navigate('/dashboard');}},[hasPermission,navigate]);// Default values for the form\nconst defaultValues={name:'',description:'',departmentId:'',startDate:new Date(),endDate:new Date(Date.now()+30*24*60*60*1000),// Default to 30 days from now\nstatus:ProjectStatus.PLANNING,projectManagerId:'',budget:0,goalsLink:'',teamMembers:[],priority:ProjectPriority.MEDIUM,legacyImport:true,// Default to true for legacy import\nmilestones:[],budgetItems:[]};// Get project managers\nconst getProjectManagers=()=>{return users.filter(user=>user.role===UserRole.PROJECT_MANAGER||user.role===UserRole.SUB_PMO||user.role===UserRole.MAIN_PMO).map(pm=>({value:pm.id,label:`${pm.firstName} ${pm.lastName}`}));};// Handle closing the snackbar\nconst handleSnackbarClose=()=>{setSnackbarOpen(false);};// Custom function to create audit log since the API endpoint might be missing\nconst createProjectAuditLog=async(projectId,details,metadata)=>{try{// In a real implementation, this would call api.auditLogs.createAuditLog\n// For now, we'll just log the information\nconsole.log('Creating audit log:',{action:AuditAction.CREATE,entityType:'Project',entityId:projectId,details,metadata});// Return a success response\nreturn{success:true};}catch(error){console.error('Error creating audit log:',error);return{success:false};}};// Function to save as draft\nconst saveProjectAsDraft=async data=>{setIsSubmitting(true);setSubmitError(null);try{const projectDataToSave={...data,startDate:data.startDate.toISOString(),endDate:data.endDate.toISOString(),budget:data.budget,teamMembers:teamMembers,milestones:milestones,budgetItems:budgetItems,priority:data.priority,legacyImport:true,isDraft:true,status:ProjectStatus.PLANNING};const projectResponse=await api.projects.createProject(projectDataToSave,token||'');if(projectResponse.data){// Create audit log for the legacy import\nawait createProjectAuditLog(projectResponse.data.id,`Manual legacy import created as draft by ${user===null||user===void 0?void 0:user.firstName} ${user===null||user===void 0?void 0:user.lastName}`,{legacyImport:true,createdBy:user===null||user===void 0?void 0:user.id,createdAt:new Date().toISOString()});setSnackbarMessage('Legacy project saved as draft');setSnackbarOpen(true);// Redirect to projects list after a short delay\nsetTimeout(()=>{navigate('/projects');},2000);}else{setSubmitError('Failed to save project draft. Please try again.');}}catch(error){console.error('Error saving project draft:',error);setSubmitError('An error occurred while saving the project draft.');}finally{setIsSubmitting(false);}};// Function to publish the project\nconst publishProject=async data=>{setIsSubmitting(true);setSubmitError(null);try{const projectDataToSave={...data,startDate:data.startDate.toISOString(),endDate:data.endDate.toISOString(),budget:data.budget,teamMembers:teamMembers,milestones:milestones,budgetItems:budgetItems,priority:data.priority,legacyImport:true,isDraft:false,status:data.status};const projectResponse=await api.projects.createProject(projectDataToSave,token||'');if(projectResponse.data){// Create audit log for the legacy import\nawait createProjectAuditLog(projectResponse.data.id,`Manual legacy import published by ${user===null||user===void 0?void 0:user.firstName} ${user===null||user===void 0?void 0:user.lastName}`,{legacyImport:true,createdBy:user===null||user===void 0?void 0:user.id,createdAt:new Date().toISOString()});setSnackbarMessage('Legacy project published successfully');setSnackbarOpen(true);// Redirect to projects list after a short delay\nsetTimeout(()=>{navigate('/projects');},2000);}else{setSubmitError('Failed to publish project. Please try again.');}}catch(error){console.error('Error publishing project:',error);setSubmitError('An error occurred while publishing the project.');}finally{setIsSubmitting(false);}};// Handle team members update\nconst handleTeamMembersUpdate=members=>{setTeamMembers(members);};// Handle milestones update\nconst handleMilestonesUpdate=milestoneList=>{setMilestones(milestoneList);};// Handle budget items update\nconst handleBudgetItemsUpdate=items=>{setBudgetItems(items);};// Form validation\nconst validateForm=data=>{const errors={};if(!data.name){errors.name='Project name is required';}if(!data.departmentId){errors.departmentId='Department is required';}if(!data.projectManagerId){errors.projectManagerId='Project manager is required';}if(!data.startDate){errors.startDate='Start date is required';}if(!data.endDate){errors.endDate='End date is required';}else if(data.endDate<data.startDate){errors.endDate='End date must be after start date';}if(!data.status){errors.status='Status is required';}return errors;};// Handle step navigation\nconst handleNext=()=>{setActiveStep(prevActiveStep=>prevActiveStep+1);};const handleBack=()=>{setActiveStep(prevActiveStep=>prevActiveStep-1);};// Handle form submission on each step\nconst handleStepSubmit=data=>{const errors=validateForm(data);if(Object.keys(errors).length===0){setFormData(prevData=>({...prevData,...data}));if(activeStep===steps.length-1){if(saveAsDraft){saveProjectAsDraft({...formData,...data});}else{publishProject({...formData,...data});}}else{handleNext();}}else{setSubmitError('Please fix the errors before continuing');}};// Handle deleting the draft\nconst handleDeleteDraft=async()=>{if(!(formData!==null&&formData!==void 0&&formData.id)){setOpenDeleteDialog(false);onCancel();return;}try{await api.projects.deleteProject(formData.id,token||'');setSnackbarMessage('Draft deleted successfully');setSnackbarOpen(true);setOpenDeleteDialog(false);// Redirect to projects list after a short delay\nsetTimeout(()=>{navigate('/projects');},1500);}catch(error){console.error('Error deleting draft:',error);setSnackbarMessage('Failed to delete draft');setSnackbarOpen(true);setOpenDeleteDialog(false);}};// Then update the getStepContent function with proper types\nconst getStepContent=(step,control,errors)=>{switch(step){case 0:return/*#__PURE__*/_jsx(Box,{sx:{p:3,mt:2},children:/*#__PURE__*/_jsxs(GridContainer,{spacing:3,children:[/*#__PURE__*/_jsx(GridItem,{xs:12,children:/*#__PURE__*/_jsx(FormTextField,{name:\"name\",label:t('project.name'),required:true,control:control,errors:errors})}),/*#__PURE__*/_jsx(GridItem,{xs:12,children:/*#__PURE__*/_jsx(FormTextField,{name:\"description\",label:t('project.description'),multiline:true,rows:3,required:true,control:control,errors:errors})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(FormSelect,{name:\"departmentId\",label:t('project.department'),required:true,options:departments.map(dept=>({value:dept.id,label:dept.name})),startIcon:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(BusinessIcon,{color:\"action\"})}),control:control,errors:errors})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(FormSelect,{name:\"projectManagerId\",label:t('project.projectManager'),required:true,options:getProjectManagers(),startIcon:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(PersonIcon,{color:\"action\"})}),control:control,errors:errors})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(FormSelect,{name:\"priority\",label:t('project.priority'),required:true,options:[{value:ProjectPriority.LOW,label:t('projectPriority.LOW')},{value:ProjectPriority.MEDIUM,label:t('projectPriority.MEDIUM')},{value:ProjectPriority.HIGH,label:t('projectPriority.HIGH')},{value:ProjectPriority.CRITICAL,label:t('projectPriority.CRITICAL')}],startIcon:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(PriorityIcon,{color:\"action\"})}),control:control,errors:errors})}),/*#__PURE__*/_jsx(GridItem,{xs:12,children:/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:true,disabled:true}),label:\"Imported from Legacy PMO\"})})]})});case 1:return/*#__PURE__*/_jsx(Box,{sx:{p:3,mt:2},children:/*#__PURE__*/_jsxs(GridContainer,{spacing:3,children:[/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(FormDatePicker,{name:\"startDate\",label:t('project.startDate'),required:true,startIcon:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(CalendarIcon,{color:\"action\"})}),control:control,errors:errors})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(FormDatePicker,{name:\"endDate\",label:t('project.endDate'),required:true,minDate:defaultValues.startDate,startIcon:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(CalendarIcon,{color:\"action\"})}),control:control,errors:errors})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(FormSelect,{name:\"status\",label:t('project.status'),required:true,options:[{value:ProjectStatus.PLANNING,label:t('projectStatus.PLANNING')},{value:ProjectStatus.IN_PROGRESS,label:t('projectStatus.IN_PROGRESS')},{value:ProjectStatus.ON_HOLD,label:t('projectStatus.ON_HOLD')},{value:ProjectStatus.COMPLETED,label:t('projectStatus.COMPLETED')},{value:ProjectStatus.CANCELLED,label:t('projectStatus.CANCELLED')}],control:control,errors:errors})}),/*#__PURE__*/_jsxs(GridItem,{xs:12,children:[/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Team Members\"}),/*#__PURE__*/_jsx(TeamMemberList,{users:users,selectedMembers:teamMembers,onMembersChange:handleTeamMembersUpdate})]}),/*#__PURE__*/_jsxs(GridItem,{xs:12,children:[/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Milestones\"}),/*#__PURE__*/_jsx(MilestoneList,{milestones:milestones,onMilestonesChange:handleMilestonesUpdate})]})]})});case 2:return/*#__PURE__*/_jsx(Box,{sx:{p:3,mt:2},children:/*#__PURE__*/_jsxs(GridContainer,{spacing:3,children:[/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(FormTextField,{name:\"budget\",label:t('project.budget'),type:\"number\",required:true,control:control,errors:errors})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(FormTextField,{name:\"goalsLink\",label:t('project.goalsLink'),control:control,errors:errors})}),/*#__PURE__*/_jsxs(GridItem,{xs:12,children:[/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Budget Items\"}),/*#__PURE__*/_jsx(BudgetForm,{items:budgetItems,onItemsChange:handleBudgetItemsUpdate})]})]})});default:return'Unknown step';}};if(!hasPermission){return/*#__PURE__*/_jsx(Box,{sx:{p:3},children:/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:\"You do not have permission to access this page.\"})});}return/*#__PURE__*/_jsxs(Box,{sx:{width:'100%',minHeight:'100vh',bgcolor:'background.default',py:4},children:[/*#__PURE__*/_jsxs(Box,{sx:{maxWidth:1200,mx:'auto',px:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",children:\"Add Legacy Project\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(ArrowBackIcon,{}),onClick:onCancel,children:\"Back to Projects\"})]}),/*#__PURE__*/_jsxs(Paper,{sx:{p:3,mb:4},children:[/*#__PURE__*/_jsx(Stepper,{activeStep:activeStep,alternativeLabel:true,sx:{mb:4},children:steps.map(label=>/*#__PURE__*/_jsx(Step,{children:/*#__PURE__*/_jsx(StepLabel,{children:label})},label))}),/*#__PURE__*/_jsx(FormWithValidation,{defaultValues:defaultValues,onSubmit:handleStepSubmit,submitButtonText:activeStep===steps.length-1?'Publish Project':'Next',cancelButtonText:activeStep===0?'Cancel':'Back',onCancel:activeStep===0?onCancel:handleBack,isLoading:isSubmitting,error:submitError||undefined,children:(control,errors)=>/*#__PURE__*/_jsxs(_Fragment,{children:[getStepContent(activeStep,control,errors),activeStep===steps.length-1&&/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',mt:3},children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(SaveIcon,{}),onClick:()=>{setSaveAsDraft(true);// Submit form is triggered which will check saveAsDraft flag\n},sx:{mr:1},disabled:isSubmitting,children:\"Save as Draft\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"error\",startIcon:/*#__PURE__*/_jsx(DeleteIcon,{}),onClick:()=>setOpenDeleteDialog(true),disabled:isSubmitting,children:\"Delete Draft\"})]})]})})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:openDeleteDialog,onClose:()=>setOpenDeleteDialog(false),children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Delete Draft Project?\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(DialogContentText,{children:\"Are you sure you want to delete this draft project? This action cannot be undone.\"})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setOpenDeleteDialog(false),children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleDeleteDraft,color:\"error\",children:\"Delete\"})]})]}),/*#__PURE__*/_jsx(Snackbar,{open:snackbarOpen,autoHideDuration:4000,onClose:handleSnackbarClose,message:snackbarMessage})]});};export default LegacyProjectForm;","map":{"version":3,"names":["React","useState","useEffect","FormWithValidation","FormTextField","FormSelect","FormDatePicker","Box","Paper","Typography","Stepper","Step","StepLabel","Button","Divider","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","InputAdornment","Alert","Snackbar","FormControlLabel","Switch","GridContainer","GridItem","CalendarMonth","CalendarIcon","Business","BusinessIcon","Person","PersonIcon","PriorityHigh","PriorityIcon","Save","SaveIcon","Delete","DeleteIcon","ArrowBack","ArrowBackIcon","Add","AddIcon","ProjectPriority","ProjectStatus","UserRole","useAuth","useTranslation","api","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TeamMemberList","_ref","users","selectedMembers","onMembersChange","children","variant","color","startIcon","sx","mt","MilestoneList","_ref2","milestones","onMilestonesChange","BudgetForm","_ref3","items","onItemsChange","AuditAction","auditLogs","createAuditLog","auditData","token","console","log","success","steps","LegacyProjectForm","_ref4","departments","onCancel","user","t","navigate","isSubmitting","setIsSubmitting","submitError","setSubmitError","activeStep","setActiveStep","formData","setFormData","name","description","departmentId","startDate","Date","endDate","now","status","PLANNING","projectManagerId","budget","goalsLink","teamMembers","priority","MEDIUM","legacyImport","budgetItems","saveAsDraft","setSaveAsDraft","openDeleteDialog","setOpenDeleteDialog","snackbarOpen","setSnackbarOpen","snackbarMessage","setSnackbarMessage","setTeamMembers","setMilestones","setBudgetItems","hasPermission","role","SUB_PMO","MAIN_PMO","ADMIN","defaultValues","getProjectManagers","filter","PROJECT_MANAGER","map","pm","value","id","label","firstName","lastName","handleSnackbarClose","createProjectAuditLog","projectId","details","metadata","action","CREATE","entityType","entityId","error","saveProjectAsDraft","data","projectDataToSave","toISOString","isDraft","projectResponse","projects","createProject","createdBy","createdAt","setTimeout","publishProject","handleTeamMembersUpdate","members","handleMilestonesUpdate","milestoneList","handleBudgetItemsUpdate","validateForm","errors","handleNext","prevActiveStep","handleBack","handleStepSubmit","Object","keys","length","prevData","handleDeleteDraft","deleteProject","getStepContent","step","control","p","spacing","xs","required","multiline","rows","sm","options","dept","position","LOW","HIGH","CRITICAL","checked","disabled","minDate","IN_PROGRESS","ON_HOLD","COMPLETED","CANCELLED","my","gutterBottom","type","severity","width","minHeight","bgcolor","py","maxWidth","mx","px","display","justifyContent","alignItems","mb","component","onClick","alternativeLabel","onSubmit","submitButtonText","cancelButtonText","isLoading","undefined","mr","open","onClose","autoHideDuration","message"],"sources":["/Users/hassanalsahli/Desktop/Themis/themis-client-final/src/components/Project/LegacyProjectForm.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useForm, Control, FieldErrors } from 'react-hook-form';\nimport FormWithValidation, { \n  FormTextField, \n  FormSelect, \n  FormDatePicker\n} from '../shared/FormWithValidation';\nimport { \n  Box, \n  Paper, \n  Typography, \n  Stepper, \n  Step, \n  StepLabel, \n  Button, \n  Divider, \n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  InputAdornment, \n  IconButton,\n  Alert,\n  Snackbar,\n  CircularProgress,\n  FormControlLabel,\n  Switch\n} from '@mui/material';\nimport { GridContainer, GridItem } from '../common/MuiGridWrapper';\nimport { \n  CalendarMonth as CalendarIcon,\n  Business as BusinessIcon,\n  Person as PersonIcon,\n  PriorityHigh as PriorityIcon,\n  Save as SaveIcon,\n  Delete as DeleteIcon,\n  Publish as PublishIcon,\n  ArrowBack as ArrowBackIcon,\n  Add as AddIcon\n} from '@mui/icons-material';\nimport { Department, Project, ProjectPriority, ProjectStatus, User, UserRole } from '../../types';\nimport { useAuth } from '../../context/AuthContext';\nimport { useTranslation } from 'react-i18next';\nimport api from '../../services/api';\nimport { useNavigate } from 'react-router-dom';\nimport { canManageProjects } from '../../utils/permissions';\n\n// Define a simple TeamMemberList component for now\nconst TeamMemberList: React.FC<{\n  users: User[];\n  selectedMembers: string[];\n  onMembersChange: (members: string[]) => void;\n}> = ({ users, selectedMembers, onMembersChange }) => {\n  return (\n    <Box>\n      <Typography variant=\"body2\" color=\"text.secondary\">\n        Team members selection will be implemented here\n      </Typography>\n      {/* Placeholder UI for team member selection */}\n      <Button startIcon={<AddIcon />} variant=\"outlined\" sx={{ mt: 1 }}>\n        Add Team Member\n      </Button>\n    </Box>\n  );\n};\n\n// Define a simple MilestoneList component for now\nconst MilestoneList: React.FC<{\n  milestones: any[];\n  onMilestonesChange: (milestones: any[]) => void;\n}> = ({ milestones, onMilestonesChange }) => {\n  return (\n    <Box>\n      <Typography variant=\"body2\" color=\"text.secondary\">\n        Milestones will be implemented here\n      </Typography>\n      {/* Placeholder UI for milestones */}\n      <Button startIcon={<AddIcon />} variant=\"outlined\" sx={{ mt: 1 }}>\n        Add Milestone\n      </Button>\n    </Box>\n  );\n};\n\n// Define a simple BudgetForm component for now\nconst BudgetForm: React.FC<{\n  items: any[];\n  onItemsChange: (items: any[]) => void;\n}> = ({ items, onItemsChange }) => {\n  return (\n    <Box>\n      <Typography variant=\"body2\" color=\"text.secondary\">\n        Budget items will be implemented here\n      </Typography>\n      {/* Placeholder UI for budget items */}\n      <Button startIcon={<AddIcon />} variant=\"outlined\" sx={{ mt: 1 }}>\n        Add Budget Item\n      </Button>\n    </Box>\n  );\n};\n\n// Enum for audit actions\nenum AuditAction {\n  CREATE = 'CREATE',\n  UPDATE = 'UPDATE',\n  DELETE = 'DELETE',\n  LOGIN = 'LOGIN',\n  LOGOUT = 'LOGOUT',\n  APPROVE = 'APPROVE',\n  REJECT = 'REJECT',\n  SUBMIT = 'SUBMIT'\n}\n\n// Update the interface\ninterface LegacyProjectFormData {\n  name: string;\n  description: string;\n  departmentId: string;\n  startDate: Date;\n  endDate: Date;\n  status: ProjectStatus;\n  projectManagerId: string;\n  budget: number;\n  goalsLink: string;\n  teamMembers: string[];\n  priority: ProjectPriority;\n  legacyImport: boolean;\n  milestones: any[];\n  budgetItems: any[];\n  id?: string; // Add optional id property\n}\n\n// Extend the audit logs API interface\ninterface AuditLogAPI {\n  getAuditLogs: (token: string) => Promise<any>;\n  getAuditLogById: (logId: string, token: string) => Promise<any>;\n  createAuditLog: (auditData: any, token: string) => Promise<any>;\n}\n\n// Add the createAuditLog function to the auditLogs API\n(api.auditLogs as AuditLogAPI).createAuditLog = async (auditData: any, token: string) => {\n  console.log('Creating audit log:', auditData);\n  // This is a stub - in a real implementation, it would call the API\n  return { success: true };\n};\n\n// Continue with the component\ninterface LegacyProjectFormProps {\n  departments: Department[];\n  users: User[];\n  onCancel: () => void;\n}\n\nconst steps = ['Basic Information', 'Team & Timeline', 'Budget & Documents'];\n\nconst LegacyProjectForm: React.FC<LegacyProjectFormProps> = ({\n  departments,\n  users,\n  onCancel\n}) => {\n  const { token, user } = useAuth();\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitError, setSubmitError] = useState<string | null>(null);\n  const [activeStep, setActiveStep] = useState(0);\n  const [formData, setFormData] = useState<LegacyProjectFormData>({\n    name: '',\n    description: '',\n    departmentId: '',\n    startDate: new Date(),\n    endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\n    status: ProjectStatus.PLANNING,\n    projectManagerId: '',\n    budget: 0,\n    goalsLink: '',\n    teamMembers: [],\n    priority: ProjectPriority.MEDIUM,\n    legacyImport: true,\n    milestones: [],\n    budgetItems: []\n  });\n  const [saveAsDraft, setSaveAsDraft] = useState(false);\n  const [openDeleteDialog, setOpenDeleteDialog] = useState(false);\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const [snackbarMessage, setSnackbarMessage] = useState('');\n  const [teamMembers, setTeamMembers] = useState<string[]>([]);\n  const [milestones, setMilestones] = useState<any[]>([]);\n  const [budgetItems, setBudgetItems] = useState<any[]>([]);\n\n  // Check if user has appropriate role (SUB_PMO, MAIN_PMO, or ADMIN)\n  const hasPermission = user?.role === UserRole.SUB_PMO || \n                       user?.role === UserRole.MAIN_PMO || \n                       user?.role === UserRole.ADMIN;\n\n  // Redirect if user doesn't have permission\n  useEffect(() => {\n    if (!hasPermission) {\n      navigate('/dashboard');\n    }\n  }, [hasPermission, navigate]);\n\n  // Default values for the form\n  const defaultValues: LegacyProjectFormData = {\n    name: '',\n    description: '',\n    departmentId: '',\n    startDate: new Date(),\n    endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000), // Default to 30 days from now\n    status: ProjectStatus.PLANNING,\n    projectManagerId: '',\n    budget: 0,\n    goalsLink: '',\n    teamMembers: [],\n    priority: ProjectPriority.MEDIUM,\n    legacyImport: true, // Default to true for legacy import\n    milestones: [],\n    budgetItems: []\n  };\n\n  // Get project managers\n  const getProjectManagers = () => {\n    return users\n      .filter(user => \n        user.role === UserRole.PROJECT_MANAGER || \n        user.role === UserRole.SUB_PMO || \n        user.role === UserRole.MAIN_PMO\n      )\n      .map(pm => ({\n        value: pm.id,\n        label: `${pm.firstName} ${pm.lastName}`\n      }));\n  };\n\n  // Handle closing the snackbar\n  const handleSnackbarClose = () => {\n    setSnackbarOpen(false);\n  };\n\n  // Custom function to create audit log since the API endpoint might be missing\n  const createProjectAuditLog = async (projectId: string, details: string, metadata: any) => {\n    try {\n      // In a real implementation, this would call api.auditLogs.createAuditLog\n      // For now, we'll just log the information\n      console.log('Creating audit log:', {\n        action: AuditAction.CREATE,\n        entityType: 'Project',\n        entityId: projectId,\n        details,\n        metadata\n      });\n      // Return a success response\n      return { success: true };\n    } catch (error) {\n      console.error('Error creating audit log:', error);\n      return { success: false };\n    }\n  };\n\n  // Function to save as draft\n  const saveProjectAsDraft = async (data: LegacyProjectFormData) => {\n    setIsSubmitting(true);\n    setSubmitError(null);\n    \n    try {\n      const projectDataToSave = {\n        ...data,\n        startDate: data.startDate.toISOString(),\n        endDate: data.endDate.toISOString(),\n        budget: data.budget,\n        teamMembers: teamMembers,\n        milestones: milestones,\n        budgetItems: budgetItems,\n        priority: data.priority,\n        legacyImport: true,\n        isDraft: true,\n        status: ProjectStatus.PLANNING\n      };\n      \n      const projectResponse = await api.projects.createProject(projectDataToSave, token || '');\n      \n      if (projectResponse.data) {\n        // Create audit log for the legacy import\n        await createProjectAuditLog(\n          projectResponse.data.id,\n          `Manual legacy import created as draft by ${user?.firstName} ${user?.lastName}`,\n          {\n            legacyImport: true,\n            createdBy: user?.id,\n            createdAt: new Date().toISOString()\n          }\n        );\n        \n        setSnackbarMessage('Legacy project saved as draft');\n        setSnackbarOpen(true);\n        \n        // Redirect to projects list after a short delay\n        setTimeout(() => {\n          navigate('/projects');\n        }, 2000);\n      } else {\n        setSubmitError('Failed to save project draft. Please try again.');\n      }\n    } catch (error) {\n      console.error('Error saving project draft:', error);\n      setSubmitError('An error occurred while saving the project draft.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Function to publish the project\n  const publishProject = async (data: LegacyProjectFormData) => {\n    setIsSubmitting(true);\n    setSubmitError(null);\n    \n    try {\n      const projectDataToSave = {\n        ...data,\n        startDate: data.startDate.toISOString(),\n        endDate: data.endDate.toISOString(),\n        budget: data.budget,\n        teamMembers: teamMembers,\n        milestones: milestones,\n        budgetItems: budgetItems,\n        priority: data.priority,\n        legacyImport: true,\n        isDraft: false,\n        status: data.status\n      };\n      \n      const projectResponse = await api.projects.createProject(projectDataToSave, token || '');\n      \n      if (projectResponse.data) {\n        // Create audit log for the legacy import\n        await createProjectAuditLog(\n          projectResponse.data.id,\n          `Manual legacy import published by ${user?.firstName} ${user?.lastName}`,\n          {\n            legacyImport: true,\n            createdBy: user?.id,\n            createdAt: new Date().toISOString()\n          }\n        );\n        \n        setSnackbarMessage('Legacy project published successfully');\n        setSnackbarOpen(true);\n        \n        // Redirect to projects list after a short delay\n        setTimeout(() => {\n          navigate('/projects');\n        }, 2000);\n      } else {\n        setSubmitError('Failed to publish project. Please try again.');\n      }\n    } catch (error) {\n      console.error('Error publishing project:', error);\n      setSubmitError('An error occurred while publishing the project.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Handle team members update\n  const handleTeamMembersUpdate = (members: string[]) => {\n    setTeamMembers(members);\n  };\n\n  // Handle milestones update\n  const handleMilestonesUpdate = (milestoneList: any[]) => {\n    setMilestones(milestoneList);\n  };\n\n  // Handle budget items update\n  const handleBudgetItemsUpdate = (items: any[]) => {\n    setBudgetItems(items);\n  };\n\n  // Form validation\n  const validateForm = (data: LegacyProjectFormData) => {\n    const errors: Partial<Record<keyof LegacyProjectFormData, string>> = {};\n    \n    if (!data.name) {\n      errors.name = 'Project name is required';\n    }\n    \n    if (!data.departmentId) {\n      errors.departmentId = 'Department is required';\n    }\n    \n    if (!data.projectManagerId) {\n      errors.projectManagerId = 'Project manager is required';\n    }\n    \n    if (!data.startDate) {\n      errors.startDate = 'Start date is required';\n    }\n    \n    if (!data.endDate) {\n      errors.endDate = 'End date is required';\n    } else if (data.endDate < data.startDate) {\n      errors.endDate = 'End date must be after start date';\n    }\n    \n    if (!data.status) {\n      errors.status = 'Status is required';\n    }\n    \n    return errors;\n  };\n\n  // Handle step navigation\n  const handleNext = () => {\n    setActiveStep(prevActiveStep => prevActiveStep + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep(prevActiveStep => prevActiveStep - 1);\n  };\n\n  // Handle form submission on each step\n  const handleStepSubmit = (data: LegacyProjectFormData) => {\n    const errors = validateForm(data);\n    \n    if (Object.keys(errors).length === 0) {\n      setFormData(prevData => ({ ...prevData, ...data }));\n      \n      if (activeStep === steps.length - 1) {\n        if (saveAsDraft) {\n          saveProjectAsDraft({ ...formData, ...data });\n        } else {\n          publishProject({ ...formData, ...data });\n        }\n      } else {\n        handleNext();\n      }\n    } else {\n      setSubmitError('Please fix the errors before continuing');\n    }\n  };\n\n  // Handle deleting the draft\n  const handleDeleteDraft = async () => {\n    if (!formData?.id) {\n      setOpenDeleteDialog(false);\n      onCancel();\n      return;\n    }\n    \n    try {\n      await api.projects.deleteProject(formData.id as string, token || '');\n      setSnackbarMessage('Draft deleted successfully');\n      setSnackbarOpen(true);\n      setOpenDeleteDialog(false);\n      \n      // Redirect to projects list after a short delay\n      setTimeout(() => {\n        navigate('/projects');\n      }, 1500);\n    } catch (error) {\n      console.error('Error deleting draft:', error);\n      setSnackbarMessage('Failed to delete draft');\n      setSnackbarOpen(true);\n      setOpenDeleteDialog(false);\n    }\n  };\n\n  // Then update the getStepContent function with proper types\n  const getStepContent = (\n    step: number, \n    control: Control<LegacyProjectFormData>, \n    errors: FieldErrors<LegacyProjectFormData>\n  ): React.ReactNode => {\n    switch (step) {\n      case 0:\n        return (\n          <Box sx={{ p: 3, mt: 2 }}>\n            <GridContainer spacing={3}>\n              <GridItem xs={12}>\n                <FormTextField\n                  name=\"name\"\n                  label={t('project.name')}\n                  required\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12}>\n                <FormTextField\n                  name=\"description\"\n                  label={t('project.description')}\n                  multiline\n                  rows={3}\n                  required\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12} sm={6}>\n                <FormSelect\n                  name=\"departmentId\"\n                  label={t('project.department')}\n                  required\n                  options={departments.map(dept => ({\n                    value: dept.id,\n                    label: dept.name\n                  }))}\n                  startIcon={\n                    <InputAdornment position=\"start\">\n                      <BusinessIcon color=\"action\" />\n                    </InputAdornment>\n                  }\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12} sm={6}>\n                <FormSelect\n                  name=\"projectManagerId\"\n                  label={t('project.projectManager')}\n                  required\n                  options={getProjectManagers()}\n                  startIcon={\n                    <InputAdornment position=\"start\">\n                      <PersonIcon color=\"action\" />\n                    </InputAdornment>\n                  }\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12} sm={6}>\n                <FormSelect\n                  name=\"priority\"\n                  label={t('project.priority')}\n                  required\n                  options={[\n                    { value: ProjectPriority.LOW, label: t('projectPriority.LOW') },\n                    { value: ProjectPriority.MEDIUM, label: t('projectPriority.MEDIUM') },\n                    { value: ProjectPriority.HIGH, label: t('projectPriority.HIGH') },\n                    { value: ProjectPriority.CRITICAL, label: t('projectPriority.CRITICAL') }\n                  ]}\n                  startIcon={\n                    <InputAdornment position=\"start\">\n                      <PriorityIcon color=\"action\" />\n                    </InputAdornment>\n                  }\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12}>\n                <FormControlLabel\n                  control={\n                    <Switch\n                      checked={true}\n                      disabled={true}\n                    />\n                  }\n                  label=\"Imported from Legacy PMO\"\n                />\n              </GridItem>\n            </GridContainer>\n          </Box>\n        );\n      case 1:\n        return (\n          <Box sx={{ p: 3, mt: 2 }}>\n            <GridContainer spacing={3}>\n              <GridItem xs={12} sm={6}>\n                <FormDatePicker\n                  name=\"startDate\"\n                  label={t('project.startDate')}\n                  required\n                  startIcon={\n                    <InputAdornment position=\"start\">\n                      <CalendarIcon color=\"action\" />\n                    </InputAdornment>\n                  }\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12} sm={6}>\n                <FormDatePicker\n                  name=\"endDate\"\n                  label={t('project.endDate')}\n                  required\n                  minDate={defaultValues.startDate}\n                  startIcon={\n                    <InputAdornment position=\"start\">\n                      <CalendarIcon color=\"action\" />\n                    </InputAdornment>\n                  }\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12} sm={6}>\n                <FormSelect\n                  name=\"status\"\n                  label={t('project.status')}\n                  required\n                  options={[\n                    { value: ProjectStatus.PLANNING, label: t('projectStatus.PLANNING') },\n                    { value: ProjectStatus.IN_PROGRESS, label: t('projectStatus.IN_PROGRESS') },\n                    { value: ProjectStatus.ON_HOLD, label: t('projectStatus.ON_HOLD') },\n                    { value: ProjectStatus.COMPLETED, label: t('projectStatus.COMPLETED') },\n                    { value: ProjectStatus.CANCELLED, label: t('projectStatus.CANCELLED') }\n                  ]}\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12}>\n                <Divider sx={{ my: 2 }} />\n                <Typography variant=\"h6\" gutterBottom>\n                  Team Members\n                </Typography>\n                <TeamMemberList \n                  users={users}\n                  selectedMembers={teamMembers}\n                  onMembersChange={handleTeamMembersUpdate}\n                />\n              </GridItem>\n              \n              <GridItem xs={12}>\n                <Divider sx={{ my: 2 }} />\n                <Typography variant=\"h6\" gutterBottom>\n                  Milestones\n                </Typography>\n                <MilestoneList\n                  milestones={milestones}\n                  onMilestonesChange={handleMilestonesUpdate}\n                />\n              </GridItem>\n            </GridContainer>\n          </Box>\n        );\n      case 2:\n        return (\n          <Box sx={{ p: 3, mt: 2 }}>\n            <GridContainer spacing={3}>\n              <GridItem xs={12} sm={6}>\n                <FormTextField\n                  name=\"budget\"\n                  label={t('project.budget')}\n                  type=\"number\"\n                  required\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12} sm={6}>\n                <FormTextField\n                  name=\"goalsLink\"\n                  label={t('project.goalsLink')}\n                  control={control}\n                  errors={errors}\n                />\n              </GridItem>\n              \n              <GridItem xs={12}>\n                <Divider sx={{ my: 2 }} />\n                <Typography variant=\"h6\" gutterBottom>\n                  Budget Items\n                </Typography>\n                <BudgetForm\n                  items={budgetItems}\n                  onItemsChange={handleBudgetItemsUpdate}\n                />\n              </GridItem>\n            </GridContainer>\n          </Box>\n        );\n      default:\n        return 'Unknown step';\n    }\n  };\n\n  if (!hasPermission) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <Alert severity=\"error\">\n          You do not have permission to access this page.\n        </Alert>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ width: '100%', minHeight: '100vh', bgcolor: 'background.default', py: 4 }}>\n      <Box sx={{ maxWidth: 1200, mx: 'auto', px: 2 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 4 }}>\n          <Typography variant=\"h4\" component=\"h1\">\n            Add Legacy Project\n          </Typography>\n          <Button \n            variant=\"outlined\" \n            startIcon={<ArrowBackIcon />} \n            onClick={onCancel}\n          >\n            Back to Projects\n          </Button>\n        </Box>\n        \n        <Paper sx={{ p: 3, mb: 4 }}>\n          <Stepper activeStep={activeStep} alternativeLabel sx={{ mb: 4 }}>\n            {steps.map((label) => (\n              <Step key={label}>\n                <StepLabel>{label}</StepLabel>\n              </Step>\n            ))}\n          </Stepper>\n\n          <FormWithValidation<LegacyProjectFormData>\n            defaultValues={defaultValues}\n            onSubmit={handleStepSubmit}\n            submitButtonText={activeStep === steps.length - 1 ? 'Publish Project' : 'Next'}\n            cancelButtonText={activeStep === 0 ? 'Cancel' : 'Back'}\n            onCancel={activeStep === 0 ? onCancel : handleBack}\n            isLoading={isSubmitting}\n            error={submitError || undefined}\n          >\n            {(control, errors) => (\n              <>\n                {getStepContent(activeStep, control, errors)}\n                {activeStep === steps.length - 1 && (\n                  <Box sx={{ display: 'flex', mt: 3 }}>\n                    <Button\n                      variant=\"outlined\"\n                      color=\"primary\"\n                      startIcon={<SaveIcon />}\n                      onClick={() => {\n                        setSaveAsDraft(true);\n                        // Submit form is triggered which will check saveAsDraft flag\n                      }}\n                      sx={{ mr: 1 }}\n                      disabled={isSubmitting}\n                    >\n                      Save as Draft\n                    </Button>\n                    <Button\n                      variant=\"outlined\"\n                      color=\"error\"\n                      startIcon={<DeleteIcon />}\n                      onClick={() => setOpenDeleteDialog(true)}\n                      disabled={isSubmitting}\n                    >\n                      Delete Draft\n                    </Button>\n                  </Box>\n                )}\n              </>\n            )}\n          </FormWithValidation>\n        </Paper>\n      </Box>\n      \n      {/* Delete Draft Confirmation Dialog */}\n      <Dialog\n        open={openDeleteDialog}\n        onClose={() => setOpenDeleteDialog(false)}\n      >\n        <DialogTitle>Delete Draft Project?</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Are you sure you want to delete this draft project? This action cannot be undone.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOpenDeleteDialog(false)}>Cancel</Button>\n          <Button onClick={handleDeleteDraft} color=\"error\">Delete</Button>\n        </DialogActions>\n      </Dialog>\n      \n      {/* Snackbar for notifications */}\n      <Snackbar\n        open={snackbarOpen}\n        autoHideDuration={4000}\n        onClose={handleSnackbarClose}\n        message={snackbarMessage}\n      />\n    </Box>\n  );\n};\n\nexport default LegacyProjectForm; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}