{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Box,Typography,Paper,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,TablePagination,Chip,TextField,FormControl,InputLabel,Select,MenuItem,Avatar,InputAdornment,Button,CircularProgress,Alert,Card,CardContent,Divider}from'@mui/material';import{GridContainer,GridItem}from'../components/common/MuiGridWrapper';import{Search as SearchIcon,VerifiedUser as VerifiedUserIcon,RestartAlt as ResetIcon,Download as DownloadIcon}from'@mui/icons-material';import{useAuth}from'../context/AuthContext';import{UserRole}from'../types';import{useTranslation}from'react-i18next';import{fetchAuditLogsWithFilters,getAuditActionDescription,getEntityTypeName}from'../utils/auditLogUtils';import{DatePicker}from'@mui/x-date-pickers/DatePicker';import{LocalizationProvider}from'@mui/x-date-pickers/LocalizationProvider';import{AdapterDateFns}from'@mui/x-date-pickers/AdapterDateFns';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AuditLogPage=()=>{var _users$find;const{t}=useTranslation();const{user,token}=useAuth();const[logs,setLogs]=useState([]);const[filteredLogs,setFilteredLogs]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[page,setPage]=useState(0);const[rowsPerPage,setRowsPerPage]=useState(10);const[searchQuery,setSearchQuery]=useState('');const[actionFilter,setActionFilter]=useState('all');const[entityTypeFilter,setEntityTypeFilter]=useState('all');const[startDate,setStartDate]=useState(new Date(Date.now()-30*24*60*60*1000));// 30 days ago\nconst[endDate,setEndDate]=useState(new Date());const[userFilter,setUserFilter]=useState('all');const[users,setUsers]=useState([]);const[entityTypes,setEntityTypes]=useState([]);const[actionTypes,setActionTypes]=useState([]);const[statsData,setStatsData]=useState({total:0,byAction:{},byEntity:{},byUser:{}});// Check if user has permission to view this page\nconst hasPermission=(user===null||user===void 0?void 0:user.role)===UserRole.ADMIN||(user===null||user===void 0?void 0:user.role)===UserRole.MAIN_PMO||(user===null||user===void 0?void 0:user.role)===UserRole.SUB_PMO;useEffect(()=>{if(hasPermission&&token){fetchLogs();}},[token,hasPermission]);const fetchLogs=async()=>{setLoading(true);setError(null);try{// Fetch logs with any initial filters\nconst filters={startDate:startDate||undefined,endDate:endDate||undefined};const fetchedLogs=await fetchAuditLogsWithFilters(token||'',filters);setLogs(fetchedLogs);setFilteredLogs(fetchedLogs);// Extract unique users, entity types, and action types for filters\nconst uniqueUsers=Array.from(new Set(fetchedLogs.map(log=>log.userId)));const uniqueEntityTypes=Array.from(new Set(fetchedLogs.map(log=>log.entityType)));const uniqueActionTypes=Array.from(new Set(fetchedLogs.map(log=>log.action)));setUsers(uniqueUsers.map(userId=>{const log=fetchedLogs.find(l=>l.userId===userId);return{id:userId,name:log?log.username:userId};}));setEntityTypes(uniqueEntityTypes);setActionTypes(uniqueActionTypes);// Calculate statistics\nconst stats={total:fetchedLogs.length,byAction:{},byEntity:{},byUser:{}};fetchedLogs.forEach(log=>{// Count by action\nif(stats.byAction[log.action]){stats.byAction[log.action]++;}else{stats.byAction[log.action]=1;}// Count by entity\nif(stats.byEntity[log.entityType]){stats.byEntity[log.entityType]++;}else{stats.byEntity[log.entityType]=1;}// Count by user\nif(stats.byUser[log.userId]){stats.byUser[log.userId]++;}else{stats.byUser[log.userId]=1;}});setStatsData(stats);}catch(err){console.error('Error fetching audit logs:',err);setError('Failed to load audit logs. Please try again.');}finally{setLoading(false);}};useEffect(()=>{applyFilters();},[searchQuery,actionFilter,entityTypeFilter,userFilter,startDate,endDate,logs]);const applyFilters=()=>{let result=[...logs];// Filter by date range\nif(startDate&&endDate){result=result.filter(log=>{const logDate=new Date(log.timestamp);return logDate>=startDate&&logDate<=endDate;});}// Filter by action\nif(actionFilter!=='all'){result=result.filter(log=>log.action===actionFilter);}// Filter by entity type\nif(entityTypeFilter!=='all'){result=result.filter(log=>log.entityType===entityTypeFilter);}// Filter by user\nif(userFilter!=='all'){result=result.filter(log=>log.userId===userFilter);}// Search query (search across all fields)\nif(searchQuery){const query=searchQuery.toLowerCase();result=result.filter(log=>log.action.toLowerCase().includes(query)||log.details.toLowerCase().includes(query)||log.entityType.toLowerCase().includes(query)||log.entityId.toLowerCase().includes(query)||log.username.toLowerCase().includes(query));}setFilteredLogs(result);setPage(0);// Reset to first page when filters change\n};const handleChangePage=(event,newPage)=>{setPage(newPage);};const handleChangeRowsPerPage=event=>{setRowsPerPage(parseInt(event.target.value,10));setPage(0);};const handleSearchChange=event=>{setSearchQuery(event.target.value);};const handleActionFilterChange=event=>{setActionFilter(event.target.value);};const handleEntityTypeFilterChange=event=>{setEntityTypeFilter(event.target.value);};const handleUserFilterChange=event=>{setUserFilter(event.target.value);};const resetFilters=()=>{setSearchQuery('');setActionFilter('all');setEntityTypeFilter('all');setUserFilter('all');setStartDate(new Date(Date.now()-30*24*60*60*1000));setEndDate(new Date());};const exportToCSV=()=>{// Convert logs to CSV\nconst headers=['Timestamp','User','Action','Entity Type','Entity ID','Details','IP Address'];const csvRows=[headers.join(','),...filteredLogs.map(log=>[new Date(log.timestamp).toISOString(),log.username,log.action,log.entityType,log.entityId,`\"${log.details.replace(/\"/g,'\"\"')}\"`,// Escape quotes in details\nlog.ipAddress].join(','))];// Create and download the CSV file\nconst csvContent=csvRows.join('\\n');const blob=new Blob([csvContent],{type:'text/csv;charset=utf-8;'});const url=URL.createObjectURL(blob);const link=document.createElement('a');link.setAttribute('href',url);link.setAttribute('download',`audit_logs_${new Date().toISOString().split('T')[0]}.csv`);link.style.visibility='hidden';document.body.appendChild(link);link.click();document.body.removeChild(link);};const getActionChipColor=action=>{if(action.includes('CREATE')||action.includes('_created'))return'success';if(action.includes('UPDATE')||action.includes('_updated'))return'info';if(action.includes('DELETE')||action.includes('_deleted'))return'error';if(action.includes('APPROVE')||action.includes('_approved'))return'success';if(action.includes('REJECT')||action.includes('_rejected'))return'error';if(action.includes('LOGIN'))return'primary';if(action.includes('LOGOUT'))return'secondary';if(action.includes('ERROR')||action.includes('_error'))return'error';return'default';};if(!hasPermission){return/*#__PURE__*/_jsx(Box,{sx:{p:3},children:/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:\"You do not have permission to access this page.\"})});}return/*#__PURE__*/_jsxs(Box,{sx:{p:3},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:3},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(VerifiedUserIcon,{fontSize:\"large\",color:\"primary\",sx:{mr:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",fontWeight:\"bold\",children:t('auditLogs.title','System Audit Logs')})]}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(DownloadIcon,{}),onClick:exportToCSV,disabled:loading||filteredLogs.length===0,sx:{mr:1},children:t('common.export','Export')}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(ResetIcon,{}),onClick:resetFilters,disabled:loading,children:t('common.resetFilters','Reset Filters')})]})]}),/*#__PURE__*/_jsxs(GridContainer,{spacing:2,sx:{mb:3},children:[/*#__PURE__*/_jsx(GridItem,{xs:12,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"primary\",children:t('auditLogs.totalEvents','Total Events')}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:statsData.total})]})})}),/*#__PURE__*/_jsx(GridItem,{xs:12,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"primary\",children:t('auditLogs.mostFrequentAction','Most Frequent Action')}),Object.keys(statsData.byAction).length>0?/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Chip,{label:getAuditActionDescription(Object.entries(statsData.byAction).sort((a,b)=>b[1]-a[1])[0][0]),color:getActionChipColor(Object.entries(statsData.byAction).sort((a,b)=>b[1]-a[1])[0][0]),size:\"small\",sx:{mr:1}}),/*#__PURE__*/_jsx(Typography,{children:Object.entries(statsData.byAction).sort((a,b)=>b[1]-a[1])[0][1]})]}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"No data\"})]})})}),/*#__PURE__*/_jsx(GridItem,{xs:12,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"primary\",children:t('auditLogs.mostActiveEntity','Most Active Entity')}),Object.keys(statsData.byEntity).length>0?/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsxs(Typography,{children:[getEntityTypeName(Object.entries(statsData.byEntity).sort((a,b)=>b[1]-a[1])[0][0]),\":\"]}),/*#__PURE__*/_jsx(Typography,{sx:{ml:1},children:Object.entries(statsData.byEntity).sort((a,b)=>b[1]-a[1])[0][1]})]}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"No data\"})]})})}),/*#__PURE__*/_jsx(GridItem,{xs:12,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"primary\",children:t('auditLogs.mostActiveUser','Most Active User')}),Object.keys(statsData.byUser).length>0?/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsxs(Typography,{children:[((_users$find=users.find(u=>u.id===Object.entries(statsData.byUser).sort((a,b)=>b[1]-a[1])[0][0]))===null||_users$find===void 0?void 0:_users$find.name)||'Unknown',\":\"]}),/*#__PURE__*/_jsx(Typography,{sx:{ml:1},children:Object.entries(statsData.byUser).sort((a,b)=>b[1]-a[1])[0][1]})]}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"No data\"})]})})})]}),/*#__PURE__*/_jsxs(Paper,{sx:{p:2,mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{mb:2},children:t('common.filters','Filters')}),/*#__PURE__*/_jsxs(GridContainer,{spacing:2,children:[/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(TextField,{label:t('common.search','Search'),fullWidth:true,variant:\"outlined\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(SearchIcon,{})})}})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,md:3,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:t('auditLogs.action','Action')}),/*#__PURE__*/_jsxs(Select,{value:actionFilter,label:t('auditLogs.action','Action'),onChange:handleActionFilterChange,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"all\",children:t('common.all','All')}),actionTypes.map(action=>/*#__PURE__*/_jsx(MenuItem,{value:action,children:getAuditActionDescription(action)},action))]})]})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,md:3,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:t('auditLogs.entityType','Entity Type')}),/*#__PURE__*/_jsxs(Select,{value:entityTypeFilter,label:t('auditLogs.entityType','Entity Type'),onChange:handleEntityTypeFilterChange,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"all\",children:t('common.all','All')}),entityTypes.map(type=>/*#__PURE__*/_jsx(MenuItem,{value:type,children:getEntityTypeName(type)},type))]})]})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,md:3,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:t('auditLogs.user','User')}),/*#__PURE__*/_jsxs(Select,{value:userFilter,label:t('auditLogs.user','User'),onChange:handleUserFilterChange,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"all\",children:t('common.all','All')}),users.map(user=>/*#__PURE__*/_jsx(MenuItem,{value:user.id,children:user.name},user.id))]})]})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(LocalizationProvider,{dateAdapter:AdapterDateFns,children:/*#__PURE__*/_jsx(DatePicker,{label:t('auditLogs.startDate','Start Date'),value:startDate,onChange:date=>setStartDate(date),slotProps:{textField:{fullWidth:true}}})})}),/*#__PURE__*/_jsx(GridItem,{xs:12,sm:6,children:/*#__PURE__*/_jsx(LocalizationProvider,{dateAdapter:AdapterDateFns,children:/*#__PURE__*/_jsx(DatePicker,{label:t('auditLogs.endDate','End Date'),value:endDate,onChange:date=>setEndDate(date),slotProps:{textField:{fullWidth:true}}})})})]})]}),/*#__PURE__*/_jsx(Paper,{children:loading?/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',p:3},children:/*#__PURE__*/_jsx(CircularProgress,{})}):error?/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Box,{sx:{p:2},children:/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",children:[t('auditLogs.showing','Showing'),' ',/*#__PURE__*/_jsx(\"strong\",{children:filteredLogs.length}),' ',t('auditLogs.outOf','out of'),' ',/*#__PURE__*/_jsx(\"strong\",{children:logs.length}),' ',t('auditLogs.events','events')]})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(TableContainer,{children:/*#__PURE__*/_jsxs(Table,{sx:{minWidth:650},\"aria-label\":\"audit logs table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:t('auditLogs.timestamp','Timestamp')}),/*#__PURE__*/_jsx(TableCell,{children:t('auditLogs.user','User')}),/*#__PURE__*/_jsx(TableCell,{children:t('auditLogs.action','Action')}),/*#__PURE__*/_jsx(TableCell,{children:t('auditLogs.entityType','Entity Type')}),/*#__PURE__*/_jsx(TableCell,{children:t('auditLogs.entityId','Entity ID')}),/*#__PURE__*/_jsx(TableCell,{children:t('auditLogs.details','Details')})]})}),/*#__PURE__*/_jsx(TableBody,{children:filteredLogs.length>0?filteredLogs.slice(page*rowsPerPage,page*rowsPerPage+rowsPerPage).map(log=>/*#__PURE__*/_jsxs(TableRow,{hover:true,children:[/*#__PURE__*/_jsx(TableCell,{children:new Date(log.timestamp).toLocaleString()}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{sx:{width:24,height:24,mr:1},children:log.username.charAt(0)}),log.username]})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Chip,{label:getAuditActionDescription(log.action),size:\"small\",color:getActionChipColor(log.action)})}),/*#__PURE__*/_jsx(TableCell,{children:getEntityTypeName(log.entityType)}),/*#__PURE__*/_jsx(TableCell,{children:log.entityId}),/*#__PURE__*/_jsx(TableCell,{children:log.details})]},log.id)):/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:6,align:\"center\",children:/*#__PURE__*/_jsxs(Box,{sx:{py:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",gutterBottom:true,children:t('auditLogs.noLogsFound','No logs found')}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:t('auditLogs.tryChangingFilters','Try changing your filters to see more results')})]})})})})]})}),/*#__PURE__*/_jsx(TablePagination,{rowsPerPageOptions:[5,10,25,50],component:\"div\",count:filteredLogs.length,rowsPerPage:rowsPerPage,page:page,onPageChange:handleChangePage,onRowsPerPageChange:handleChangeRowsPerPage})]})})]});};export default AuditLogPage;","map":{"version":3,"names":["React","useState","useEffect","Box","Typography","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","TablePagination","Chip","TextField","FormControl","InputLabel","Select","MenuItem","Avatar","InputAdornment","Button","CircularProgress","Alert","Card","CardContent","Divider","GridContainer","GridItem","Search","SearchIcon","VerifiedUser","VerifiedUserIcon","RestartAlt","ResetIcon","Download","DownloadIcon","useAuth","UserRole","useTranslation","fetchAuditLogsWithFilters","getAuditActionDescription","getEntityTypeName","DatePicker","LocalizationProvider","AdapterDateFns","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AuditLogPage","_users$find","t","user","token","logs","setLogs","filteredLogs","setFilteredLogs","loading","setLoading","error","setError","page","setPage","rowsPerPage","setRowsPerPage","searchQuery","setSearchQuery","actionFilter","setActionFilter","entityTypeFilter","setEntityTypeFilter","startDate","setStartDate","Date","now","endDate","setEndDate","userFilter","setUserFilter","users","setUsers","entityTypes","setEntityTypes","actionTypes","setActionTypes","statsData","setStatsData","total","byAction","byEntity","byUser","hasPermission","role","ADMIN","MAIN_PMO","SUB_PMO","fetchLogs","filters","undefined","fetchedLogs","uniqueUsers","Array","from","Set","map","log","userId","uniqueEntityTypes","entityType","uniqueActionTypes","action","find","l","id","name","username","stats","length","forEach","err","console","applyFilters","result","filter","logDate","timestamp","query","toLowerCase","includes","details","entityId","handleChangePage","event","newPage","handleChangeRowsPerPage","parseInt","target","value","handleSearchChange","handleActionFilterChange","handleEntityTypeFilterChange","handleUserFilterChange","resetFilters","exportToCSV","headers","csvRows","join","toISOString","replace","ipAddress","csvContent","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","setAttribute","split","style","visibility","body","appendChild","click","removeChild","getActionChipColor","sx","p","children","severity","display","justifyContent","alignItems","mb","fontSize","color","mr","variant","component","fontWeight","startIcon","onClick","disabled","spacing","xs","md","Object","keys","label","entries","sort","a","b","size","ml","u","sm","fullWidth","onChange","e","InputProps","startAdornment","position","dateAdapter","date","slotProps","textField","minWidth","slice","hover","toLocaleString","width","height","charAt","colSpan","align","py","gutterBottom","rowsPerPageOptions","count","onPageChange","onRowsPerPageChange"],"sources":["/Users/hassanalsahli/Desktop/Themis/themis-client-final/src/pages/AuditLogPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Typography,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  TablePagination,\n  Chip,\n  IconButton,\n  TextField,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Avatar,\n  Toolbar,\n  InputAdornment,\n  SelectChangeEvent,\n  Button,\n  CircularProgress,\n  Alert,\n  Card,\n  CardContent,\n  Divider\n} from '@mui/material';\nimport { GridContainer, GridItem } from '../components/common/MuiGridWrapper';\nimport {\n  Search as SearchIcon,\n  FilterList as FilterIcon,\n  VerifiedUser as VerifiedUserIcon,\n  Error as ErrorIcon,\n  Info as InfoIcon,\n  RestartAlt as ResetIcon,\n  Download as DownloadIcon,\n  Check as CheckIcon,\n  Close as CloseIcon\n} from '@mui/icons-material';\nimport { useAuth } from '../context/AuthContext';\nimport { UserRole } from '../types';\nimport { useTranslation } from 'react-i18next';\nimport { AuditAction, AuditLog, fetchAuditLogsWithFilters, getAuditActionDescription, getEntityTypeName } from '../utils/auditLogUtils';\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\n\nconst AuditLogPage: React.FC = () => {\n  const { t } = useTranslation();\n  const { user, token } = useAuth();\n  const [logs, setLogs] = useState<AuditLog[]>([]);\n  const [filteredLogs, setFilteredLogs] = useState<AuditLog[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(10);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [actionFilter, setActionFilter] = useState<string>('all');\n  const [entityTypeFilter, setEntityTypeFilter] = useState<string>('all');\n  const [startDate, setStartDate] = useState<Date | null>(new Date(Date.now() - 30 * 24 * 60 * 60 * 1000)); // 30 days ago\n  const [endDate, setEndDate] = useState<Date | null>(new Date());\n  const [userFilter, setUserFilter] = useState<string>('all');\n  const [users, setUsers] = useState<any[]>([]);\n  const [entityTypes, setEntityTypes] = useState<string[]>([]);\n  const [actionTypes, setActionTypes] = useState<string[]>([]);\n  const [statsData, setStatsData] = useState({\n    total: 0,\n    byAction: {} as Record<string, number>,\n    byEntity: {} as Record<string, number>,\n    byUser: {} as Record<string, number>\n  });\n\n  // Check if user has permission to view this page\n  const hasPermission = user?.role === UserRole.ADMIN || \n                        user?.role === UserRole.MAIN_PMO || \n                        user?.role === UserRole.SUB_PMO;\n\n  useEffect(() => {\n    if (hasPermission && token) {\n      fetchLogs();\n    }\n  }, [token, hasPermission]);\n\n  const fetchLogs = async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Fetch logs with any initial filters\n      const filters = {\n        startDate: startDate || undefined,\n        endDate: endDate || undefined\n      };\n\n      const fetchedLogs = await fetchAuditLogsWithFilters(token || '', filters);\n      setLogs(fetchedLogs);\n      setFilteredLogs(fetchedLogs);\n\n      // Extract unique users, entity types, and action types for filters\n      const uniqueUsers = Array.from(new Set(fetchedLogs.map(log => log.userId)));\n      const uniqueEntityTypes = Array.from(new Set(fetchedLogs.map(log => log.entityType)));\n      const uniqueActionTypes = Array.from(new Set(fetchedLogs.map(log => log.action)));\n\n      setUsers(uniqueUsers.map(userId => {\n        const log = fetchedLogs.find(l => l.userId === userId);\n        return {\n          id: userId,\n          name: log ? log.username : userId\n        };\n      }));\n      \n      setEntityTypes(uniqueEntityTypes);\n      setActionTypes(uniqueActionTypes as string[]);\n\n      // Calculate statistics\n      const stats = {\n        total: fetchedLogs.length,\n        byAction: {} as Record<string, number>,\n        byEntity: {} as Record<string, number>,\n        byUser: {} as Record<string, number>\n      };\n\n      fetchedLogs.forEach(log => {\n        // Count by action\n        if (stats.byAction[log.action]) {\n          stats.byAction[log.action]++;\n        } else {\n          stats.byAction[log.action] = 1;\n        }\n\n        // Count by entity\n        if (stats.byEntity[log.entityType]) {\n          stats.byEntity[log.entityType]++;\n        } else {\n          stats.byEntity[log.entityType] = 1;\n        }\n\n        // Count by user\n        if (stats.byUser[log.userId]) {\n          stats.byUser[log.userId]++;\n        } else {\n          stats.byUser[log.userId] = 1;\n        }\n      });\n\n      setStatsData(stats);\n    } catch (err) {\n      console.error('Error fetching audit logs:', err);\n      setError('Failed to load audit logs. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    applyFilters();\n  }, [searchQuery, actionFilter, entityTypeFilter, userFilter, startDate, endDate, logs]);\n\n  const applyFilters = () => {\n    let result = [...logs];\n\n    // Filter by date range\n    if (startDate && endDate) {\n      result = result.filter(log => {\n        const logDate = new Date(log.timestamp);\n        return logDate >= startDate && logDate <= endDate;\n      });\n    }\n\n    // Filter by action\n    if (actionFilter !== 'all') {\n      result = result.filter(log => log.action === actionFilter);\n    }\n\n    // Filter by entity type\n    if (entityTypeFilter !== 'all') {\n      result = result.filter(log => log.entityType === entityTypeFilter);\n    }\n\n    // Filter by user\n    if (userFilter !== 'all') {\n      result = result.filter(log => log.userId === userFilter);\n    }\n\n    // Search query (search across all fields)\n    if (searchQuery) {\n      const query = searchQuery.toLowerCase();\n      result = result.filter(log =>\n        log.action.toLowerCase().includes(query) ||\n        log.details.toLowerCase().includes(query) ||\n        log.entityType.toLowerCase().includes(query) ||\n        log.entityId.toLowerCase().includes(query) ||\n        log.username.toLowerCase().includes(query)\n      );\n    }\n\n    setFilteredLogs(result);\n    setPage(0); // Reset to first page when filters change\n  };\n\n  const handleChangePage = (event: unknown, newPage: number) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  const handleSearchChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setSearchQuery(event.target.value);\n  };\n\n  const handleActionFilterChange = (event: SelectChangeEvent) => {\n    setActionFilter(event.target.value);\n  };\n\n  const handleEntityTypeFilterChange = (event: SelectChangeEvent) => {\n    setEntityTypeFilter(event.target.value);\n  };\n\n  const handleUserFilterChange = (event: SelectChangeEvent) => {\n    setUserFilter(event.target.value);\n  };\n\n  const resetFilters = () => {\n    setSearchQuery('');\n    setActionFilter('all');\n    setEntityTypeFilter('all');\n    setUserFilter('all');\n    setStartDate(new Date(Date.now() - 30 * 24 * 60 * 60 * 1000));\n    setEndDate(new Date());\n  };\n\n  const exportToCSV = () => {\n    // Convert logs to CSV\n    const headers = ['Timestamp', 'User', 'Action', 'Entity Type', 'Entity ID', 'Details', 'IP Address'];\n    const csvRows = [\n      headers.join(','),\n      ...filteredLogs.map(log => [\n        new Date(log.timestamp).toISOString(),\n        log.username,\n        log.action,\n        log.entityType,\n        log.entityId,\n        `\"${log.details.replace(/\"/g, '\"\"')}\"`, // Escape quotes in details\n        log.ipAddress\n      ].join(','))\n    ];\n\n    // Create and download the CSV file\n    const csvContent = csvRows.join('\\n');\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.setAttribute('href', url);\n    link.setAttribute('download', `audit_logs_${new Date().toISOString().split('T')[0]}.csv`);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const getActionChipColor = (action: string): \"default\" | \"primary\" | \"secondary\" | \"error\" | \"info\" | \"success\" | \"warning\" => {\n    if (action.includes('CREATE') || action.includes('_created')) return 'success';\n    if (action.includes('UPDATE') || action.includes('_updated')) return 'info';\n    if (action.includes('DELETE') || action.includes('_deleted')) return 'error';\n    if (action.includes('APPROVE') || action.includes('_approved')) return 'success';\n    if (action.includes('REJECT') || action.includes('_rejected')) return 'error';\n    if (action.includes('LOGIN')) return 'primary';\n    if (action.includes('LOGOUT')) return 'secondary';\n    if (action.includes('ERROR') || action.includes('_error')) return 'error';\n    return 'default';\n  };\n\n  if (!hasPermission) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <Alert severity=\"error\">\n          You do not have permission to access this page.\n        </Alert>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ p: 3 }}>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Box sx={{ display: 'flex', alignItems: 'center' }}>\n          <VerifiedUserIcon fontSize=\"large\" color=\"primary\" sx={{ mr: 2 }} />\n          <Typography variant=\"h4\" component=\"h1\" fontWeight=\"bold\">\n            {t('auditLogs.title', 'System Audit Logs')}\n          </Typography>\n        </Box>\n        <Box>\n          <Button\n            variant=\"outlined\"\n            startIcon={<DownloadIcon />}\n            onClick={exportToCSV}\n            disabled={loading || filteredLogs.length === 0}\n            sx={{ mr: 1 }}\n          >\n            {t('common.export', 'Export')}\n          </Button>\n          <Button\n            variant=\"outlined\"\n            startIcon={<ResetIcon />}\n            onClick={resetFilters}\n            disabled={loading}\n          >\n            {t('common.resetFilters', 'Reset Filters')}\n          </Button>\n        </Box>\n      </Box>\n\n      {/* Stats Cards */}\n      <GridContainer spacing={2} sx={{ mb: 3 }}>\n        <GridItem xs={12} md={3}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" color=\"primary\">\n                {t('auditLogs.totalEvents', 'Total Events')}\n              </Typography>\n              <Typography variant=\"h4\">{statsData.total}</Typography>\n            </CardContent>\n          </Card>\n        </GridItem>\n        <GridItem xs={12} md={3}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" color=\"primary\">\n                {t('auditLogs.mostFrequentAction', 'Most Frequent Action')}\n              </Typography>\n              {Object.keys(statsData.byAction).length > 0 ? (\n                <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                  <Chip \n                    label={getAuditActionDescription(\n                      Object.entries(statsData.byAction)\n                        .sort((a, b) => b[1] - a[1])[0][0] as AuditAction\n                    )} \n                    color={getActionChipColor(\n                      Object.entries(statsData.byAction)\n                        .sort((a, b) => b[1] - a[1])[0][0]\n                    ) as any}\n                    size=\"small\"\n                    sx={{ mr: 1 }}\n                  />\n                  <Typography>\n                    {Object.entries(statsData.byAction)\n                      .sort((a, b) => b[1] - a[1])[0][1]}\n                  </Typography>\n                </Box>\n              ) : (\n                <Typography variant=\"body2\">No data</Typography>\n              )}\n            </CardContent>\n          </Card>\n        </GridItem>\n        <GridItem xs={12} md={3}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" color=\"primary\">\n                {t('auditLogs.mostActiveEntity', 'Most Active Entity')}\n              </Typography>\n              {Object.keys(statsData.byEntity).length > 0 ? (\n                <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                  <Typography>\n                    {getEntityTypeName(\n                      Object.entries(statsData.byEntity)\n                        .sort((a, b) => b[1] - a[1])[0][0]\n                    )}:\n                  </Typography>\n                  <Typography sx={{ ml: 1 }}>\n                    {Object.entries(statsData.byEntity)\n                      .sort((a, b) => b[1] - a[1])[0][1]}\n                  </Typography>\n                </Box>\n              ) : (\n                <Typography variant=\"body2\">No data</Typography>\n              )}\n            </CardContent>\n          </Card>\n        </GridItem>\n        <GridItem xs={12} md={3}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" color=\"primary\">\n                {t('auditLogs.mostActiveUser', 'Most Active User')}\n              </Typography>\n              {Object.keys(statsData.byUser).length > 0 ? (\n                <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                  <Typography>\n                    {users.find(\n                      u => u.id === Object.entries(statsData.byUser)\n                        .sort((a, b) => b[1] - a[1])[0][0]\n                    )?.name || 'Unknown'}:\n                  </Typography>\n                  <Typography sx={{ ml: 1 }}>\n                    {Object.entries(statsData.byUser)\n                      .sort((a, b) => b[1] - a[1])[0][1]}\n                  </Typography>\n                </Box>\n              ) : (\n                <Typography variant=\"body2\">No data</Typography>\n              )}\n            </CardContent>\n          </Card>\n        </GridItem>\n      </GridContainer>\n\n      {/* Filters */}\n      <Paper sx={{ p: 2, mb: 2 }}>\n        <Typography variant=\"h6\" sx={{ mb: 2 }}>\n          {t('common.filters', 'Filters')}\n        </Typography>\n        <GridContainer spacing={2}>\n          <GridItem xs={12} sm={6} md={3}>\n            <TextField\n              label={t('common.search', 'Search')}\n              fullWidth\n              variant=\"outlined\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <SearchIcon />\n                  </InputAdornment>\n                ),\n              }}\n            />\n          </GridItem>\n          <GridItem xs={12} sm={6} md={3}>\n            <FormControl fullWidth>\n              <InputLabel>{t('auditLogs.action', 'Action')}</InputLabel>\n              <Select\n                value={actionFilter}\n                label={t('auditLogs.action', 'Action')}\n                onChange={handleActionFilterChange}\n              >\n                <MenuItem value=\"all\">{t('common.all', 'All')}</MenuItem>\n                {actionTypes.map((action) => (\n                  <MenuItem key={action} value={action}>\n                    {getAuditActionDescription(action as AuditAction)}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n          </GridItem>\n          <GridItem xs={12} sm={6} md={3}>\n            <FormControl fullWidth>\n              <InputLabel>{t('auditLogs.entityType', 'Entity Type')}</InputLabel>\n              <Select\n                value={entityTypeFilter}\n                label={t('auditLogs.entityType', 'Entity Type')}\n                onChange={handleEntityTypeFilterChange}\n              >\n                <MenuItem value=\"all\">{t('common.all', 'All')}</MenuItem>\n                {entityTypes.map((type) => (\n                  <MenuItem key={type} value={type}>\n                    {getEntityTypeName(type)}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n          </GridItem>\n          <GridItem xs={12} sm={6} md={3}>\n            <FormControl fullWidth>\n              <InputLabel>{t('auditLogs.user', 'User')}</InputLabel>\n              <Select\n                value={userFilter}\n                label={t('auditLogs.user', 'User')}\n                onChange={handleUserFilterChange}\n              >\n                <MenuItem value=\"all\">{t('common.all', 'All')}</MenuItem>\n                {users.map((user) => (\n                  <MenuItem key={user.id} value={user.id}>\n                    {user.name}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n          </GridItem>\n          <GridItem xs={12} sm={6}>\n            <LocalizationProvider dateAdapter={AdapterDateFns}>\n              <DatePicker\n                label={t('auditLogs.startDate', 'Start Date')}\n                value={startDate}\n                onChange={(date) => setStartDate(date)}\n                slotProps={{ textField: { fullWidth: true } }}\n              />\n            </LocalizationProvider>\n          </GridItem>\n          <GridItem xs={12} sm={6}>\n            <LocalizationProvider dateAdapter={AdapterDateFns}>\n              <DatePicker\n                label={t('auditLogs.endDate', 'End Date')}\n                value={endDate}\n                onChange={(date) => setEndDate(date)}\n                slotProps={{ textField: { fullWidth: true } }}\n              />\n            </LocalizationProvider>\n          </GridItem>\n        </GridContainer>\n      </Paper>\n\n      {/* Logs Table */}\n      <Paper>\n        {loading ? (\n          <Box sx={{ display: 'flex', justifyContent: 'center', p: 3 }}>\n            <CircularProgress />\n          </Box>\n        ) : error ? (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {error}\n          </Alert>\n        ) : (\n          <>\n            <Box sx={{ p: 2 }}>\n              <Typography variant=\"subtitle1\">\n                {t('auditLogs.showing', 'Showing')}{' '}\n                <strong>{filteredLogs.length}</strong>{' '}\n                {t('auditLogs.outOf', 'out of')}{' '}\n                <strong>{logs.length}</strong>{' '}\n                {t('auditLogs.events', 'events')}\n              </Typography>\n            </Box>\n            <Divider />\n            <TableContainer>\n              <Table sx={{ minWidth: 650 }} aria-label=\"audit logs table\">\n                <TableHead>\n                  <TableRow>\n                    <TableCell>{t('auditLogs.timestamp', 'Timestamp')}</TableCell>\n                    <TableCell>{t('auditLogs.user', 'User')}</TableCell>\n                    <TableCell>{t('auditLogs.action', 'Action')}</TableCell>\n                    <TableCell>{t('auditLogs.entityType', 'Entity Type')}</TableCell>\n                    <TableCell>{t('auditLogs.entityId', 'Entity ID')}</TableCell>\n                    <TableCell>{t('auditLogs.details', 'Details')}</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {filteredLogs.length > 0 ? (\n                    filteredLogs\n                      .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                      .map((log) => (\n                        <TableRow key={log.id} hover>\n                          <TableCell>\n                            {new Date(log.timestamp).toLocaleString()}\n                          </TableCell>\n                          <TableCell>\n                            <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                              <Avatar sx={{ width: 24, height: 24, mr: 1 }}>\n                                {log.username.charAt(0)}\n                              </Avatar>\n                              {log.username}\n                            </Box>\n                          </TableCell>\n                          <TableCell>\n                            <Chip\n                              label={getAuditActionDescription(log.action as AuditAction)}\n                              size=\"small\"\n                              color={getActionChipColor(log.action) as any}\n                            />\n                          </TableCell>\n                          <TableCell>{getEntityTypeName(log.entityType)}</TableCell>\n                          <TableCell>{log.entityId}</TableCell>\n                          <TableCell>{log.details}</TableCell>\n                        </TableRow>\n                      ))\n                  ) : (\n                    <TableRow>\n                      <TableCell colSpan={6} align=\"center\">\n                        <Box sx={{ py: 3 }}>\n                          <Typography variant=\"body1\" gutterBottom>\n                            {t('auditLogs.noLogsFound', 'No logs found')}\n                          </Typography>\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                            {t('auditLogs.tryChangingFilters', 'Try changing your filters to see more results')}\n                          </Typography>\n                        </Box>\n                      </TableCell>\n                    </TableRow>\n                  )}\n                </TableBody>\n              </Table>\n            </TableContainer>\n            <TablePagination\n              rowsPerPageOptions={[5, 10, 25, 50]}\n              component=\"div\"\n              count={filteredLogs.length}\n              rowsPerPage={rowsPerPage}\n              page={page}\n              onPageChange={handleChangePage}\n              onRowsPerPageChange={handleChangeRowsPerPage}\n            />\n          </>\n        )}\n      </Paper>\n    </Box>\n  );\n};\n\nexport default AuditLogPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}